<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>MathBox - Helix Test</title>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/three@0.137.0/build/three.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/controls/OrbitControls.js"
    ></script>
    <!--
      - a minified version mathbox.min.js is also available;
      - recommend using a specific version (not @latest) in public sites
    -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/mathbox@latest/build/bundle/mathbox.js"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/mathbox@latest/build/mathbox.css"
    />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  </head>
  <body>
    <script>

      var wdth = 2200;

      mathbox = MathBox.mathBox({
        plugins: ["core", "controls", "cursor"],
        controls: {
          klass: THREE.OrbitControls,
        },
      });
      three = mathbox.three;

      three.camera.position.set(1.5, 1, 2.2);
      three.renderer.setClearColor(new THREE.Color(0xffffff), 1.0);

      view = mathbox.cartesian({
        range: [
          [-5, 2],
          [-2, 2],
          [-2, 2],
        ],
        scale: [1, 0.5, 0.5],
        
      },
          {
            quaternion: function (t) {
              return [0, -Math.sin(t / 40), 0, Math.cos(t / 40)];
            },
          }
      );

      view.transform({
          position: [-1, 0, 0],
        }).
        axis({
        width: 5,
        start: true,
        end: true,
      });

      // Positive branches
      view.interval({
        width: wdth,
        expr: function (emit, x, i, time) {
          //Curve(t, ℯ^(t ln(abs(t))) cos(2π t n), ℯ^(t ln(abs(t))) sin(2π t n), t, -4, 2)
          

          for(var k=1; k <=7; k++){
            var theta = x;
            var a = Math.exp(theta * Math.log(Math.abs(theta))) * Math.cos(2 * Math.PI * theta * k);
            var b = Math.exp(theta * Math.log(Math.abs(theta))) * Math.sin(2 * Math.PI * theta * k);
            emit(x, a, b);
          }
          
          
        },
        items: 7,
        channels: 3,
      });

      view.transform({
          position: [-1, 0, 0],
        })
        .line({
        color: 0x3090ff,
        width: 1.5,
        size: 1.5,
        start: true,
        end: false,
      });

      // Negative branches
      view.interval({
        width: wdth,
        expr: function (emit, x, i, time) {
          //Curve(t, ℯ^(t ln(abs(t))) cos(2π t n), ℯ^(t ln(abs(t))) sin(2π t n), t, -4, 2)
          

          for(var k=1; k <=6; k++){
            var theta = x;
            var a = Math.exp(theta * Math.log(Math.abs(theta))) * Math.cos(2 * Math.PI * theta * (k-7));
            var b = Math.exp(theta * Math.log(Math.abs(theta))) * Math.sin(2 * Math.PI * theta * (k-7));
            emit(x, a, b);
          }
          
          
        },
        items: 6,
        channels: 3,
      });

      view.transform({
          position: [-1, 0, 0],
        })
        .line({
        color: 0x3090ff,
        width: 1.5,
        size: 1.5,
        start: false,
        end: false,
      });

      // Main branche
      view.interval({
        width: wdth,
        expr: function (emit, x, i, time) {
          //Curve(t, ℯ^(t ln(abs(t))) cos(2π t n), ℯ^(t ln(abs(t))) sin(2π t n), t, -4, 2)
 
            var theta = x;
            var a = Math.exp(theta * Math.log(Math.abs(theta))) * Math.cos(2 * Math.PI * theta * 0);
            var b = Math.exp(theta * Math.log(Math.abs(theta))) * Math.sin(2 * Math.PI * theta * 0);
            emit(x, a, b);

        },
        items: 1,
        channels: 3,
      });

      view.transform({
          position: [-1, 0, 0],
        })
        .line({
        color: 0x000000,
        width: 6,
        size: 1.5,
        start: false,
        end: false,
      });


    </script>
  </body>
</html>
